(function(e){function n(n){for(var t,r,s=n[0],c=n[1],l=n[2],f=0,d=[];f<s.length;f++)r=s[f],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);u&&u(n);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,n=0;n<a.length;n++){for(var i=a[n],t=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(t=!1)}t&&(a.splice(n--,1),e=r(r.s=i[0]))}return e}var t={},o={"pages/usercenter":0},a=[];function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(){return Promise.resolve()},r.m=e,r.c=t,r.d=function(e,n,i){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)r.d(i,t,function(n){return e[n]}.bind(null,t));return i},r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var u=c;a.push([128,"chunk-vendors","chunk-common"]),i()})({"08da":function(e,n,i){"use strict";i.r(n);i("e260"),i("e6cf"),i("cca6"),i("a79d");var t=i("56d7"),o=function(){var e=this,n=e._self._c;return n("div",{staticClass:"page-wrap",style:e.pageThemeStyle},[n("div",{staticClass:"content-container"},[n("userheader",{attrs:{isCdfi:e.isCdfi,isShowMember:e.isShowMember,sellerInfo:e.sellerInfo,allSellerInfo:e.allSellerInfo,logined:e.logined,userInfo:e.userInfo,vipInfo:e.vipInfo,memberInfo:e.memberInfo,baseInfo:e.pageData.baseInfo},on:{junmpClickHandle:e.junmpClickHandle,handleBindMobile:e.handleBindMobile,goCheckinPage:e.goCheckinPage,activateNow:e.activateNow,handleCopy:e.handleCopy}}),e._l(e.pageData.parts,(function(i,t){return["user-assets"===i.skinCode?n("collection",{key:t,attrs:{userInfo:e.userInfo,memberInfo:e.memberInfo},on:{junmpClickHandle:e.junmpClickHandle}}):e._e(),"user-orders"===i.skinCode?n("order",{key:t,attrs:{evaluation:e.evaluation,luxuryStyle:e.luxuryStyle},on:{junmpClickHandle:e.junmpClickHandle}}):e._e(),"user-menus"===i.skinCode?n("tools",{key:t,attrs:{part:i,isCdfi:e.isCdfi,evaluation:e.evaluation,logined:e.logined,userInfo:e.userInfo,sellerInfo:e.sellerInfo},on:{junmpClickHandle:e.junmpClickHandle}}):e._e(),"user-banner"===i.skinCode?n("shopBanner",{key:t,attrs:{part:i,isUserCenterBanner:!0}}):e._e()]}))],2),e.showServicePop?n("div",{staticClass:"popup_mask_box"},[n("div",{staticClass:"service_popup_mask",on:{click:function(n){e.showServicePop=!1}}}),n("div",{staticClass:"service_popup"},[n("div",{staticClass:"service"},[n("div",{staticClass:"tips"},[e._v(e._s(e.$t("usercenter.doubt_service_wechat")))]),n("div",{staticClass:"wechat"},[e._v(e._s(e.wechat))]),n("div",{staticClass:"copy_btn",on:{click:function(n){return e.handleCopy("wechat")}}},[e._v(e._s(e.$t("usercenter.key_copy")))])]),n("img",{staticClass:"close",attrs:{src:i("1e2d"),alt:""},on:{click:function(n){e.showServicePop=!1}}})])]):e._e(),n("tabnav",{ref:"tabnav"})],1)},a=[],r=i("773a"),s=r["a"],c=(i("ccaf"),i("519b"),i("2877")),l=Object(c["a"])(s,o,a,!1,null,"0d84ca8e",null),u=l.exports;i.p=publicPath,Object(t["a"])(u)},128:function(e,n,i){e.exports=i("08da")},"35fb":function(e,n,i){},"3d18":function(e,n,i){},"519b":function(e,n,i){"use strict";i("35fb")},"773a":function(e,n,i){"use strict";(function(e){i("a9e3"),i("e9c4");var t=i("bcb3"),o=i("191e"),a=i("1adf"),r=i("b68d"),s=i("fe47"),c=i("0b36"),l=i("ed08"),u=i("5422"),f=i("3f60"),d=i("891b"),h=i("5e06"),p=i("e64c"),g=(i("3fa5"),i("a8f5"));n["a"]={components:{tabnav:t["a"],userheader:u["a"],collection:f["a"],order:d["a"],tools:h["a"],shopBanner:p["default"]},mixins:[o["a"],a["a"],r["a"]],data:function(){return{logined:!1,userInfo:{},memberInfo:{},isShowMember:!1,vipInfo:{},sellerId:"",noticeType:2,unReadMessageCount:0,showServicePop:!1,sellerInfo:{},isWechat:l["a"].isWechat,isCdfi:!1,langtList:[],pageData:{baseInfo:{},parts:[{skinCode:"user-assets"},{skinCode:"user-orders"},{skinCode:"user-menus"}]},evaluation:{},allSellerInfo:{}}},computed:{isCdf:function(){return 500024716===Number(this.sellerInfo.id)},wechat:function(){var e=this.sellerInfo.customerServiceId,n=void 0===e?"":e;return n}},created:function(){var n=this;this.getusercenterconfig(),e.auth.authBindMobile({lazy:!0,lazyBindCard:!0,lazyAuthCard:!0}).then((function(e){n.init()})).catch((function(){n.isShowMember=!0})),e.onShow((function(){e.auth.authBindMobile({lazy:!0,lazyBindCard:!0,lazyAuthCard:!0}).then((function(e){n.init(!0)})).catch((function(){n.isShowMember=!0})),n.sellerInfo&&1==n.sellerInfo.shopType&&e.navigateTo({url:"/pages/shoplist/main?type=2"})}))},mounted:function(){this.isCdfi=s["a"].isCdfi(),this.getExtraData(),e.setNavigationBarTitle({title:this.$t("platforms.personal_center")})},methods:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logined=!0,this.logined&&(this.getUserInfo(e),this.loadShopConfig())},getLang:function(){var n=this;e.request({url:"/api/prod/sqlangchoose",method:"GET",data:{mchId:s["a"].getMchId()}}).then((function(e){n.langtList=e.data}))},getusercenterconfig:function(){var n=this;e.request("/api/usercenter/getusercenterconfig").then((function(i){if(i&&"{}"!==JSON.stringify(i)){n.pageData=i;var t={},o=s["a"].getMchId();e.getStorage({key:"USER_CENTER_CONFIG"}).then((function(e){console.log(e),e?(t=e,t[o]=i,n.setStorageConfig(t)):(t[o]=i,n.setStorageConfig(t))})).catch((function(){t[o]=i,n.setStorageConfig(t)}))}else n.getStorageConfig()}),(function(e){n.getStorageConfig()}))},setStorageConfig:function(n){e.setStorage({key:"USER_CENTER_CONFIG",data:n})},getStorageConfig:function(){var n=this;e.getStorage({key:"USER_CENTER_CONFIG"}).then((function(e){var i=s["a"].getMchId(),t=e;i in t&&(n.pageData=t[i])})).catch((function(){}))},activateNow:function(){var n=this;if(this.logined)if(3===this.allSellerInfo.envType&&this.allSellerInfo.openSelfMember)e.navigateTo({url:"/pages/checkbindmobile/main"});else if(this.vipInfo&&!this.vipInfo.hasMobile){var i=this.memberInfo,t=i.needInviteCode,o=i.inviteCode,a=i.needBindMobile;l["a"].isBuyerApp?e.navigateTo({url:"/pages/bindmobilenumber/main"}):e.auth.openBindMobile({needInviteCode:t,inviteCode:o,needBindMobile:a}).then((function(){n.init()}))}else this.vipInfo&&(this.vipInfo.needBindCard||this.vipInfo.needAuthCard)?e.navigateTo({url:"/pages/memberhandbook/main"}):(this.vipInfo.needChangeMobile||this.userInfo.vipInfo.needChangeID)&&this.showMemberPopup();else e.auth.tologin()},junmpClickHandle:function(n,i){switch(n){case"goLogin":if(!this.checkLogin())return;e.auth.tologin();break;case"orderList":if(!this.checkLogin())return;e.navigateTo({url:"/pages/myorderlist/main?tabIndex=".concat(i)});break;case"clearanceCard":if(!this.checkLogin())return;e.navigateTo({url:"/pages/idcardlist/main"});break;case"prizeRecord":e.navigateTo({url:"/pages/prizeRecord/main"});break;case"purchasein":e.navigateTo({url:"/pages/purchaseinlist/main"});break;case"addressSelect":if(!this.checkLogin())return;e.navigateTo({url:"/pages/addressList/main"});break;case"myService":if(e.store.getAppImUrl())return void e.navigateTo({url:e.store.getAppImUrl()});break;case"coupons":if(!this.checkLogin())return;e.navigateTo({url:"/pages/coupons/main"});break;case"tuan":if(!this.checkLogin())return;e.navigateTo({url:"/pages/mylist/main"});break;case"commission":if(!this.checkLogin())return;e.navigateTo({url:"/pages/commissionlist/main"});break;case"userinfo":if(!this.checkLogin())return;e.navigateTo({url:"/pages/userinfo/main"});break;case"integral":e.navigateTo({url:"/pages/memberpoints/main"});break;case"collection":if(!this.checkLogin())return;e.navigateTo({url:"/pages/mycollection/main"});break;case"vip":this.vipInfo.needAuthCard||this.vipInfo.needBindCard||this.vipInfo.needChangeMobile?this.showMemberPopup():3===this.userInfo.envType?e.navigateTo({url:"/pages/membercenterown/main"}):e.navigateTo({url:"/pages/membercenter/main"});break;case"generalsettings":e.navigateTo({url:"/pages/generalsettings/main"});break;case"refundList":if(!this.checkLogin())return;e.navigateTo({url:"/pages/refundlist/main"});break;case"couponcenter":if(!this.checkLogin())return;e.navigateTo({url:"/pages/couponcenter/main"});break;case"vipcoupons":e.navigateTo({url:"/pages/vipcoupons/main"});break;case"evaluate":if(!this.checkLogin())return;e.navigateTo({url:"/pages/myevaluate/main"});break;default:break}},checkLogin:function(){var n=this;if(this.logined)return!0;if(!e.auth.islogin())return e.auth.tologin(),!1;var i=this.memberInfo,t=i.needInviteCode,o=i.inviteCode,a=i.needBindMobile;return a?(l["a"].isBuyerApp?e.navigateTo({url:"/pages/bindmobilenumber/main"}):e.auth.openBindMobile({needInviteCode:t,inviteCode:o}),!1):(e.auth.authBindMobile().then((function(){n.init()})),!1)},getUserInfo:function(n){var i=this,t=this;t.userInfo.nickName||n||e.showLoading({title:t.$t("common.loading",["......"])}),e.request(c["a"].userinfoApi).then((function(o){t.isShowMember=!0,n||e.hideLoading(),t.userInfo=o,t.memberInfo=o.memberInfo,t.vipInfo=o.vipInfo||{},(i.vipInfo.notForceBindCard&&(i.vipInfo.needChangeMobile||i.vipInfo.needChangeID)||!i.vipInfo.notForceBindCard&&(i.vipInfo.needAuthCard||i.vipInfo.needBindCard||i.vipInfo.needChangeMobile))&&i.showMemberPopup()})).catch((function(n){e.hideLoading(),e.showToast({title:n.msg||n.message})}))},showMemberPopup:function(){var n=this,i=1;this.vipInfo.needAuthCard?i=2:this.vipInfo.needChangeMobile?i=3:this.vipInfo.needChangeID&&(i=4),e.auth.openBindVipInfo({type:i,bindCardTips:this.vipInfo.bindCardTips,hideMobile:this.memberInfo.hideMobile,notForceBindCard:this.vipInfo.notForceBindCard,onSuccess:function(){n.getUserInfo(!0)}})},goCheckinPage:function(){Object(g["b"])({linkType:50})},handleBindMobile:function(){var n=this,i=this.memberInfo,t=i.needInviteCode,o=i.inviteCode,a=i.needBindMobile,r=!1;l["a"].isBuyerApp?e.navigateTo({url:"/pages/bindmobilenumber/main"}):e.auth.openBindMobile({needInviteCode:t,inviteCode:o,needBindMobile:a,openVip:r}).then((function(){n.init()}))},bindUserInfo:function(){e.auth.tologin()},handleCopy:function(n){var i=this;e.setClipboardData({data:String("memberId"===n?this.memberInfo.memberId:this.wechat)}).then((function(){e.showToast({title:i.$t("usercenter.copy_paste")}),i.showServicePop=!1})).catch((function(){e.showToast({title:i.$t("usercenter.replication_fails")})}))},getExtraData:function(){var n=this;e.request({url:"/api/prod/sqshopextra"}).then((function(i){if(i&&i.sellerInfo){var t=i.sellerInfo,o=void 0===t?{}:t;if(n.allSellerInfo=i||{},n.sellerInfo=o,o&&o.shopType&&0!==o.shopType&&1===o.shopType)return void e.navigateTo({url:"/pages/shoplist/main?type=2"})}})).catch((function(e){console.log(e)}))},loadShopConfig:function(){var n=this;e.request({url:"/api/prod/shopconfig",method:"get"}).then((function(e){e&&(n.evaluation=e.evaluation||{})}))}}}}).call(this,i("7189")["default"])},ccaf:function(e,n,i){"use strict";i("3d18")}});