(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==r[c]&&(a=!1)}a&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},r={"pages/newmember":0},n=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([87,"chunk-vendors","chunk-common"]),i()})({6685:function(t,e,i){},87:function(t,e,i){t.exports=i("8a7b")},"8a7b":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("56d7"),r=(i("99af"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-new-member",style:[{background:t.bgColor},t.pageThemeStyle]},[e("van-pull-refresh",{attrs:{"animation-duration":"1500","head-height":"60"},on:{refresh:t.pullRefresh},scopedSlots:t._u([{key:"pulling",fn:function(t){return[e("div")]}},{key:"loosing",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":t.bgColor}})]},proxy:!0},{key:"loading",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":t.bgColor}})]},proxy:!0}]),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[e("div",{staticClass:"new-member-content"},[t.showPage?e("div",{staticClass:"head"},[e("div",{staticClass:"card"},[t.bannerUrl?e("img",{staticClass:"card__banner",attrs:{src:t.bannerUrl}}):e("img",{staticClass:"card__banner",attrs:{src:t.$t("newmember.img_new_member_bg")}}),e("div",{staticClass:"card__title"},[e("div",{staticClass:"card__shadow",style:{background:"linear-gradient(360deg,".concat(t.bgColor," 0%,rgba(").concat(t.rgbObj.r,",").concat(t.rgbObj.g,",").concat(t.rgbObj.b,",0) 100%)")}})]),e("div",{staticClass:"card__container"}),t.hasShare?e("div",{staticClass:"card__share",on:{click:t.handleShare}},[e("img",{attrs:{src:i("df9c"),alt:""}}),e("div",{staticClass:"text"},[t._v(t._s(t.$t("common.share")))])]):t._e()])]):t._e(),e("div",{class:["content",{margin_top:t.isActivityEmpty}]},[t.loading&&0===t.pageIndex?e("loading-line"):t._e(),t.loading||0!==t.prodList.length?t._e():e("div",{class:["empty",{"page-empty":t.isActivityEmpty}]},[t.isActivityEmpty?e("img",{attrs:{src:i("d069")}}):t._e(),e("p",[t._v(t._s(t.isActivityEmpty?t.$t("newmember.have_activity"):t.isNoMore?t.$t("newmember.no_goods"):""))])]),e("div",{staticClass:"content__list"},[e("product-list-card",{attrs:{prodList:t.prodList,showPriceControlType:!1,prodType:2,hasShadow:!1,addBtnDisabled:2===t.activityStatus,prodSkinData:t.prodSkinData,cardType:"newmember",priceLabel:t.$t("newmember.new_price")}})],1),t.prodList.length>0?e("loadmore",{attrs:{color:"rgb(255, 255, 255, 0.6)",loading:t.loading&&t.pageIndex>0,hasMore:!t.isNoMore,isPresale:!0}}):t._e()],1)])]),e("shareMask",{attrs:{shareUrl:t.shareUrl,isPresale:!0},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)}),n=[],s=i("b5b0"),o=s["a"],c=(i("fb7a"),i("2877")),l=Object(c["a"])(o,r,n,!1,null,null,null),d=l.exports;i.p=publicPath,Object(a["a"])(d)},b5b0:function(t,e,i){"use strict";(function(t){i("e17f");var a=i("2241"),r=i("5530"),n=(i("ab71"),i("58e6")),s=(i("d3b7"),i("ac1f"),i("00b4"),i("fb6a"),i("841c"),i("b0c0"),i("99af"),i("b68d")),o=i("603c"),c=i("cd92"),l=i("44e4"),d=i("bce3"),u=i("fec4"),h=i("7fcb"),p=i("c08d"),g=i("a8f5");e["a"]={components:{productListCard:c["a"],loadingLine:l["a"],loadmore:d["a"],selectsku:u["a"],shareMask:h["a"],"van-pull-refresh":n["a"],pullRefreshLoading:p["a"]},mixins:[o["a"],s["a"]],data:function(){return{isLoading:!1,activityId:"",sectionId:"",status:1,activityStatus:0,hasShare:t.hasShare,showShare:!1,shareUrl:"",loading:!1,prodList:[],bannerUrl:"",bgColor:"",pageIndex:1,isNoMore:!1,rgbObj:{},isActivityEmpty:!1,isXhr:!1}},computed:{showPage:function(){return(this.prodList&&this.prodList.length||!this.loading)&&!this.isActivityEmpty}},mounted:function(){this.getNewMemberInfo()},onReachBottom:function(){this.isNoMore||this.isXhr||(this.pageIndex++,this.getNewMemberList(this.pageIndex))},methods:{pullRefresh:function(){this.pageIndex=1,this.isNoMore=!1,this.getNewMemberInfo()},handleShare:function(){var e=this;t.ylog.send({action_type:"click",module_name:"share"}),t.getShareData().then((function(i){t.request({url:"/api/social/sqnewusershareinfo",method:"POST",data:Object(r["a"])({activityId:e.activityId},i)}).then((function(t){t.shareUrl&&(e.shareUrl=t.shareUrl,e.showShare=!0)})).catch((function(i){t.showToast({title:i.msg||i.message||e.$t("newmember.failed_graph")})}))}))},fetchPageData:function(){return window._global&&window._global.pageInfo?Promise.resolve(window._global.pageInfo):t.request({url:"/api/prod/shopactivity?activityid=".concat(this.activityId,"&returnNewUser=true")})},getStateDesc:function(t){var e="";switch(t){case 1:e="";break;case 2:e=this.$t("newmember.event_not_start");break;case 3:e=this.$t("newmember.activity_over");break;default:e=this.$t("newmember.activity_over");break}return e},hexToRgb:function(t){var e,i,a;return/^#/g.test(t)?(e=t.slice(1,3),i=t.slice(3,5),a=t.slice(5,7),{r:parseInt(e,16),g:parseInt(i,16),b:parseInt(a,16)}):{}},getNewMemberInfo:function(){var e=this,i=t.parseLocator(window.location.search,"lower"),r=i.sectionid||"",n=i.activityid||"";if(this.status=i.status||1,r&&(this.sectionId=r),n&&(this.activityId=n),!n)return this.loading=!1,void(this.isActivityEmpty=!0);this.loading=!0,this.fetchPageData().then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isLoading=!1,i&&i.unauthorized)return e.loading=!1,e.isActivityEmpty=!0,void a["a"].alert({message:e.$t("newmember.can_not_buy"),confirmButtonText:e.$t("newmember.home_page"),className:"new-member-page"}).then((function(){Object(g["b"])({linkType:999})}));if(i&&i.activityId){var r=i.designConfig||{};return e.bannerUrl=i.activityBanner||"",e.bgColor=r.backgroundColor||"#E03736",e.rgbObj=e.hexToRgb(r.backgroundColor||"#E03736"),e.activityStatus=i.activityStatus||"",t.setNavigationBarTitle({title:i.name||e.$t("newmember.new_exclusive")}),t.wxShare({title:i.name||""}),e.getNewMemberList(e.pageIndex),void(e.loading=!1)}e.loading=!1,e.isActivityEmpty=!0,t.showToast({title:e.$t("newmember.failed_activity")})})).catch((function(i){e.loading=!1,e.isLoading=!1,e.isActivityEmpty=!0,t.showToast({title:i.msg||i.message||e.$t("newmember.failed_activity")})}))},getNewMemberList:function(e){var i=this,a={pageIndex:e,activityType:20,status:this.status};this.sectionId&&(a.sectionId=this.sectionId),this.activityId&&(a.activityId=this.activityId),this.isXhr=!0,t.request({url:"/api/prod/shoppanicbuylist",data:a}).then((function(t){i.isXhr=!1,t&&(i.pageIndex=e,i.prodList=1===e?t.productList||[]:i.prodList.concat(t.productList||[]),t.productList&&0!==t.productList.length||(i.isNoMore=!0))})).catch((function(t){i.isNoMore=!0,console.log("res",t)}))}}}}).call(this,i("7189")["default"])},fb7a:function(t,e,i){"use strict";i("6685")}});