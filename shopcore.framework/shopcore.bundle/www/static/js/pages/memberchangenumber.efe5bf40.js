(function(e){function t(t){for(var i,r,s=t[0],c=t[1],u=t[2],m=0,h=[];m<s.length;m++)r=s[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={"pages/memberchangenumber":0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([71,"chunk-vendors","chunk-common"]),n()})({3411:function(e,t,n){"use strict";var i=function(){var e=this,t=e._self._c;return t("Popup",{staticClass:"countrydialog",attrs:{value:e.value,zIndex:9999,position:"bottom","close-on-click-overlay":!1},on:{input:e.input}},[t("div",{staticClass:"container"},[t("div",{staticClass:"container__title"},[t("span",{staticClass:"container__title__text"},[e._v(e._s(e.title))]),t("span",{staticClass:"container__title__close",on:{click:function(t){return t.stopPropagation(),e.input(!1)}}})]),t("div",{staticClass:"container__list"},e._l(e.areaList,(function(n,i){return t("div",{key:i,class:["container__list__item",{item__active:e.countryInfo.cnTitle==n.cnTitle&&e.countryInfo.areaCode==n.areaCode}],on:{click:function(t){return e.selectCountry(n)}}},[t("div",{staticClass:"item__name"},[e._v(e._s(n.cnTitle))]),t("div",{staticClass:"item__code"},[e._v(e._s(n.areaCode))])])})),0)])])},o=[],a=(n("8a58"),n("e41f")),r=n("5138"),s={components:{Popup:a["a"]},mixins:[r["a"]],props:{value:{type:Boolean},title:{type:String},areaList:{type:Array},countryInfo:{type:Object}},data:function(){return{countryList:[]}},mounted:function(){},computed:{},methods:{input:function(e){this.$emit("input",e)},selectCountry:function(e){this.$emit("selectCountry",e),this.$emit("input",!1)}}},c=s,u=(n("346d"),n("5f60"),n("2877")),l=Object(u["a"])(c,i,o,!1,null,"167fc18b",null);t["a"]=l.exports},"346d":function(e,t,n){"use strict";n("7131")},"5f60":function(e,t,n){"use strict";n("6e9b")},"6bd3":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("56d7"),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"member-change-number"},[e.showPage?[t("div",{staticClass:"prompt-message"},[t("div",{staticClass:"message-top"},[e._v(e._s(e.$t("memberchangenumber.change_mobile")))]),t("div",{staticClass:"message-title"},[e._v(e._s(e.$t("memberchangenumber.stay_same")))])]),t("div",{staticClass:"change-number-form"},[t("van-field",{staticClass:"region-phone",attrs:{center:"",clearable:"",placeholder:e.$t("memberchangenumber.please_mobile"),type:"number"},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"region",on:{click:e.showCountryDialog}},[t("div",{staticClass:"areaCode"},[e._v("+"+e._s(e.countryInfo.areaCode))]),t("img",{staticClass:"trip",attrs:{src:n("5800")}})])]},proxy:!0}],null,!1,955739468),model:{value:e.changeNumberForm.mobile,callback:function(t){e.$set(e.changeNumberForm,"mobile",t)},expression:"changeNumberForm.mobile"}}),t("van-field",{attrs:{maxLength:"6",clearable:"",label:e.$t("memberchangenumber.verification_code"),placeholder:e.$t("memberchangenumber.enter_code")},model:{value:e.changeNumberForm.verifyCode,callback:function(t){e.$set(e.changeNumberForm,"verifyCode",t)},expression:"changeNumberForm.verifyCode"}},[t("template",{slot:"button"},[e.isSending?t("div",{staticClass:"action-sms action-sms--disabled"},[e._v(e._s(e.$t("memberchangenumber.second_again",[e.s])))]):t("TCaptcha",{attrs:{loading:e.loading,validate:e.validate},on:{handleSendSMS:e.handleSendSMS}},[t("div",{staticClass:"action-sms"},[e._v(e._s(e.$t("memberchangenumber.get_code")))])])],1)],2)],1),t("div",{staticClass:"change-number-bottom"},[t("div",{class:["button",{disabled:!e.isCheckButton}],on:{click:e.clickCommit}},[e._v(e._s(e.$t("memberchangenumber.confirm")))])]),t("div",{staticClass:"change-number-sub-btn",on:{click:function(t){return e.showDialogConfirm()}}},[e._v(e._s(e.$t("memberchangenumber.not_modify")))])]:e.showPage?e._e():t("loading-line"),t("countryDialog",{attrs:{title:e.$t("memberchangenumber.select_international"),areaList:e.areaList,countryInfo:e.countryInfo},on:{selectCountry:e.selectCountry},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],2)},a=[],r=n("7430"),s=r["a"],c=(n("fa3d"),n("2877")),u=Object(c["a"])(s,o,a,!1,null,null,null),l=u.exports;n.p=publicPath,Object(i["a"])(l)},"6e9b":function(e,t,n){},71:function(e,t,n){e.exports=n("6bd3")},7131:function(e,t,n){},7430:function(e,t,n){"use strict";(function(e){n("e17f");var i=n("2241"),o=(n("8a58"),n("e41f")),a=(n("be7f"),n("565f")),r=(n("38d5"),n("772a")),s=(n("ac1f"),n("841c"),n("44e4")),c=n("0db1"),u=n("b0ab"),l=n("41c5"),m=n("3411"),h=n("ed08"),d=(n("4073"),{smsApi:"/api/usercenter/sqsendverifycode",bindMobile:"/api/usercenter/bindmobile",sqsendverifycode:"/api/usercenter/sqsendverifycode",sqweblogin:"/api/usercenter/sqweblogin"});t["a"]={name:"index",data:function(){return{showPage:!1,isSending:!1,loading:!1,s:60,isLogin:!1,changeNumberForm:{mobile:"",verifyCode:"",mobileArea:"86"},showDialog:!1,areaList:[],countryInfo:{cnTitle:this.$t("memberchangenumber.chinese_mainland"),areaCode:"86"},isXhr:!1,title:""}},components:{TCaptcha:c["a"],loadingLine:s["a"],countryDialog:m["a"],"van-form":r["a"],"van-field":a["a"],"van-popup":o["a"]},computed:{isCheckButton:function(){return!(!this.changeNumberForm.mobile||!this.changeNumberForm.verifyCode)}},mounted:function(){var t=this;setTimeout((function(){t.showPage=!0}));var n=h["a"].parseLocator(window.location.search);this.title=decodeURIComponent(n.title||this.$t("memberchangenumber.cdf_member")),e.setNavigationBarTitle({title:this.$t("memberchangenumber.change_phone")})},methods:{validate:function(){return!!this.changeNumberForm.mobile||(u["a"].showToast({title:this.$t("memberchangenumber.please_mobile")}),!1)},getMemberCodeTime:function(){var e=this,t=59;this.timer||(this.s=t,this.timer=setInterval((function(){e.s>0&&e.s<=t?e.s--:(e.s=59,e.isSending=!1,clearInterval(e.timer))}),1e3))},handleSendSMS:function(e){var t=this;if(!this.loading&&(this.loading=!0,this.validate())){this.isSending=!0,this.getMemberCodeTime();var n=this.isLogin?d.sqsendverifycode:d.smsApi;l["a"].request({url:n,method:"post",data:{mobile:this.changeNumberForm.mobile,mobileAreaCode:this.countryInfo.areaCode,ticket:e.ticket,randstr:e.randstr,sourceType:e.sourceType}}).then((function(e){var n=e.existUser;t.loading=!1,t.isLogin&&(t.existUser=n,n&&(t.needInviteCode=!1)),t.isSending=!0,t.getMemberCodeTime()})).catch((function(e){t.loading=!1,u["a"].showToast({title:e.message||e.msg||t.$t("memberchangenumber.error_sending")})}))}},showCountryDialog:function(){var e=this;this.areaList&&this.areaList.length>0?this.showDialog=!0:(u["a"].showLoading({title:this.$t("common.loading",["..."])}),l["a"].request({url:"api/usercenter/arealist"}).then((function(t){e.areaList=t.countries,e.showDialog=!0,u["a"].hideLoading()})).catch((function(t){u["a"].hideLoading(),u["a"].showToast({title:t.message||t.msg||e.$t("memberchangenumber.failed_obtain")})})))},selectCountry:function(e){this.countryInfo=e,this.changeNumberForm.mobileArea=e.areaCode||"86"},clickCommit:function(){if(this.isCheckButton){if(this.isXhr)return;this.commitChangeNumberForm()}},commitChangeNumberForm:function(t){var n=this;e.showLoading({title:this.$t("common.loading",["..."])}),this.isXhr=!0;var i=0;t&&(i=1);var o={mobile:this.changeNumberForm.mobile,verifyCode:this.changeNumberForm.verifyCode,mobileAreaCode:this.countryInfo.areaCode};i>0&&(o.confirm=1),e.request({method:"post",url:"/api/usercenter/changemobile",data:o}).then((function(t){n.isXhr=!1,t.cdfMemberOrNot?i>0?e.redirectTo({url:"/pages/memberperfection/main"}):(e.showToast({title:n.$t("memberchangenumber.congratulations"),icon:"none"}),setTimeout((function(){e.navigateBack()}),1e3)):n.showDialogConfirm(!0)})).catch((function(t){n.isXhr=!1,e.hideLoading(),e.showToast({title:t.msg||t.message||n.$t("memberchangenumber.failed_mobile")})}))},showDialogConfirm:function(t){var n=this;i["a"].confirm({title:this.$t("memberchangenumber.sure_phone"),message:this.$t("memberchangenumber.new_account",[this.title]),confirmButtonText:this.$t("memberchangenumber.sure_use"),confirmButtonColor:"#F23340",cancelButtonText:this.$t("memberchangenumber.think_about"),cancelButtonColor:"#666666",className:"show-dialog-confirm"}).then((function(){t?n.commitChangeNumberForm(!0):e.redirectTo({url:"/pages/memberperfection/main"})})).catch((function(){}))}}}}).call(this,n("7189")["default"])},"9ac4":function(e,t,n){},fa3d:function(e,t,n){"use strict";n("9ac4")}});