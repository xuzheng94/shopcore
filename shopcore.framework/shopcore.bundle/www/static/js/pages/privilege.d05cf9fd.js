(function(t){function i(i){for(var a,n,o=i[0],c=i[1],l=i[2],p=0,u=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&u.push(r[n][0]),r[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(i);while(u.length)u.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var t,i=0;i<s.length;i++){for(var e=s[i],a=!0,o=1;o<e.length;o++){var c=e[o];0!==r[c]&&(a=!1)}a&&(s.splice(i--,1),t=n(n.s=e[0]))}return t}var a={},r={"pages/privilege":0},s=[];function n(i){if(a[i])return a[i].exports;var e=a[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.e=function(){return Promise.resolve()},n.m=t,n.c=a,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)n.d(e,a,function(i){return t[i]}.bind(null,a));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=i,o=o.slice();for(var l=0;l<o.length;l++)i(o[l]);var d=c;s.push([93,"chunk-vendors","chunk-common"]),e()})({93:function(t,i,e){t.exports=e("9bb5")},9491:function(t,i,e){},"9bb5":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("56d7"),r=(e("99af"),function(){var t=this,i=t._self._c;return i("div",{staticClass:"container-privilege",style:[{background:t.bgColor},t.pageThemeStyle]},[t.showPage?i("div",{staticClass:"head"},[i("div",{staticClass:"card"},[t.bannerUrl?i("img",{staticClass:"card__banner",attrs:{src:t.bannerUrl}}):i("img",{staticClass:"card__banner",attrs:{src:t.$t("privilege.img_privilege")}}),i("div",{staticClass:"card__title"},[i("div",{staticClass:"card__shadow",style:{background:"linear-gradient(360deg,".concat(t.bgColor," 0%,rgba(").concat(t.rgbObj.r,",").concat(t.rgbObj.g,",").concat(t.rgbObj.b,",0) 100%)")}})]),i("div",{staticClass:"card__container"})])]):t._e(),i("div",{class:["content",{margin_top:t.isActivityEmpty}]},[t.loading&&0===t.pageIndex?i("loading-line"):t._e(),t.loading||0!==t.prodList.length?t._e():i("div",{class:["empty",{"page-empty":t.isActivityEmpty}]},[t.isActivityEmpty?i("img",{attrs:{src:e("d069")}}):t._e(),i("p",[t._v(t._s(t.isActivityEmpty?t.$t("privilege.have_activity"):t.$t("privilege.no_goods")))])]),i("div",{staticClass:"content__list"},[i("product-list-card",{attrs:{prodList:t.prodList,showPriceControlType:!1,prodType:2,hasShadow:!1,addBtnDisabled:2===t.activityStatus,prodSkinData:t.prodSkinData,cardType:"privilege",priceLabel:t.$t("privilege.activity_price"),navigatorParams:t.navigatorParams}})],1),t.prodList.length>0?i("loadmore",{attrs:{color:"rgb(255, 255, 255, 0.6)",loading:t.loading&&t.pageIndex>0,hasMore:!t.isNoMore,isPresale:!0}}):t._e()],1),i("shareMask",{attrs:{shareUrl:t.shareUrl,isPresale:!0},model:{value:t.showShare,callback:function(i){t.showShare=i},expression:"showShare"}})],1)}),s=[],n=e("db87"),o=n["a"],c=(e("d9ab"),e("2877")),l=Object(c["a"])(o,r,s,!1,null,null,null),d=l.exports;e.p=publicPath,Object(a["a"])(d)},d9ab:function(t,i,e){"use strict";e("9491")},db87:function(t,i,e){"use strict";(function(t){e("e17f");var a=e("2241"),r=e("5530"),s=(e("d3b7"),e("ac1f"),e("00b4"),e("fb6a"),e("841c"),e("b0c0"),e("99af"),e("b68d")),n=e("603c"),o=e("cd92"),c=e("44e4"),l=e("bce3"),d=e("fec4"),p=e("7fcb"),u=e("a8f5");i["a"]={components:{productListCard:o["a"],loadingLine:c["a"],loadmore:l["a"],selectsku:d["a"],shareMask:p["a"]},mixins:[n["a"],s["a"]],data:function(){return{activityId:"",activityType:"",sectionId:"",status:1,activityStatus:0,hasShare:t.hasShare,showShare:!1,shareUrl:"",loading:!1,prodList:[],bannerUrl:"",bgColor:"",pageIndex:1,isNoMore:!1,rgbObj:{},isActivityEmpty:!1,isXhr:!1,navigatorParams:{TradingSpecial:1}}},computed:{showPage:function(){return(this.prodList&&this.prodList.length||!this.loading)&&!this.isActivityEmpty}},mounted:function(){t.auth.islogin()?this.getPrivilegeInfo():(this.showPage=!0,t.auth.tologin())},onReachBottom:function(){this.isNoMore||this.isXhr||(this.pageIndex++,this.getPrivilegeList(this.pageIndex))},methods:{handleShare:function(){var i=this;t.ylog.send({action_type:"click",module_name:"share"}),t.getShareData().then((function(e){t.request({url:"/api/social/sqnewusershareinfo",method:"POST",data:Object(r["a"])({activityId:i.activityId},e)}).then((function(t){t.shareUrl&&(i.shareUrl=t.shareUrl,i.showShare=!0)})).catch((function(e){t.showToast({title:e.msg||e.message||i.$t("privilege.failed_graph")})}))}))},fetchPageData:function(){return window._global&&window._global.pageInfo?Promise.resolve(window._global.pageInfo):t.request({url:"/api/prod/shopactivity?activityid=".concat(this.activityId,"&returnNewUser=true")})},getStateDesc:function(t){var i="";switch(t){case 1:i="";break;case 2:i=this.$t("privilege.event_did_start");break;case 3:i=this.$t("privilege.activity_over");break;default:i=this.$t("privilege.activity_over");break}return i},hexToRgb:function(t){var i,e,a;return/^#/g.test(t)?(i=t.slice(1,3),e=t.slice(3,5),a=t.slice(5,7),{r:parseInt(i,16),g:parseInt(e,16),b:parseInt(a,16)}):{}},getPrivilegeInfo:function(){var i=this,e=t.parseLocator(window.location.search,"lower"),r=e.sectionid||"",s=e.activityid||"";if(this.status=e.status||1,r&&(this.sectionId=r),s&&(this.activityId=s),e.activityType&&(this.activityType=e.activityType),!s)return this.loading=!1,void(this.isActivityEmpty=!0);this.loading=!0,this.fetchPageData().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&e.unauthorized)return i.loading=!1,i.isActivityEmpty=!0,void a["a"].alert({message:i.$t("privilege.can_not_buy"),confirmButtonText:i.$t("privilege.home_page"),className:"privilege-page"}).then((function(){Object(u["b"])({linkType:999})}));if(e&&e.activityId){var r=e.designConfig||{};return i.bannerUrl=e.activityBanner||"",i.bgColor=r.backgroundColor||"#FE7E10",i.rgbObj=i.hexToRgb(r.backgroundColor||"#FE7E10"),i.activityStatus=e.activityStatus||"",t.setNavigationBarTitle({title:e.name||i.$t("privilege.new_exclusive")}),t.wxShare({title:e.name||""}),i.getPrivilegeList(i.pageIndex,e.activityType),void(i.loading=!1)}i.loading=!1,i.isActivityEmpty=!0,t.showToast({title:i.$t("privilege.failed_activity")})})).catch((function(e){i.loading=!1,i.isActivityEmpty=!0,t.showToast({title:e.msg||e.message||i.$t("privilege.failed_activity")})}))},getPrivilegeList:function(i){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,r={pageIndex:i,activityType:this.activityType||a,status:this.status};this.sectionId&&(r.sectionId=this.sectionId),this.activityId&&(r.activityId=this.activityId),this.isXhr=!0,t.request({url:"/api/prod/shoppanicbuylist",data:r}).then((function(t){e.isXhr=!1,t&&(e.pageIndex=i,e.prodList=1===i?t.productList||[]:e.prodList.concat(t.productList||[]),t.productList&&0!==t.productList.length||(e.isNoMore=!0))})).catch((function(i){t.showToast({title:i.msg||i.message})}))}}}}).call(this,e("7189")["default"])}});