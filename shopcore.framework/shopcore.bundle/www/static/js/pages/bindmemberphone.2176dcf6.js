(function(e){function t(t){for(var i,s,r=t[0],c=t[1],l=t[2],d=0,h=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={"pages/bindmemberphone":0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([10,"chunk-vendors","chunk-common"]),n()})({"01d2":function(e,t,n){"use strict";n("2966")},10:function(e,t,n){e.exports=n("c360")},2966:function(e,t,n){},a24f:function(e,t,n){"use strict";(function(e){n("be7f");var i=n("565f"),a=(n("38d5"),n("772a")),o=(n("ac1f"),n("841c"),n("b68d")),s=n("e8bf"),r=n("41c5"),c=n("0db1"),l=n("b0ab"),u=n("ed08");t["a"]={components:{"van-form":a["a"],"van-field":i["a"],countryDialog:s["a"],TCaptcha:c["a"]},mixins:[o["a"]],data:function(){return{pageStatus:0,bindPhoneForm:{mobile:"",verifyCode:"",mobileAreaCode:"86"},areaList:[],showAreaDialog:!1,areaInfo:{cnTitle:this.$t("contactus.china_mainland"),areaCode:"86"},isSending:!1,loading:!1,s:60}},computed:{notFilledButton:function(){return!(2!==this.pageStatus&&3!==this.pageStatus||this.bindPhoneForm.mobile&&this.bindPhoneForm.verifyCode)}},mounted:function(){var e=u["a"].parseLocator(window.location.search);this.initData(e)},methods:{initData:function(t){3==t.pageStatus?(this.pageStatus=3,e.setNavigationBarTitle({title:this.$t("bindmemberphone.binding_mobile")})):2==t.pageStatus&&(this.pageStatus=2,e.setNavigationBarTitle({title:this.$t("bindmemberphone.change_mobile")}))},toBindOtherInfo:function(){e.navigateTo({url:"/pages/memberperfectionown/main?pageStatus=".concat(this.pageStatus)})},toChangePhone:function(){this.pageStatus=2},submitBindPhone:function(){if(this.notFilledButton)return!1;2===this.pageStatus?this.changeBindMobile():3===this.pageStatus&&this.bindMobile()},changeBindMobile:function(){var t=this;e.request({method:"post",url:"/api/usercenter/changemobile",data:this.bindPhoneForm}).then((function(n){n.success?e.navigateTo({url:"/pages/memberperfectionown/main?pageStatus=".concat(t.pageStatus)}):e.showToast({title:t.$t("memberchangenumber.failed_mobile")})})).catch((function(n){e.showToast({title:n.msg||n.message||t.$t("memberchangenumber.failed_mobile")})}))},bindMobile:function(){var t=this;e.request({method:"post",url:"/api/usercenter/bindmobile",data:this.bindPhoneForm}).then((function(n){n.success?(n.accessToken&&e.auth.setValue("accessToken",n.accessToken),e.navigateTo({url:"/pages/memberperfectionown/main?pageStatus=".concat(t.pageStatus)})):e.showToast({title:t.$t("memberchangenumber.failed_mobile")})})).catch((function(n){e.showToast({title:n.msg||n.message||t.$t("memberchangenumber.failed_mobile")})}))},validate:function(){return!!this.bindPhoneForm.mobile||(l["a"].showToast({title:this.$t("platforms.enter_phone_number")}),!1)},handleSendSMS:function(t){var n=this;if(!this.loading){this.loading=!0,this.isSending=!0,this.getMemberCodeTime();var i="/api/usercenter/sqsendverifycode";r["a"].request({url:i,method:"post",data:{mobile:this.bindPhoneForm.mobile,mobileAreaCode:this.bindPhoneForm.mobileAreaCode,ticket:t.ticket,randstr:t.randstr,sourceType:t.sourceType}}).then((function(e){e.existUser;n.isSending=!0,n.getMemberCodeTime()})).catch((function(t){n.loading=!1,e.showToast({title:t.message||n.$t("bindmemberphone.verification_code_fill")})}))}},getMemberCodeTime:function(){var e=this,t=59;this.timer||(this.s=t,this.timer=setInterval((function(){e.s>0&&e.s<=t?e.s--:(e.s=59,e.isSending=!1,clearInterval(e.timer))}),1e3))},showAreaCodeDialog:function(){var t=this;this.areaList&&this.areaList.length>0?this.showAreaDialog=!0:e.request({url:"api/usercenter/arealist"}).then((function(e){t.areaList=e.countries,t.showAreaDialog=!0})).catch((function(n){e.showToast({title:n.message||t.$t("memberperfectionown.national_list_failed")})}))},selectArea:function(e){this.areaInfo=e,this.bindPhoneForm.mobileAreaCode=e.areaCode||"86"}}}}).call(this,n("7189")["default"])},c360:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("56d7"),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bind-page",style:e.pageThemeStyle},[2===e.pageStatus||3===e.pageStatus?t("div",{staticClass:"bind-info"},[t("div",{staticClass:"fection-form"},[t("van-form",[t("van-field",{staticClass:"region-phone",attrs:{"label-width":70,name:"phone",type:"tel",placeholder:e.$t("bindmemberphone.enter_phone_number")},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"region",on:{click:function(t){return t.stopPropagation(),e.showAreaCodeDialog.apply(null,arguments)}}},[t("div",{staticClass:"areaCode"},[e._v("+"+e._s(e.areaInfo.areaCode))]),t("img",{staticClass:"trip",attrs:{src:n("7338")}})])]},proxy:!0}],null,!1,1569428389),model:{value:e.bindPhoneForm.mobile,callback:function(t){e.$set(e.bindPhoneForm,"mobile",t)},expression:"bindPhoneForm.mobile"}}),t("van-field",{staticClass:"change-number-form",attrs:{maxLength:"6",clearable:"",label:e.$t("bindmemberphone.verification_code"),placeholder:e.$t("bindmemberphone.please_verification_code")},model:{value:e.bindPhoneForm.verifyCode,callback:function(t){e.$set(e.bindPhoneForm,"verifyCode",t)},expression:"bindPhoneForm.verifyCode"}},[t("template",{slot:"button"},[e.isSending?t("div",{staticClass:"action-sms action-sms--disabled"},[e._v(e._s(e.$t("bindmemberphone.re_acquire",[e.s])))]):t("TCaptcha",{attrs:{loading:e.loading,validate:e.validate},on:{handleSendSMS:e.handleSendSMS}},[t("div",{staticClass:"action-sms"},[e._v(e._s(e.$t("bindmemberphone.get_verification_code")))])])],1)],2)],1)],1),t("div",{staticClass:"options"},[2===e.pageStatus?t("div",{class:["submit",{"submit--not":e.notFilledButton}],on:{click:e.submitBindPhone}},[e._v(e._s(e.$t("bindmemberphone.confirm_changes")))]):3===e.pageStatus?t("div",{class:["submit",{"submit--not":e.notFilledButton}],on:{click:e.submitBindPhone}},[e._v(e._s(e.$t("bindmemberphone.binding")))]):e._e()])]):e._e(),t("countryDialog",{attrs:{title:e.$t("contactus.select_code"),areaList:e.areaList,countryInfo:e.areaInfo},on:{selectCountry:e.selectArea},model:{value:e.showAreaDialog,callback:function(t){e.showAreaDialog=t},expression:"showAreaDialog"}})],1)},o=[],s=n("a24f"),r=s["a"],c=(n("d007"),n("01d2"),n("2877")),l=Object(c["a"])(r,a,o,!1,null,"512502f6",null),u=l.exports;n.p=publicPath,Object(i["a"])(u)},d007:function(e,t,n){"use strict";n("d732")},d732:function(e,t,n){}});