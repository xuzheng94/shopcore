(function(e){function n(n){for(var r,a,d=n[0],s=n[1],c=n[2],m=0,f=[];m<d.length;m++)a=d[m],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(n);while(f.length)f.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,d=1;d<t.length;d++){var s=t[d];0!==o[s]&&(r=!1)}r&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var r={},o={"pages/memberperfectionown":0},i=[];function a(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(){return Promise.resolve()},a.m=e,a.c=r,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)a.d(t,r,function(n){return e[n]}.bind(null,r));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],s=d.push.bind(d);d.push=n,d=d.slice();for(var c=0;c<d.length;c++)n(d[c]);var u=s;i.push([76,"chunk-vendors","chunk-common"]),t()})({"0d00":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("56d7"),o=function(){var e=this,n=e._self._c;return n("div",{staticClass:"member-center",style:e.pageThemeStyle},[e.showPage?n("div",{staticClass:"fection-form"},[n("van-form",[n("div",{staticClass:"phone-container"},[n("div",{staticClass:"phone__text"},[e._v(e._s(e.$t("memberperfectionown.phone_number")))]),n("div",{staticClass:"phone__number"},[e._v(e._s(e.bindInfoForm.phoneNumber))])]),e.needBindInfo.needCountry?n("van-field",{attrs:{"label-width":70,name:"name",readonly:!0,label:e.$t("memberperfectionown.country"),placeholder:e.$t("memberperfectionown.country")},on:{click:e.chooseCountryList},model:{value:e.countryInfo.countryname,callback:function(n){e.$set(e.countryInfo,"countryname",n)},expression:"countryInfo.countryname"}}):e._e(),e.needBindInfo.needIdNumber?n("van-field",{attrs:{"label-width":70,name:"name",label:e.$t("memberperfectionown.identity_card"),placeholder:e.$t("memberperfectionown.identity_card")},on:{input:e.idCardChange},model:{value:e.bindInfoForm.idNumber,callback:function(n){e.$set(e.bindInfoForm,"idNumber",n)},expression:"bindInfoForm.idNumber"}}):e._e(),e.needBindInfo.needBirthday?n("van-field",{attrs:{"label-width":70,name:"name",readonly:!0,label:e.$t("memberperfectionown.birthday"),placeholder:e.$t("memberperfectionown.birthday")},on:{click:e.chooseBirthday},model:{value:e.bindInfoForm.birthday,callback:function(n){e.$set(e.bindInfoForm,"birthday",n)},expression:"bindInfoForm.birthday"}}):e._e(),e.needBindInfo.needRealName?n("van-field",{attrs:{"label-width":70,name:"name",label:e.$t("memberperfectionown.name"),placeholder:e.$t("memberperfectionown.name")},model:{value:e.bindInfoForm.realName,callback:function(n){e.$set(e.bindInfoForm,"realName",n)},expression:"bindInfoForm.realName"}}):e._e()],1),n("div",{class:["submit",{"submit--not":e.notFilledButton}],on:{click:e.submitBindMemberInfo}},[e._v(" "+e._s(e.$t("memberperfectionown.binding_membership_card"))+" ")])],1):n("loading-line"),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showBirthdayPicker,callback:function(n){e.showBirthdayPicker=n},expression:"showBirthdayPicker"}},[n("van-datetime-picker",{attrs:{type:"date","min-date":e.birthdayForm.minDate,"max-date":e.birthdayForm.maxDate,formatter:e.formatter,"columns-order":e.birthdayForm.sortDateList},on:{confirm:e.onBirthdayConfirm,cancel:function(n){e.showBirthdayPicker=!1}},model:{value:e.birthdayForm.currentDate,callback:function(n){e.$set(e.birthdayForm,"currentDate",n)},expression:"birthdayForm.currentDate"}})],1)],1)},i=[],a=t("4a9e"),d=a["a"],s=(t("b27b"),t("a4b6"),t("2877")),c=Object(s["a"])(d,o,i,!1,null,"7536726b",null),u=c.exports;t.p=publicPath,Object(r["a"])(u)},"4a9e":function(e,n,t){"use strict";(function(e){t("8a58");var r=t("e41f"),o=(t("d1cf"),t("ee83")),i=(t("be7f"),t("565f")),a=(t("38d5"),t("772a")),d=(t("ac1f"),t("841c"),t("a9e3"),t("d3b7"),t("25f0"),t("4d63"),t("c607"),t("2c3e"),t("5319"),t("4d90"),t("44e4")),s=t("b68d"),c=t("752d"),u=t("ed08");n["a"]={name:"Index",components:{loadingLine:d["a"],"van-form":a["a"],"van-field":i["a"],"van-datetime-picker":o["a"],"van-popup":r["a"]},mixins:[s["a"]],data:function(){return{pageStatus:0,showPage:!1,needBindInfo:{needIdNumber:!0,needRealName:!0,needBirthday:!0,needCountry:!0},bindInfoForm:{phoneNumber:"",idNumber:"",realName:"",birthday:"",country:""},countryInfo:{},showBirthdayPicker:!1,birthdayForm:{currentDate:new Date(1980,0,1),minDate:new Date(1900,0,1),maxDate:new Date,sortDateList:["year","month","day"]}}},computed:{notFilledButton:function(){return!(!this.needBindInfo.needIdNumber||this.bindInfoForm.idNumber)||(!(!this.needBindInfo.needRealName||this.bindInfoForm.realName)||(!(!this.needBindInfo.needBirthday||this.bindInfoForm.birthday)||!(!this.needBindInfo.needCountry||this.countryInfo.countryname)))}},mounted:function(){var n=u["a"].parseLocator(window.location.search);this.pageStatus=Number(n.pageStatus),this.countryInfo=e.getStorageSync("countryInfo")||{},this.getNeedBindInfo(),e.setNavigationBarTitle({title:this.$t("memberperfectionown.improve_member_information")})},methods:{getNeedBindInfo:function(){var n=this;e.onShow((function(){n.countryInfo=e.getStorageSync("countryInfo")||{}})),e.request({url:"/api/usercenter/getselfmemberbindform",method:"get"}).then((function(e){n.needBindInfo.needIdNumber=e.needIdNumber||!1,n.needBindInfo.needRealName=e.needRealName||!1,n.needBindInfo.needBirthday=e.needBirthday||!1,n.needBindInfo.needCountry=e.needCountry||!1,e.needIdNumber||e.needRealName||e.needBirthday||e.needCountry?n.showPage=!0:n.submitBindMemberInfo()})).catch((function(t){n.showPage=!0,e.showToast({title:t.msg||t.message})})),e.request({url:"/api/usercenter/sqmobile",method:"get"}).then((function(t){t.errorMsg&&e.showToast({title:t.errorMsg||n.$t("memberperfection.failed_phone"),icon:"none",className:"member-error-msg"}),n.bindInfoForm.phoneNumber=t.mobile||""}))},submitBindMemberInfo:function(){var n=this;this.notFilledButton||(this.needBindInfo.needCountry&&(this.bindInfoForm.country=this.countryInfo.countryname),this.needBindInfo.needBirthday?this.bindInfoForm.birthday+=" 00:00:00":this.bindInfoForm.birthday="",e.request({url:"/api/usercenter/bindselfmember",method:"post",data:this.bindInfoForm}).then((function(t){if(!t.success)return e.showToast({title:n.$t("memberperfectionown.binding_error")});var r=2;2===n.pageStatus&&(r=3),e.showToast({title:n.$t("memberperfectionown.binding_success")}),e.navigateBack({delta:r})})).catch((function(t){n.showPage=!0,e.showToast({title:t.msg||t.message})})))},idCardChange:function(e){this.bindInfoForm.birthday=this.getBirthday(e)||""},getBirthday:function(e){var n,t;if(18===e.length)n=e.substring(6,14);else{if(15!==e.length)return"";t=e.substring(6,12),n="19"+t}return n.substring(0,4)+"-"+n.substring(4,6)+"-"+n.substring(6,8)},chooseBirthday:function(){this.showBirthdayPicker=!0},onBirthdayConfirm:function(e){this.bindInfoForm.birthday=this.dateFormat("YYYY-mm-dd",e),this.showBirthdayPicker=!1},dateFormat:function(e,n){var t,r={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()};for(var o in r)t=new RegExp("("+o+")").exec(e),t&&(e=e.replace(t[1],1===t[1].length?r[o]:r[o].padStart(t[1].length,"0")));return e},formatter:function(e,n){var t=c["a"].getLocale();return"year"===e?this.$t("memberperfectionown.year",[n]):"month"===e?"en"===t?this.getMonthEn(Number(n)):this.$t("memberperfectionown.month",[n]):this.$t("memberperfectionown.day",[n])},getMonthEn:function(e){var n={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};return n[e]},chooseCountryList:function(){e.navigateTo({url:"/pages/countrylist/main?notshowtip=true"})}}}}).call(this,t("7189")["default"])},"52ee":function(e,n,t){},"6a27":function(e,n,t){},76:function(e,n,t){e.exports=t("0d00")},a4b6:function(e,n,t){"use strict";t("52ee")},b27b:function(e,n,t){"use strict";t("6a27")}});