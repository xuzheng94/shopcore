(function(a){function e(e){for(var d,r,o=e[0],n=e[1],c=e[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(t,r)&&t[r]&&h.push(t[r][0]),t[r]=0;for(d in n)Object.prototype.hasOwnProperty.call(n,d)&&(a[d]=n[d]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var a,e=0;e<i.length;e++){for(var s=i[e],d=!0,o=1;o<s.length;o++){var n=s[o];0!==t[n]&&(d=!1)}d&&(i.splice(e--,1),a=r(r.s=s[0]))}return a}var d={},t={"pages/addaddress":0},i=[];function r(e){if(d[e])return d[e].exports;var s=d[e]={i:e,l:!1,exports:{}};return a[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=a,r.c=d,r.d=function(a,e,s){r.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:s})},r.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,e){if(1&e&&(a=r(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var d in a)r.d(s,d,function(e){return a[e]}.bind(null,d));return s},r.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return r.d(e,"a",e),e},r.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=n;i.push([0,"chunk-vendors","chunk-common"]),s()})({0:function(a,e,s){a.exports=s("2100")},"0ae3":function(a,e,s){},1959:function(a,e,s){"use strict";e["a"]={addAdrApi:"/api/usercenter/address",editAdrlistApi:"/api/usercenter/editaddress",addressInfosApi:"/api/usercenter/addressinfo",sqidentifyaddressApi:"/api/usercenter/sqidentifyaddress"}},2100:function(a,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("de6a");var d=s("56d7"),t=function(){var a=this,e=a._self._c;return e("div",{staticClass:"add-address-page",style:a.pageThemeStyle},[a._e(),e("div",{staticClass:"container"},[e("div",{staticClass:"item"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.receiver")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.addressData.addressee,expression:"addressData.addressee"}],staticClass:"item-right",attrs:{type:"text",placeholder:a.$t("addaddress.please_use_real_name")},domProps:{value:a.addressData.addressee},on:{input:function(e){e.target.composing||a.$set(a.addressData,"addressee",e.target.value)}}})]),e("div",{staticClass:"line"}),e("div",{staticClass:"item"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.mobile_phone_number")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.addressData.phone,expression:"addressData.phone"}],staticClass:"item-right",attrs:{placeholder:a.$t("addaddress.please_fill_out"),type:"text"},domProps:{value:a.addressData.phone},on:{input:function(e){e.target.composing||a.$set(a.addressData,"phone",e.target.value)}}})]),a.hasIdCardAddByCopy?e("div",{staticClass:"line"}):a._e(),a.hasIdCardAddByCopy?e("div",{staticClass:"item"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.id_number")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.addressData.idCardNo,expression:"addressData.idCardNo"}],staticClass:"item-right",attrs:{type:"text",placeholder:a.$t("addaddress.please_fill_out")},domProps:{value:a.addressData.idCardNo},on:{input:function(e){e.target.composing||a.$set(a.addressData,"idCardNo",e.target.value)}}})]):a._e(),e("div",{staticClass:"line"}),e("div",{staticClass:"item"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.province_city_district")))]),e("p",{class:["item-right area-picker",{"area-picker-active":!!a.addressData.area}],on:{click:function(e){return a.showAreaPop(!0)}}},[a._v(" "+a._s(a.addressData.area||a.$t("addaddress.please_choose"))+" ")]),e("van-popup",{staticClass:"item-right",attrs:{position:"bottom"},model:{value:a.showPopup,callback:function(e){a.showPopup=e},expression:"showPopup"}},[e("van-picker",{attrs:{columns:a.columns,"show-toolbar":""},on:{change:a.onChange,confirm:a.addressSelected,cancel:function(e){return a.showAreaPop(!1)}}})],1),a.isWechat?e("div",{staticClass:"location-container",on:{click:a.locationTap}},[e("img",{staticClass:"location-icon",attrs:{src:s("8d10")}})]):a._e()],1),a.showPostCode?e("div",{staticClass:"line"}):a._e(),a.showPostCode?e("div",{staticClass:"item"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.post_code")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.addressData.postCode,expression:"addressData.postCode"}],staticClass:"item-right",attrs:{type:"text",placeholder:a.$t("addaddress.please_fill_out")},domProps:{value:a.addressData.postCode},on:{input:function(e){e.target.composing||a.$set(a.addressData,"postCode",e.target.value)}}})]):a._e(),e("div",{staticClass:"line"}),e("div",{staticClass:"item detail"},[e("span",{staticClass:"item-label"},[a._v(a._s(a.$t("addaddress.address")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.addressData.detailAddress,expression:"addressData.detailAddress"}],staticClass:"item-right",attrs:{placeholder:a.$t("addaddress.please_address")},domProps:{value:a.addressData.detailAddress},on:{input:function(e){e.target.composing||a.$set(a.addressData,"detailAddress",e.target.value)}}})]),e("div",{staticClass:"line"})]),a.editPage?a._e():e("div",[a.isZn?e("div",{staticClass:"copy-add-box"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.copyAdd,expression:"copyAdd"}],staticClass:"copy-add-msg",attrs:{placeholder:a.$t("addaddress.paste_text_automatically")},domProps:{value:a.copyAdd},on:{input:function(e){e.target.composing||(a.copyAdd=e.target.value)}}}),a.copyAdd?e("img",{staticClass:"del",attrs:{src:s("4a10"),alt:""},on:{click:function(e){a.copyAdd=""}}}):a._e(),e("div",{staticClass:"bottom-btn"},[e("span",{staticClass:"go-cancel",on:{click:function(e){a.isZn=!1}}},[a._v(a._s(a.$t("common.cancel")))]),e("span",{staticClass:"go-confirm",on:{click:a.getAddBycopy}},[a._v(a._s(a.$t("addaddress.identify")))])])]):e("div",{staticClass:"arrow-zn-box",on:{click:function(e){a.isZn=!0}}},[e("span",[a._v(a._s(a.$t("addaddress.intelligent_recognition")))]),e("img",{attrs:{src:s("34a2"),alt:""}})])]),a.isGuideSellerApp?a._e():e("div",{staticClass:"default"},[e("span",{staticClass:"default-label"},[a._v(a._s(a.$t("addaddress.set_default_address")))]),e("van-switch",{staticClass:"default-switch",attrs:{size:"26px","active-color":"var(--main-color, #f23340)"},model:{value:a.addressData.isDefault,callback:function(e){a.$set(a.addressData,"isDefault",e)},expression:"addressData.isDefault"}})],1),e("div",{staticClass:"bottom-button"},[e("p",{staticClass:"save",on:{click:a.saveTap}},[a._v(a._s(a.$t("common.save")))])]),e("address-dialog",{attrs:{addressObj:a.addressEditObj,showAddressDialog:a.showEditAddress,surroundings:"editAddress"},on:{close:a.closeEdit,confirm:a.confirmEdit}})],1)},i=[],r=s("8fe3"),o=r["a"],n=(s("f07a"),s("fc8b"),s("2877")),c=Object(n["a"])(o,t,i,!1,null,"584214f8",null),l=c.exports;s.p=publicPath,Object(d["a"])(l)},"4a10":function(a,e){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAkFBMVEUAAADb29vU1NTFxcXR0dHIyMjT09PKysrU1NTMzMzOzs7Q0NDMzMzMzMzMzMzOzs7Nzc3Nzc3MzMzMzMzOzs7MzMzNzc3Nzc3Nzc3MzMzNzc3Nzc3MzMzMzMzMzMzMzMzMzMzMzMzNzc3Nzc3Nzc3MzMzMzMzNzc3MzMzMzMzMzMzMzMzNzc3MzMzNzc3MzMwmBBPPAAAAL3RSTlMABwwWFhcXGBgZGhsjLTxDV2xzg4eIiZmam6OntbnHyNTV1dbX2Nna2+Lq9Pj5+QxSJ1cAAAD3SURBVDjLjZPreoIwDIYDTnETXT1AxQOdh00pjNz/3YlYSgPlqd+vkO8tbdMEQMtnXMiikIIzH/oKkxy18m3Ysb2oRKIy8kw/SLGnNGj9eYYWZXO93upXhPqHl+KA0tc5IhxUVN+vHAbK520T9fG/uWljd1RBUtWvqc8ZgosK1/DdVMwHppfFMDkrf3Zvkgw4GsT4VPtf7WYcBJrEx8/T/2tTAiQSYrSEz18jI6FASlAfiz4wvVKgs8V0RQnZOWRlxoQQ9Jq1RQhOCqUMk2BmqXU6hkVbautj7Q8q2L7z3M6Gcbecs2ndbe8eHPfo9YY3CS3zbR//Bzpbh1xl4WvpAAAAAElFTkSuQmCC"},"77f9":function(a,e,s){},"8d10":function(a,e){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAACPVBMVEUAAAAAAP8A//8AgP8AVf8AgP8AZv8zZv8AgP8kbf8ccf8aZv8agP8XdP8Vav8VgP8Udv8SgP8id/8QgP8ggP8ccf8cgP8ac/8Yef8XdP8Vdf8Uev8fev8ddv8ce/8bdv8ae/8ad/8Zc/8YeP8WeP8bef8adv8aef8Zdv8cdP8cev8aeP8ZeP8Zdv8Ydv8cdv8bdv8bdP8ad/8Zd/8ceP8beP8bev8aeP8adv8aeP8Zd/8ZeP8Ydf8Yef8cef8bd/8Zdv8Zef8cdv8ZeP8ceP8bd/8aeP8Zd/8bdv8Yd/8bdv8bef8ZeP8Zd/8bd/8adv8ad/8ad/8Zdv8beP8ad/8ad/8aeP8ad/8Zdv8Zd/8Zdv8Zd/8bdv8aeP8Zd/8ad/8adv8aeP8adv8aeP8Zd/8Zd/8bd/8Zd/8bd/8beP8adv8aeP8ad/8aeP8ad/8Zdv8ad/8ad/8ad/8Zd/8beP8bd/8aeP8ad/8aeP8adv8Zd/8Zd/8ad/8aeP8ad/8ad/8Zdv8ZeP8aeP8ad/8ad/8ad/8ad/8ad/8aeP8bd/8Zd/8bd/8ad/8ad/8ad/8ad/8ad/8adv8Zd/8ad/8ad/8ad/8ad/8Zd/8bd/8adv8aeP8ad/8adv8aeP8ad/8aeP8bd/8adv8ad/8ad/8adv8ad/8ad/8adv8ad/8ad/8ad/8ad/8ZeP8Zd/8ad/8ad/8ad/8ad/8ad/8adv8ad/8ad/8ad/8Zd/8Zdv8Zd/8ad/8ad/8adv8ad/8ad/+cOJhNAAAAvnRSTlMAAQECAwQFBQYHCQoKCwwMDQ4PEBASEhQVFhgZGRobHB0eHyAiJicoKS4uMTM0NjY4OTw+QEJDREVGR0hKSkpLUlJSU1NWWVxdXl9fZGVpamttcHN0dnd4eXp7fH2Cg4eIiIqMjY6PkJCQkZOUlZaXmp2eoaKjpKeoqqusrrGytLW1t7i5ury+xMfJysvMzs/Q0dLV1tfc3d3g4OHi4uPk5unp6uvr7O3t7u/w8fLy8/T19/j4+fr7/Pz8/f7+PmyA4gAAAh5JREFUGBm9wflfiwEAx/HvjAkhZ24xCSWR+8wVEkKO0CL3fcsRc0WEiKIkRIQoHUT2+ds8z/ayPZtVP/F+659zJKZlbt+wOFYdsi241IBP1d7xaldyMRY/z41QWDbXLwwVebnZh659wVA7U2FE5gPNB+Ll1WNhAfA9Q3+x5QNupwLmPAfPKoVygSfHLquhhdCYpGDJvyBHISIfQHmkghSD265QMW9hh6zmQ7NTPs6UlckO+WTA+16yuAgH5TXptgeo3WSXyfEUUhXgaIB4meZ+xedKN5lckKeARKiQafQnaLl6+hmQI9NkqFJAGuTJdBwqJkqO/dA0TAZ7I54o+WVCrkxvYI4M9ruQLlMZjJPfNnDJMBA+ymsz5Mr0BOLktw6OyNAPPneRKQt2yvQKhslvKVyX6SWkyOAogTQZon7wrbv8xsKHrjLsgerpUtRZqB8swyy4L4sXME+GIa+h7d6Nd8BWmU7AQVnsArdMSe/xOWWTIboOpsgi9gfMlMl5vgUoWy2vo/BIQU5CzQR59Z82N04+az2wSEFGVkNljIIt/wmXFSKhDkqjZTW7Be70VqgZTVDURwGJ9fB4kP62rBUKIvTHhBooH6Vw1njggl0+YyqhOlbhZQHH5BVdCnUJas8+IFuGvkXQOEPtsp0B1ksRt6B1iTrQzQ1tqfaL4ElXh3oWQstNYIs6MaAE0251avhD8By2qXOOFRun6n/4DdH2CRnb2mOhAAAAAElFTkSuQmCC"},"8fe3":function(a,e,s){"use strict";(function(a){var d=s("5530"),t=(s("8a58"),s("e41f")),i=(s("66b9"),s("b650")),r=(s("5f5f"),s("f253")),o=(s("b000"),s("1a23")),n=(s("d3b7"),s("4de4"),s("a15b"),s("159b"),s("b0c0"),s("99af"),s("e9c4"),s("5138")),c=s("191e"),l=s("b286"),u=s("1959"),h=s("d63d"),p=s("ed08"),f=s("b68d"),v=s("2a83");e["a"]={components:{"van-switch":o["a"],"van-picker":r["a"],"van-button":i["a"],"van-popup":t["a"],notice:l["a"],AddressDialog:v["a"]},mixins:[c["a"],n["a"],f["a"]],data:function(){return{isGuideSellerApp:a.isGuideSellerApp,showPopup:!1,tipsHidden:!0,columns:[],bh_addressData:[],addressData:{},isXhr:!1,copyAdd:"",isZn:!1,isWechat:!0,editPage:!1,hasIdCardAddByCopy:!1,showPostCode:!1,addressOrderId:"",addressEditObj:{},showEditAddress:!1}},mounted:function(){var e=this;this.isWechat=a.isWechat;var s=this.$t("addaddress.new_shipping_address"),d=a.getQuery(),t=null;if(a.isGuideSellerApp)t=h["a"].getGuideAddress(),t&&t.addressId&&"undefined"!==t.addressId&&(this.getAddDetail(t.addressId),s=this.$t("addaddress.edit_receipt_address"),this.editPage=!0);else{try{t=JSON.parse(decodeURIComponent(a.getStorageSync("editAddressData")||""))}catch(i){console.log(i)}t&&1==t.isEdit&&(this.getAddDetail(t.addressId),a.setStorageSync("editAddressData",""),"undefined"!==t.addressId&&(s=this.$t("addaddress.edit_receipt_address"),this.editPage=!0))}d&&d.backOrder&&(this.backOrder=1==d.backOrder),d&&d.addressOrderId&&(this.addressOrderId=d.addressOrderId),a.setNavigationBarTitle({title:s}),h["a"].getAddressLibrary((function(a){e.setupAddressList(a)}))},methods:{fetchAddByCopy:function(){var e=this;a.showLoading({title:this.$t("addaddress.medium")}),a.request({url:u["a"].sqidentifyaddressApi,method:"POST",data:{content:this.copyAdd}}).then((function(s){a.hideLoading();var t=["addressee","city","county","detailAddress","idCardNo","phone","province"];if(s&&!t.every((function(a){return!s[a]}))){var i=s.province,r=void 0===i?"":i,o=s.city,n=void 0===o?"":o,c=s.county,l=void 0===c?"":c,u=Object(d["a"])({},s),h=[r,n,l],p=h.filter((function(a){return!!a}));u.area=p.join(","),e.addressData=u,u.idCardNo&&(e.hasIdCardAddByCopy=!0),e.checkPostCode()}else a.showModal({content:e.$t("addaddress.unable_identify"),confirmText:e.$t("common.confirm"),showCancel:!1,success:function(){a.hideLoading()}})})).catch((function(e){a.hideLoading(),a.showToast({title:e.message||e.msg||""})}))},getAddBycopy:function(){this.copyAdd&&this.fetchAddByCopy()},getAddDetail:function(e){var s=this;e&&(a.showLoading({title:this.$t("common.loading",["..."])}),a.request({url:"/api/usercenter/address?addressId=".concat(e),method:"get"}).then((function(e){a.hideLoading(),s.addressData=e,s.checkPostCode()})).catch((function(e){a.hideLoading(),a.showToast({title:e.message||e.msg||""})})))},showAreaPop:function(a){this.showPopup=a},setupAddressList:function(a){this.bh_addressData=a.list;var e=[],s=[],d=[],t=[];if(a.list.forEach((function(a){s.push(a.name)})),!h["a"].isBlank(a.list)&&!h["a"].isBlank(a.list[0].children)){var i=a.list[0].children;if(i.forEach((function(a){d.push(a.name)})),!h["a"].isBlank(i)){var r=i[0].children;r.forEach((function(a){t.push(a.name)}))}}e.push({values:s}),e.push({values:d}),e.push({values:t}),this.columns=e},onChange:function(a,e,s){var d=a.getColumnIndex(0),t=[],i=[],r=[];switch(h["a"].isBlank(this.bh_addressData)||h["a"].isBlank(this.bh_addressData[d].children)||(r=this.bh_addressData[d].children,r.forEach((function(a){t.push(a.name)}))),s){case 0:if(!h["a"].isBlank(r)){var o=r[0].children;o.forEach((function(a){i.push(a.name)}))}a.setColumnValues(1,t),a.setColumnValues(2,i);break;case 1:if(!h["a"].isBlank(r)){var n=r[a.getColumnIndex(1)].children;n.forEach((function(a){i.push(a.name)}))}a.setColumnValues(2,i);break;default:break}},addressSelected:function(a,e){this.addressData.area=a.join(","),this.showPopup=!1,this.checkPostCode()},locationTap:function(){var e=this;wx.getLocation({type:"wgs84",success:function(s){a.showLoading({title:e.$t("addaddress.positioning")}),e.getLocationCityInfo(s.latitude,s.longitude)}})},getLocationCityInfo:function(e,s){var d=this;p["a"].isProd?a.request({url:"/shop/api/getLocationInfo?location=".concat(e,",").concat(s),data:{}}).then((function(e){a.hideLoading(),h["a"].getAddressLibrary((function(a){var s=e.result.address_component,t=s.province,i=s.city,r=s.district,o=h["a"].isMatch(a,t,i,r);o&&(d.$set(d.addressData,"area","".concat(t,",").concat(i,",").concat(r)),d.checkPostCode())}))})).catch((function(e){a.hideLoading(),a.showToast({title:e.message||d.$t("addaddress.positioning_choose_manually")})})):a.hideLoading()},closeTipTap:function(){this.tipsHidden=!1},saveTap:function(){var e=this;if(h["a"].isBlank(this.addressData.addressee))a.showToast({title:this.$t("addaddress.onsignee_empty")});else if(h["a"].isBlank(this.addressData.phone))a.showToast({title:this.$t("addaddress.phone_number_blank")});else if(h["a"].isBlank(this.addressData.area))a.showToast({title:this.$t("addaddress.provincial_empty")});else if(h["a"].isBlank(this.addressData.detailAddress))a.showToast({title:this.$t("addaddress.detailed_address_empty")});else{if(!this.showPostCode||!h["a"].isBlank(this.addressData.postCode))return this.addressOrderId&&!this.addressEditObj.addressee?(this.showEditAddress=!0,void(this.addressEditObj=this.addressData)):void(this.isXhr||(this.isXhr=!0,a.showLoading({title:this.$t("addaddress.saving")}),a.request({url:this.addressData.addressId?u["a"].editAdrlistApi:u["a"].addAdrApi,method:"POST",data:this.addressData}).then((function(s){if(e.isXhr=!1,a.hideLoading(),a.isGuideSellerApp){var t=Object(d["a"])(Object(d["a"])({},e.addressData),{},{addressId:s.addressId,isAddressChange:!1});h["a"].setGuideAddress(t),a.navigateBack({delta:1})}else{if(e.backOrder){var i=Object(d["a"])(Object(d["a"])({},e.addressData),{},{addressId:s.addressId,isAddressChange:!1});return e.addressOrderId&&(i.addressOrderId=e.addressOrderId),h["a"].setSelectAdrItem(JSON.stringify(i)),void a.navigateBack({delta:2})}a.navigateBack({delta:1})}})).catch((function(s){e.isXhr=!1,a.hideLoading(),a.showToast({title:s.message||s.msg||""})}))));a.showToast({title:this.$t("addaddress.zip_code_empty")})}},checkPostCode:function(){var a=this.addressData.area;this.showPostCode=a&&a.indexOf("欧洲")>=0},confirmEdit:function(){this.showEditAddress=!1,this.saveTap()},closeEdit:function(){this.showEditAddress=!1,this.addressEditObj={}}}}}).call(this,s("7189")["default"])},f07a:function(a,e,s){"use strict";s("0ae3")},fc8b:function(a,e,s){"use strict";s("77f9")}});