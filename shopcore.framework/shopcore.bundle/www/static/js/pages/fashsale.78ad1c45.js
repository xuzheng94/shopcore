(function(t){function e(e){for(var a,r,o=e[0],c=e[1],d=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},s={"pages/fashsale":0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(){return Promise.resolve()},r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;n.push([46,"chunk-vendors","chunk-common"]),i()})({"2cbe":function(t,e,i){},"3acb":function(t,e,i){"use strict";i("2cbe")},4006:function(t,e,i){"use strict";(function(t){var a=i("5530"),s=i("2909"),n=(i("ab71"),i("58e6")),r=(i("ac1f"),i("841c"),i("d3b7"),i("159b"),i("a9e3"),i("c740"),i("99af"),i("d81d"),i("b68d")),o=i("603c"),c=i("191e"),d=i("db9a"),l=i("44e4"),u=i("b00c"),p=i("c08d"),h=i("ed08"),f=t.parseLocator(window.location.search,"lower");function m(t,e){var i=[],a={};return t&&t.length&&t.forEach((function(t){var s=e(t);s&&a[s]||(i.push(t),a[s]=!0)})),i}e["a"]={components:{fashsaleList:d["a"],loadingLine:l["a"],"van-pull-refresh":n["a"],pullRefreshLoading:p["a"]},mixins:[o["a"],c["a"],r["a"]],data:function(){return{sectionId:f.sectionid||"",sectionName:"",activityType:Number(f.activitytype)||u["a"].FASHSALE,currentStatus:Number(f.type)||u["b"].ACTIVE,currentActivityId:Number(f.activityid)||"",pageIndex:0,tabLoading:!1,loading:!1,loadMore:!0,tabs:[],prodList:[],brandId:Number(f.brandid)||"",isRefreshLoading:!1,showPage:!1}},onReachBottom:function(){this.fetchList()},created:function(){var e=this;t.onShow((function(){e.sendYlogShow()}))},mounted:function(){this.init()},beforeDestory:function(){clearInterval(this.timer)},computed:{isShowTabs:function(){return this.tabs&&this.tabs.length>1}},methods:{pullRefresh:function(){this.pageIndex=1,t.showLoading(),this.init()},init:function(){this.fetchTabs(),this.countdown()},initShare:function(e){var i=this.$t("fashsale.limited_snapped_up"),a=this.$t("fashsale.today_limited_time"),s="/shopsqm/static/images/fashsale.png";if(this.activityType===u["a"].SECKILL&&(i=this.$t("fashsale.special_spike"),a=this.$t("fashsale.special_spike"),s="/shopsqm/static/images/seckill.png"),f.title){var n=decodeURIComponent(f.title);i=n,a=n}e&&(i=e,a=e),t.setNavigationBarTitle({title:i}),t.wxShare({title:a,imgUrl:t.createUrl({type:"s1",path:s}),ylog:t.ylog&&t.ylog.customParams||{}})},fetchTabs:function(){var e=this;this.tabLoading=!0;var i={activityType:this.activityType};this.sectionId&&(i.sectionId=this.sectionId),this.brandId&&(i.brandId=this.brandId),t.request({url:"/api/prod/shoppanicbuycount",data:i}).then((function(t){if(e.tabLoading=!1,e.isRefreshLoading=!1,e.sectionName=t.sectionName,e.initShare(t.sectionName),t&&t.tabList&&t.tabList.length){e.tabs=t.tabList;var i=e.tabs.findIndex(e.isSelected);i=i>-1?i:0,e.currentStatus=e.tabs[i].status,e.currentActivityId=e.tabs[i].activityId,e.pageIndex=0,e.loadMore=!0,e.fetchList(),e.showPage=!0}})).catch((function(){e.tabLoading=!1,e.showPage=!0,e.isRefreshLoading=!1}))},fetchList:function(){var e=this;if(!this.loading&&this.loadMore){var i={activityType:this.activityType,pageIndex:this.pageIndex+1,status:this.currentStatus,activityId:this.currentActivityId};this.sectionId&&(i.sectionId=this.sectionId),this.brandId&&(i.brandId=this.brandId),this.loading=!0,t.request({url:"/api/prod/shoppanicbuylist",data:i}).then((function(a){if(e.loading=!1,t.hideLoading(),e.isRefreshLoading=!1,e.pageIndex=i.pageIndex,1===i.pageIndex){if(e.prodList=a.productList||[],f.hostver&&e.prodList.length>0){var n=e.prodList[0].activityId,r=t.ylog.customParams.url;r=h["a"].delParam(r,["sectionid"]),r=h["a"].addOrReplaceUrlParams(r,{activityid:n}),t.ylog.customParams.url=r,e.initShare(e.sectionName),e.sendYlogShow()}}else a.productList&&a.productList.length>0?e.prodList=m([].concat(Object(s["a"])(e.prodList),Object(s["a"])(a.productList)),(function(t){return"".concat(t.activityId).concat(t.id)})):e.loadMore=!1;e.brandId&&e.prodList.length<6&&e.fetchList()})).catch((function(){e.loading=!1,t.hideLoading(),e.isRefreshLoading=!1}))}},isSelected:function(t){return t.activityId?t.status===this.currentStatus&&t.activityId===this.currentActivityId:t.status===this.currentStatus},getDelaySeconds:function(){var t=(new Date).getTime(),e=1;return this.checkTime&&(e=Math.floor((t-this.checkTime+50)/1e3)),this.checkTime=t,e},countdown:function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){var e=t.getDelaySeconds();if((t.currentStatus===u["b"].ACTIVE||t.currentStatus===u["b"].WILL)&&t.prodList){var i=!1;t.prodList=t.prodList.map((function(t){if(t.timestamp>0){var s=t.timestamp-e;return s<=0&&(i=!0),Object(a["a"])(Object(a["a"])({},t),{},{timestamp:s})}return t})),i&&window.location.reload(1)}}),1e3)},switchTab:function(t){var e=t.status,i=t.activityId;e===this.currentStatus&&i===this.currentActivityId||this.loading||(document.documentElement.scrollTop=document.body.scrollTop=0,this.currentStatus=e,this.currentActivityId=i,this.pageIndex=0,this.loadMore=!0,this.prodList=[],this.fetchList())},sendYlogShow:function(){f.hostver&&t.ylog.show()}}}}).call(this,i("7189")["default"])},46:function(t,e,i){t.exports=i("b0e3")},"4bef":function(t,e,i){"use strict";i("b8f1")},"680d":function(t,e,i){"use strict";(function(t){var a=i("5530"),s=(i("a9e3"),i("b0c0"),i("ac1f"),i("1276"),i("2f85")),n=i("1041"),r=i("d7c1"),o=i("b00c"),c=i("fa74"),d={SHOWSALEOUT:"show-saleout",SHOWSUPPLY:"show-supply",NOICON:"noicon",NORMAL:"normal"};function l(t){return 1*t<10?"0".concat(t):t}e["a"]={name:"fashsale-list-item",mixins:[n["a"],s["a"]],components:{"product-price":c["a"],productLabel:r["a"]},props:{type:{type:[Number,String],default:1},activityType:{type:Number,default:o["a"].FASHSALE},prodItem:{type:Object,default:function(){return{}}},brandPriceControl:{type:Boolean,default:!1},prodSkinData:{type:Object}},data:function(){return{SALEENUM:d}},computed:{isBrandPriceType:function(){return t.store.isBrandPriceType},isSeckill:function(){return this.activityType===o["a"].SECKILL},isSaleout:function(){var t=this.prodItem,e=t.status,i=t.stock;return 1===e&&0===i},typeClass:function(){var t=this.prodItem.status||"";return["product-card-type".concat(this.type),{"product-card--brandprice":this.isBrandPriceType,"saleout-wrapper":this.showProdSaleout===d.SHOWSALEOUT,will:2===t,done:3===t}]},defaultClass:function(){return this.prodItem.name||this.prodItem.picUrl?"":"default"},imgObj:function(){return{loading:i("6208"),src:this.prodItem.pic||i("6208")}},showTimer:function(){var t=this.prodItem.status;return 1===t||2===t},showCountdown:function(){var t=this.prodItem.timestamp;return!!t&&t>0},fmtTime:function(){var t=this.prodItem.timestamp;return{hh:l(Math.floor(t/60/60)),mm:l(Math.floor(t/60%60)),ss:l(Math.floor(t%60))}},btnText:function(){var t={1:this.$t("components.fashsale.grab_now"),2:this.$t("components.fashsale.go_see"),3:this.$t("components.fashsale.over")};return t[this.prodItem.status||""]},specialClass:function(){return 3==this.type&&this.prodItem.foreign&&this.showTaxTag(this.prodItem.tariffType,1)},showOriginalPirce:function(){return!this.brandPriceControl||!!this.prodItem.originalPrice},showProdSaleout:function(){if(this.prodItem){var t=this.prodItem,e=t.activityStatus,i=t.activityStock,a=(t.showSaleOut,d.NOICON);return 0===i&&(1===e&&(a=d.SHOWSALEOUT),2===e&&(a=d.NOICON)),a}}},watch:{prodSkinData:{immediate:!0,handler:function(t){t&&this.setProdAttr(t)},deep:!0}},methods:{getDiscount:function(t){return t.discountInfo},getPriceArr:function(t){if(!t)return[""];var e=String(t).split(".");return e.length<2?e:[e[0],".".concat(e[1])]},goProd:function(){var e=this.prodItem.id,i=t.getQuery();i.isMiniApp;e&&(t.ylog.send({action_type:"click",module_name:"product_list",sproductid:e}),t.navigateTo({url:"/pages/item/main?productId=".concat(e)}))},setProdAttr:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleProdClass(e),this.$nextTick((function(){t.prodWrapStyle=Object(a["a"])({},t.prodThemeStyle)}))}}}}).call(this,i("7189")["default"])},b0e3:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("56d7"),s=(i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"fashsale-wrap",style:t.pageThemeStyle},[t.showPage?[t.isShowTabs?e("div",{staticClass:"tabs"},t._l(t.tabs,(function(i){return e("div",{key:i.status,class:["item",{"item--desc":!!i.desc,selected:t.isSelected(i),will:2===i.status}],on:{click:function(e){return t.switchTab(i)}}},[e("div",{staticClass:"item__name"},[t._v(t._s(i.name))]),i.desc?e("div",{staticClass:"item__desc"},[t._v(t._s(i.desc))]):t._e()])})),0):t._e(),e("van-pull-refresh",{attrs:{"animation-duration":"1500","head-height":"60"},on:{refresh:t.pullRefresh},scopedSlots:t._u([{key:"pulling",fn:function(t){return[e("div")]}},{key:"loosing",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0},{key:"loading",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0}],null,!1,1883122893),model:{value:t.isRefreshLoading,callback:function(e){t.isRefreshLoading=e},expression:"isRefreshLoading"}},[e("div",{class:["content",{"content--notabs":!t.isShowTabs}]},[e("fashsale-list",{attrs:{type:"2",activityType:t.activityType,prodList:t.prodList,prodSkinData:t.prodSkinData}}),t.tabLoading||t.loading||0!==t.prodList.length?t._e():e("div",{staticClass:"empty"},[e("img",{attrs:{src:t.$t("fashsale.img_fashsale_empty"),alt:""}}),e("p",[t._v(t._s(t.$t("fashsale.have_activity")))])])],1)])]:t._e(),t.showPage?t._e():e("loading-line")],2)}),n=[],r=i("4006"),o=r["a"],c=(i("3acb"),i("2877")),d=Object(c["a"])(o,s,n,!1,null,"dd61fa4e",null),l=d.exports;i.p=publicPath,Object(a["a"])(l)},b8f1:function(t,e,i){},db9a:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-list",class:[t.typeClass]},t._l(t.prodList,(function(i){return e("fashsale-list-item",{key:i.id,attrs:{prodItem:i,type:t.type,activityType:t.activityType,brandPriceControl:t.brandPriceControl,prodSkinData:t.prodSkinData}})})),1)},s=[],n=(i("a9e3"),i("b00c")),r=(i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-card",class:[t.typeClass,t.productStyleClass],style:t.prodThemeStyle,on:{click:t.goProd}},[e("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.imgObj,expression:"imgObj",arg:"background-image"}],staticClass:"product-card__banner img"},[e("div",{staticClass:"container-mask"}),t._l(t.prodItem.imageWatermarkList,(function(t,i){return[e("div",{key:i,class:["watermark",{"watermark--bottom":2===t.watermarkType},{"watermark--angle":1===t.watermarkType}]},[e("img",{staticClass:"watermark-img",attrs:{src:t.picUrl}})])]})),t.prodItem.specialTagPic?e("div",{staticClass:"special-tag"},[e("img",{attrs:{src:t.prodItem.specialTagPic}})]):t._e(),t.showProdSaleout===t.SALEENUM.SHOWSALEOUT?e("img",{staticClass:"saleout",attrs:{src:t.$t("components.img_icon_saleout_buy"),alt:t.$t("components.fashsale.grab")}}):t._e(),t.showProdSaleout===t.SALEENUM.SHOWSUPPLY?e("div",{staticClass:"container-label"},[e("product-label",{attrs:{cardType:t.isSeckill?"seckill":"activity",prodItem:t.prodItem}})],1):t._e()],2),e("div",{staticClass:"product-card__info"},[e("div",{staticClass:"hd"},[e("div",{staticClass:"container-content-brand"},[t._v(t._s(t.prodItem.brand))]),e("p",{staticClass:"title"},[t.prodItem.shipperId>0&&!t.prodItem.hideBorder?e("span",{staticClass:"title-label"},[t._v(t._s(t.$t("components.product.one_piece_deliver")))]):t.prodItem.domestic&&!t.prodItem.hideBorder?e("span",{staticClass:"title-label"},[t._v(t._s(t.$t("components.fashsale.premier")))]):t._e(),t._v(t._s(t.prodItem.name)+" ")]),e("div",{staticClass:"des"},[t.showTimer?e("div",{staticClass:"timewrap"},[e("span",{class:["label",2==t.prodItem.status?"status2":""]},[t._v(" "+t._s(t.prodItem.timeLabel)+" ")]),t.showCountdown?e("div",{staticClass:"countdown"},[e("div",{staticClass:"countdown__item"},[e("span",[t._v(t._s(t.fmtTime.hh))])]),e("div",{staticClass:"colon"},[t._v(":")]),e("div",{staticClass:"countdown__item"},[e("span",[t._v(t._s(t.fmtTime.mm))])]),e("div",{staticClass:"colon"},[t._v(":")]),e("div",{staticClass:"countdown__item"},[e("span",[t._v(t._s(t.fmtTime.ss))])])]):t._e()]):t._e()])]),e("div",{staticClass:"content"},[e("product-price",{attrs:{prodItem:t.prodItem,cardType:t.isSeckill?"seckill":"activity",priceType:"normal",priceStyleClass:t.priceStyleClass,noCenter:!0}}),e("div",{staticClass:"btn"},[t._v(t._s(t.btnText))])],1)])])}),o=[],c=i("680d"),d=c["a"],l=(i("4bef"),i("2877")),u=Object(l["a"])(d,r,o,!1,null,"a33d174e",null),p=u.exports,h={name:"fashsale-list",components:{fashsaleListItem:p},props:{type:{type:[Number,String],default:1},activityType:{type:Number,default:n["a"].FASHSALE},brandPriceControl:{type:Boolean,default:!1},prodList:{type:Array,default:function(){return[]}},prodSkinData:{type:Object}},computed:{typeClass:function(){return"product-list-type".concat(this.type)}}},f=h,m=Object(l["a"])(f,a,s,!1,null,null,null);e["a"]=m.exports}});