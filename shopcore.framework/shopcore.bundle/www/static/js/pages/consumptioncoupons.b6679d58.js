(function(t){function i(i){for(var o,n,r=i[0],c=i[1],u=i[2],p=0,d=[];p<r.length;p++)n=r[p],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(i);while(d.length)d.shift()();return s.push.apply(s,u||[]),e()}function e(){for(var t,i=0;i<s.length;i++){for(var e=s[i],o=!0,r=1;r<e.length;r++){var c=e[r];0!==a[c]&&(o=!1)}o&&(s.splice(i--,1),t=n(n.s=e[0]))}return t}var o={},a={"pages/consumptioncoupons":0},s=[];function n(i){if(o[i])return o[i].exports;var e=o[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=o,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)n.d(e,o,function(i){return t[i]}.bind(null,o));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=i,r=r.slice();for(var u=0;u<r.length;u++)i(r[u]);var l=c;s.push([34,"chunk-vendors","chunk-common"]),e()})({34:function(t,i,e){t.exports=e("703b")},"38a5":function(t,i,e){"use strict";e("4a23")},"4a23":function(t,i,e){},"663b":function(t,i,e){"use strict";(function(t){var o=e("5530"),a=(e("ac1f"),e("841c"),e("b64b"),e("00b4"),e("b0c0"),e("99af"),e("fb6a"),e("b68d")),s=e("603c"),n=e("cd92"),r=e("44e4"),c=e("bce3"),u=e("fec4"),l=e("566a");i["a"]={components:{productListCard:n["a"],loadingLine:r["a"],loadmore:c["a"],selectsku:u["a"],storeDialog:l["a"]},mixins:[s["a"],a["a"]],onReachBottom:function(){this.loadMore()},data:function(){return{spendBackCouponsList:[],timelimit:"",symbol:"",loading:!1,prodList:[],bannerUrl:"",bgColor:"",titleColor:"",pageIndex:0,isNoMore:!1,firstData:{},rgbObj:{},isActivityEmpty:!1,skus:{},skuDefault:{showSkuPop:!1,skuType:1,pic:"",price:"",selectId:"",foreign:!1,symbol:""},hideHeader:!1,showStoreDialog:!1,shopDetailDto:null,productDetailInfo:{},canJoinCount:0}},computed:{showPage:function(){return(this.prodList&&this.prodList.length||!this.loading)&&!this.isActivityEmpty}},mounted:function(){this.fetchInfo({pageIndex:1})},methods:{loadMore:function(){this.isNoMore||this.loading||this.fetchInfo({pageIndex:this.pageIndex+1})},fetchInfo:function(i){var e=this,a=i.pageIndex,s=void 0===a?1:a,n=t.parseLocator(window.location.search,"lower"),r={pageIndex:s,activityId:n.id};this.loading=!0,t.request({url:"/api/prod/getproductlistbyspendbackcoupons",data:r,method:"post"}).then((function(i){if(e.loading=!1,i){if(e.pageIndex=s,1===s){if(!i||0===Object.keys(i).length)return void(Object.keys(e.firstData).length>0?e.firstData=Object(o["a"])({},e.firstData):e.hideHeader=!0);e.hideHeader=!1,e.spendBackCouponsList=i.spendBackCouponsList,e.symbol=i.symbol;var a=JSON.parse(i.activityPageConfig)||{},n=a.bannerUrl,r=a.bgColor,c=a.titleColor;/^https?/.test(n)&&(e.bannerUrl=n),e.canJoinCount=i.canJoinCount>0&&i.canJoinCount,e.bgColor=r||"#F23340",e.titleColor=c||"white",e.firstData=Object(o["a"])({timestamp:Math.ceil(i.timeRemaining/1e3),timeLabel:i.timeLabel},e.calcTime(Math.ceil(i.timeRemaining/1e3))),e.rgbObj=e.hexToRgb(r||"#F23340"),t.setNavigationBarTitle({title:i.name||""}),t.wxShare({title:i.name||""}),i.timeRemaining>0&&(e.stopTimer(),e.startTimer()),e.prodList=i.productList||[]}else e.prodList=e.prodList.concat(i.productList||[]);i.productList&&0!==i.productList.length||(e.isNoMore=!0)}else e.isActivityEmpty=!0})).catch((function(i){e.loading=!1,e.isActivityEmpty=!0,t.showToast({title:i.message||i.msg||e.$tc("moneyoff.activity_commodity",1)})}))},stopTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){var t=this;this.timer||(this.timer=setInterval((function(){t.countDown()}),1e3))},countDown:function(){var t=this,i=Object(o["a"])({},this.firstData);if(i.timestamp>0){i.timestamp-=1;var e=this.calcTime(i.timestamp);i.dd=e.dd,i.hh=e.hh,i.mm=e.mm,i.ss=e.ss,i.timestamp<=0&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.fetchInfo({pageIndex:1})}),400))}this.firstData=Object(o["a"])({},i)||{}},calcTime:function(t){if(t<=0)return{hh:"00",mm:"00",ss:"00"};var i=t,e=Math.floor(i/3600/24),o=Math.floor((i-3600*e*24)/3600),a=Math.floor((i-3600*e*24-3600*o)/60),s=i-3600*e*24-3600*o-60*a;return{dd:this.formatNum(e),hh:this.formatNum(o),mm:this.formatNum(a),ss:this.formatNum(s)}},formatNum:function(t){var i=String(t);return i.length?1===i.length?"0".concat(i):i:"00"},hexToRgb:function(t){var i,e,o;return/^#/g.test(t)?(i=t.slice(1,3),e=t.slice(3,5),o=t.slice(5,7),{r:parseInt(i,16),g:parseInt(e,16),b:parseInt(o,16)}):{}},handleAddBtn:function(i){var e=this;t.showLoading({title:this.$t("moneyoff.request_specification")}),this.prodCurrent=i,t.request({url:"/api/prod/sqdetail?productid=".concat(i.id),method:"get"}).then((function(o){3==o.nationType&&(o.price.foreign=!1),e.skus=o.skus,e.skuDefault.showSkuPop=!0,e.skuDefault.pic=i.pic,e.skuDefault.price=i.price,e.skuDefault.selectId=i.catalogId,e.skuDefault.foreign=o.price&&o.price.foreign,e.skuDefault.symbol=o.price&&o.price.symbol||"Â¥",e.skuDefault.minNum=o.minOrderNum||0,e.skuDefault.vipLogo=o.memberGrade&&o.memberGrade.logoUrl,e.skuDefault.subsidyInterval=o.price.subsidyPrice&&o.price.subsidyPrice[0]!=o.price.subsidyPrice[1]?e.$t("moneyoff.rise"):"",e.skuDefault.vipInterval=o.price.vipPrice&&o.price.vipPrice[0]!=o.price.vipPrice[1]?e.$t("moneyoff.rise"):"",e.skuDefault.subsidyExchangePrice=o.price.subsidyExchangePrice&&o.price.subsidyExchangePrice[0],e.skuDefault.vipExchangePrice=o.price.vipExchangePrice&&o.price.vipExchangePrice[0],e.skuDefault.vipPrice=o.price&&o.price.vipPrice&&o.price.vipPrice[0],e.skuDefault.subsidyPrice=o.price.subsidyPrice&&o.price.subsidyPrice[0],e.productDetailInfo=o,o.saleChannel?(e.skuDefault.skuType=10,e.skuDefault.confirmName=e.$t("item.store_buy"),e.shopDetailDto=o.shopDetailDto||null,e.skuDefault.inQualificationsGroup=!1):o.vipNotCanBuyGroup&&o.vipNotCanBuyGroup.inGroup&&2==o.vipNotCanBuyGroup.groupStatus?(e.skuDefault.skuType=11,e.skuDefault.confirmName=o.vipNotCanBuyGroup.nextCanBuyDesc,e.shopDetailDto=null,e.skuDefault.inQualificationsGroup=!1):0==o.state&&o.inQualificationsGroup?(e.skuDefault.inQualificationsGroup=!0,e.skuDefault.skuType=12,e.shopDetailDto=null):(e.skuDefault.skuType=2,e.skuDefault.confirmName="",e.shopDetailDto=null,e.skuDefault.inQualificationsGroup=!1),e.skuDefault.moneyoffQualificationsStatus=!0,t.hideLoading()})).catch((function(i){t.hideLoading(),t.showToast({title:i.message||i.msg||e.$t("moneyoff.failed_obtain")})}))},skuConfirmCB:function(i){var e=this,o=this;if(o.showSkuFunc(!1),10!=i.skuType){if(11!=i.skuType)return 12==i.skuType?t.auth.islogin()?void(t.isMiniApp?wx.miniProgram.navigateTo({url:"/pages/item/item?productId=".concat(this.productDetailInfo.id)}):t.navigateTo({url:"/pages/item/main?productId=".concat(this.productDetailInfo.id)})):void t.auth.tologin():void(t.auth.islogin()?t.auth.authBindMobile().then((function(){var a={CatalogId:i.catalogId,Sale4Price:i.purchaseprice,purchasenum:i.purchasenum,deliveryType:i.deliveryType};t.ylog.send({action_type:"click",module_name:"consumptioncoupons",sub_module_name:"add_to_shoppingcart",sproductid:e.prodCurrent.id,catalog:a.CatalogId}),o.checkData()&&o.addCart(a)})):t.auth.tologin());this.vipDisableConfirm()}else this.handleShowStoreDialog()},showSkuFunc:function(t){this.skuDefault.showSkuPop=!!t},addCart:function(i){var e=this,o={catalogid:i.CatalogId,purchasenum:i.purchasenum,deliverytype:i.deliveryType,checked:!0};t.request({method:"POST",url:"/api/trading/sqscartprod",data:o}).then((function(i){i.success?t.showToast({title:e.$t("moneyoff.cart_successfully"),icon:"success",className:"longToast"}):t.showToast({title:i.msg||e.$t("moneyoff.failed_cart")})})).catch((function(i){t.showToast({title:i.message||e.$t("moneyoff.failed_cart")})}))},handleShowStoreDialog:function(){this.showStoreDialog=!0},handleHidetoreDialog:function(){this.showStoreDialog=!1},checkData:function(){return 1==this.productDetailInfo.state&&this.productDetailInfo.activityInfo&&0==this.productDetailInfo.activityInfo.state?(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1):!this.productDetailInfo.activityInfo||4!=this.productDetailInfo.activityInfo.type&&6!=this.productDetailInfo.activityInfo.type&&21!=this.productDetailInfo.activityInfo.type&&24!=this.productDetailInfo.activityInfo.type&&22!=this.productDetailInfo.activityInfo.type||0!=this.productDetailInfo.activityInfo.state||(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1)},vipDisableConfirm:function(i){this.productDetailInfo&&(this.productDetailInfo.vipNotCanBuyGroup&&this.productDetailInfo.vipNotCanBuyGroup.inGroup&&this.productDetailInfo.vipNotCanBuyGroup.isVip?t.navigateTo({url:"/pages/membercenter/main"}):t.showToast({title:this.productDetailInfo.vipNotCanBuyGroup.nextCanBuyDesc,icon:"none"}))}}}}).call(this,e("7189")["default"])},"703b":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("56d7"),a=(e("99af"),function(){var t=this,i=t._self._c;return i("div",{staticClass:"container",style:[{background:t.bgColor},t.pageThemeStyle]},[t.showPage&&!t.hideHeader?i("div",{staticClass:"head"},[i("div",{staticClass:"card"},[t.bannerUrl?i("img",{staticClass:"card__banner",attrs:{src:t.bannerUrl}}):i("img",{staticClass:"card__banner",attrs:{src:t.$t("consumptioncoupons.img_privilege")}}),i("div",{staticClass:"card__title"},[i("div",{staticClass:"card__shadow",style:{background:"linear-gradient(360deg,".concat(t.bgColor," 0%,rgba(").concat(t.rgbObj.r,",").concat(t.rgbObj.g,",").concat(t.rgbObj.b,",0) 100%)")}}),i("img",{staticClass:"card__title__dot",attrs:{src:e("81bd")}}),i("span",{staticClass:"card__title__text",style:{color:t.titleColor}},[t._v(t._s(t.$t("consumptioncoupons.yi_xia_shang_pin")))]),i("img",{staticClass:"card__title__dot dot--right",attrs:{src:e("81bd")}})]),i("div",{staticClass:"card__subtitle",style:{color:t.titleColor}},[t._v(" "+t._s(t.canJoinCount?t.$t("consumptioncoupons.mei_wei_jin_ci",[t.canJoinCount]):t.$t("consumptioncoupons.bu_xian_zhi_ci_shu"))+" ")]),i("div",{staticClass:"card__container"},[i("img",{staticClass:"card__container__top",attrs:{src:e("bd11")}}),i("div",{class:["card__container__content",t.firstData.timestamp?"pdb90":"pdb44"]},[i("span",{staticClass:"content__title"},[i("div",{staticClass:"item"},[t._v(t._s(t.$t("moneyoff.single_order"))+t._s(t.symbol?"(".concat(t.symbol,")"):"")+" :")]),t._l(t.spendBackCouponsList,(function(e,o){return i("div",{key:o,staticClass:"item"},[t._v(t._s(e))])}))],2)]),i("img",{staticClass:"card__container__bottom",attrs:{src:e("836f")}}),i("div",{staticClass:"content__abs"},[i("span",{staticClass:"content__date"},[t._v(t._s(t.firstData.timeLabel))]),t.firstData.timestamp?i("span",{staticClass:"content__status"},[i("div",{staticClass:"prod-time"},[t.firstData.timestamp>0?i("div",{staticClass:"prod-time-wrap"},[i("span",{staticClass:"prod-time-desc"},[t._v(t._s(t.$tc("moneyoff.start_over",1)))]),t.firstData.dd>0?[i("span",{staticClass:"prod-time-r prod-h"},[t._v(t._s(t.firstData.dd||"00"))]),i("span",{staticClass:"prod-time-day"},[t._v(t._s(t.$t("moneyoff.day")))])]:t._e(),i("span",{staticClass:"prod-time-r prod-h"},[t._v(t._s(t.firstData.hh||"00"))]),i("span",{staticClass:"prod-time-gap"},[t._v(":")]),i("span",{staticClass:"prod-time-r prod-m"},[t._v(t._s(t.firstData.mm||"00"))]),i("span",{staticClass:"prod-time-gap"},[t._v(":")]),i("span",{staticClass:"prod-time-r prod-s"},[t._v(t._s(t.firstData.ss||"00"))])],2):t._e()])]):t._e()])])])]):t._e(),i("div",{staticClass:"content"},[t.loading&&0===t.pageIndex?i("loading-line"):t._e(),t.loading||0!==t.prodList.length?t._e():i("div",{staticClass:"empty"},[i("img",{attrs:{src:t.$t("fashsale.img_fashsale_empty")}}),i("p",{style:{color:t.isActivityEmpty?"rgba(155, 155, 155, 1)":"#fff"}},[t._v(" "+t._s(t.isActivityEmpty?t.$tc("moneyoff.activity_commodity",1):t.$tc("moneyoff.activity_commodity",2))+" ")])]),i("div",{staticClass:"content__list"},[i("product-list-card",{attrs:{prodList:t.prodList,showPriceControlType:!1,fixDiscountLabelPlaced:!0,prodType:2,hasShadow:!1,showAddBtn:"",prodSkinData:t.prodSkinData},on:{handleAddBtn:t.handleAddBtn}})],1),t.prodList.length>0?i("loadmore",{attrs:{color:"#fff",loading:t.loading&&t.pageIndex>0,hasMore:!t.isNoMore}}):t._e()],1),t.skus&&t.skuDefault.showSkuPop?i("selectsku",{attrs:{skus:t.skus,skuDefault:t.skuDefault,isFromTuan:!1,productDetailInfo:t.productDetailInfo},on:{skuConfirmCB:t.skuConfirmCB,showSkuFunc:t.showSkuFunc}}):t._e(),i("storeDialog",{attrs:{shopDetailDto:t.shopDetailDto},on:{hideDialog:t.handleHidetoreDialog},model:{value:t.showStoreDialog,callback:function(i){t.showStoreDialog=i},expression:"showStoreDialog"}})],1)}),s=[],n=e("663b"),r=n["a"],c=(e("38a5"),e("2877")),u=Object(c["a"])(r,a,s,!1,null,"16264fb8",null),l=u.exports;e.p=publicPath,Object(o["a"])(l)}});