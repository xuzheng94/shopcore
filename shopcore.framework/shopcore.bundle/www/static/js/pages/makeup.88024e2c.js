(function(t){function i(i){for(var a,r,n=i[0],c=i[1],u=i[2],d=0,p=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(i);while(p.length)p.shift()();return o.push.apply(o,u||[]),e()}function e(){for(var t,i=0;i<o.length;i++){for(var e=o[i],a=!0,n=1;n<e.length;n++){var c=e[n];0!==s[c]&&(a=!1)}a&&(o.splice(i--,1),t=r(r.s=e[0]))}return t}var a={},s={"pages/makeup":0},o=[];function r(i){if(a[i])return a[i].exports;var e=a[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,i,e){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)r.d(e,a,function(i){return t[i]}.bind(null,a));return e},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=i,n=n.slice();for(var u=0;u<n.length;u++)i(n[u]);var l=c;o.push([67,"chunk-vendors","chunk-common"]),e()})({2858:function(t,i,e){"use strict";e("ff24")},67:function(t,i,e){t.exports=e("afdf")},afdf:function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("56d7"),s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"wrap",style:t.pageThemeStyle},[t.showPage?[i("div",{staticClass:"wrap-top"},[i("van-sticky",[i("filter-bar",{attrs:{selectedList:t.selectedList,filterList:t.filterList},on:{getSearchResult:t.getSearchResult}})],1)],1),t.prodList.length>0?i("div",{staticClass:"wrap-content"},[i("div",{staticClass:"wrap-content-desc"},[i("span",{staticClass:"desc-title"},[t._v(t._s(t.activity.descMin))]),1===t.activity.status||2===t.activity.status?i("span",{staticClass:"desc-subtitle"},[t._v(t._s(t.$t("makeup.activity_time"))+t._s(t.activity.beginTime)+" - "+t._s(t.activity.endTime))]):i("span",{staticClass:"desc-subtitle"},[t._v(t._s(t.$t("makeup.activity_over")))])]),i("div",{staticClass:"wrap-content-list"},[i("product-list-card",{attrs:{prodList:t.prodList,hidePriceControlType:"",prodType:2,hasShadow:!1,fixDiscountLabelPlaced:!0,showAddBtn:"",prodSkinData:t.prodSkinData},on:{handleAddBtn:t.handleAddBtn}})],1),i("div",{staticClass:"wrap-load-more"},[i("load-more",{attrs:{hasLoad:t.loadMore,loading:t.isXhr}})],1)]):0===t.prodList.length?i("div",{staticClass:"empty"},[i("img",{attrs:{src:t.$t("fashsale.img_fashsale_empty")}}),i("p",[t._v(t._s(t.$t("makeup.no_goods")))])]):t._e(),i("div",{staticClass:"wrap-bottom-container"},[i("div",{staticClass:"wrap-bottom"},[i("span",{staticClass:"wrap-bottom-desc"},[1===t.activity.status?[t.activityValue&&t.activityValue>0?[i("span",[t._v(t._s(t.$t("makeup.short")))]),i("span",{staticClass:"desc-price"},[t._v(t._s(t.activityMixDesc))]),i("span",[t._v(t._s(t.$t("makeup.participate_activities")))])]:i("span",[t._v(t._s(t.$t("makeup.purchase_conditions")))])]:2===t.activity.status?i("span",[t._v(t._s(t.$tc("makeup.active_state",1)))]):i("span",[t._v(t._s(t.$tc("makeup.active_state",2)))])],2),i("div",{class:["wrap-bottom-btn",{"wrap-bottom-btn__disabled":t.btnDisabled}],on:{click:t.goSwap}},[t._v(t._s(t.$t("makeup.choose")))])])])]:t.showPage?t._e():i("loading-line"),t.skus&&t.skuDefault.showSkuPop?i("selectsku",{attrs:{skus:t.skus,skuDefault:t.skuDefault,isFromTuan:!1,saleActivityTitles:t.isBrandPriceType?t.saleActivityTitles:[],productDetailInfo:t.productDetailInfo},on:{skuConfirmCB:t.skuConfirmCB,showSkuFunc:t.showSkuFunc}}):t._e(),i("storeDialog",{attrs:{shopDetailDto:t.shopDetailDto},on:{hideDialog:t.handleHidetoreDialog},model:{value:t.showStoreDialog,callback:function(i){t.showStoreDialog=i},expression:"showStoreDialog"}})],2)},o=[],r=e("f9f2"),n=r["a"],c=(e("2858"),e("2877")),u=Object(c["a"])(n,s,o,!1,null,"3713c094",null),l=u.exports;e.p=publicPath,Object(a["a"])(l)},f9f2:function(t,i,e){"use strict";(function(t){var a=e("5530"),s=(e("0cc8"),e("3104")),o=(e("a9e3"),e("ac1f"),e("841c"),e("99af"),e("c96a"),e("1276"),e("b68d")),r=e("603c"),n=e("1041"),c=e("13cb"),u=e("cd92"),l=e("fec4"),d=e("bce3"),p=e("44e4"),f=e("566a"),h=e("ed08");i["a"]={components:{filterBar:c["a"],productListCard:u["a"],selectsku:l["a"],loadMore:d["a"],loadingLine:p["a"],"van-sticky":s["a"],storeDialog:f["a"]},mixins:[r["a"],n["a"],o["a"]],data:function(){return{showPage:!1,prodList:[],isShowSku:!1,isXhr:!1,skuDefault:{showSkuPop:!1,skuType:1,pic:"",price:"",selectId:"",foreign:!1,symbol:""},skus:{},prodCurrent:{},maxPageIndex:0,loadMore:!1,prodListEmpty:!1,pageIndex:1,selectedList:{},filterList:{},queryObj:{},activityId:"",activity:{},fromPage:"",saleActivityTitles:[],showStoreDialog:!1,shopDetailDto:null,productDetailInfo:{}}},onReachBottom:function(){this.pageIndex+=1;var t=this.pageIndex>this.maxPageIndex||this.prodListEmpty;t||this.getSearchResult({needClearOldData:!1,refreshProduct:!0})},computed:{activityValue:function(){var t=this.activity.buyPrice;return Number(t)},activityUnit:function(){var t=this.activity,i=t.conditionType,e=t.symbol,a=void 0===e?"Â¥":e;return 1===i?a:this.$t("makeup.piece")},activityMixDesc:function(){var t=this.activity.conditionType,i="";return i=this.isJPY(this.activityUnit)||1!==t?this.activityValue+this.activityUnit:this.activityUnit+this.activityValue,i},btnDisabled:function(){return!(this.activityValue<=0&&1===this.activity.status)},isBrandPriceType:function(){return t.store.isBrandPriceType}},mounted:function(){var i=this;t.setNavigationBarTitle({title:this.$t("makeup.activities_goods")});var e=t.parseLocator(window.location.search,"lower");this.activityId=Number(e.id)||"",this.fromPage=e.frompage,this.getSearchResult({needClearOldData:!0,refreshProduct:!0}),t.onShow((function(){i.getSearchResult({needClearOldData:!0,refreshProduct:!1})})),t.wxShare({title:this.$t("makeup.activities_goods")})},methods:{getSearchResult:function(i){var e=this,s=i.needClearOldData,o=i.queryObj,r=i.selectedList,n=i.refreshProduct,c=i.showloading,u=i.changeKeyword;this.pageIndex=s?1:this.pageIndex,o&&(this.queryObj=Object(a["a"])({},o)),r&&(this.selectedList=r);var l=Object(a["a"])(Object(a["a"])({},this.queryObj),{},{pageIndex:this.pageIndex,activityId:this.activityId,refreshProduct:n});if(!this.isXhr){this.selectedList&&(t.isBlank(this.selectedList.brandList)||(l.brandList=this.selectedList.brandList),t.isBlank(this.selectedList.categoryList)||(l.thirdCategoryList=this.selectedList.categoryList,l.firstCategoryList=[],l.secondCategoryList=[]),l.minPrice=this.selectedList.minPrice,l.maxPrice=this.selectedList.maxPrice),l.keyword||delete l.keyword,c&&t.showLoading(),this.isXhr=!0;var d="/api/prod/sqdoorexchangebuy";t.request({url:d,method:"post",data:l}).then((function(i){if(e.isXhr=!1,e.showPage=!0,c&&t.hideLoading(),n){if((i.filterList&&t.isBlank(e.filterList)||u)&&(e.filterList=Object(a["a"])({},i.filterList||{})),(!i.list||!i.list.length)&&(!e.prodList.length||s))return void(s&&(e.prodList=[]));var o=i.list||[],d=e.prodList,p=s?o:d.concat(o),f=!i.list||0===i.list.length,h=i.count||0;e.prodList=p,e.maxPageIndex=h,e.prodListEmpty=f,e.selectedList=(r?e.selectedList:i.selectedList)||{},e.loadMore=l.pageIndex<h&&!f,s&&(document.documentElement.scrollTop=document.body.scrollTop=0)}!s&&n||(e.activity=i.activity||{})})).catch((function(i){e.isXhr=!1,e.showPage=!0,c&&t.hideLoading(),t.showToast({title:i.message||e.$t("makeup.search_failed")})}))}},handleAddBtn:function(i){var e=this;t.showLoading({title:this.$t("makeup.request_specification")}),this.prodCurrent=i,t.request({url:"/api/prod/sqdetail?productid=".concat(i.id),method:"get"}).then((function(i){if(t.hideLoading(),!Object(h["c"])(i)){var a="",s=!1,o=!1,r=i.activityInfo&&2===i.activityInfo.state;i.price.interval[0]!==i.price.interval[1]&&(a=e.$t("makeup.rise"));var n=i.activityInfo&&i.activityInfo.state<2;i.activityInfo&&5===i.activityInfo.type&&0===i.activityInfo.state&&(n=!1),n&&i.activityInfo&&(4===i.activityInfo.type||6===i.activityInfo.type?(0===i.activityInfo.state&&(o=!0),s=!0):1===i.activityInfo.state&&(s=!0)),3==i.nationType&&(i.price.foreign=!1),e.skus=i.skus,e.skuDefault.showSkuPop=!0,e.skuDefault.pic=i.picList[0].small,e.skuDefault.price=i.price.interval[0],e.skuDefault.interval=a,e.skuDefault.exchangePrice=i.price.exchange?i.price.exchange[0]:"",e.skuDefault.foreign=i.price.foreign,e.skuDefault.symbol=i.price.symbol,e.skuDefault.minNum=i.minOrderNum,e.skuDefault.type=s?3:0,e.skuDefault.skuShowOriginalPrice=o,e.skuDefault.activitySaleout=r,e.skuDefault.vipLogo=i.memberGrade&&i.memberGrade.logoUrl,e.skuDefault.subsidyInterval=i.price.subsidyPrice&&i.price.subsidyPrice[0]!=i.price.subsidyPrice[1]?e.$t("makeup.rise"):"",e.skuDefault.vipInterval=i.price.vipPrice&&i.price.vipPrice[0]!=i.price.vipPrice[1]?e.$t("makeup.rise"):"",e.skuDefault.subsidyExchangePrice=i.price.subsidyExchangePrice&&i.price.subsidyExchangePrice[0],e.skuDefault.vipExchangePrice=i.price.vipExchangePrice&&i.price.vipExchangePrice[0],e.skuDefault.vipPrice=i.price&&i.price.vipPrice&&i.price.vipPrice[0],e.skuDefault.subsidyPrice=i.price.subsidyPrice&&i.price.subsidyPrice[0],e.productDetailInfo=i,i.saleChannel?(e.skuDefault.skuType=10,e.skuDefault.confirmName=e.$t("item.store_buy"),e.shopDetailDto=i.shopDetailDto||null,e.skuDefault.inQualificationsGroup=!1,e.skuDefault.inDrawLots=!1):i.vipNotCanBuyGroup&&i.vipNotCanBuyGroup.inGroup&&2==i.vipNotCanBuyGroup.groupStatus?(e.skuDefault.skuType=11,e.skuDefault.confirmName=i.vipNotCanBuyGroup.nextCanBuyDesc,e.shopDetailDto=null,e.skuDefault.inQualificationsGroup=!1,e.skuDefault.inDrawLots=!1):0==i.state&&i.inQualificationsGroup?(e.skuDefault.inQualificationsGroup=!0,e.skuDefault.skuType=12,e.shopDetailDto=null):i.activityInfo&&25===i.activityInfo.type?(e.skuDefault.inDrawLots=!0,e.skuDefault.skuType=13,e.shopDetailDto=null):(e.skuDefault.skuType=1,e.skuDefault.confirmName="",e.shopDetailDto=null,e.skuDefault.inQualificationsGroup=!1,e.skuDefault.inDrawLots=!1),e.loadSellerInfo(i)}})).catch((function(i){t.hideLoading(),t.showToast({title:i.message||i.msg||e.$t("makeup.failed_specifications")})}))},skuConfirmCB:function(i){var e=this,a=this;if(a.showSkuFunc(!1),10!=i.skuType){if(11!=i.skuType)return 12==i.skuType?t.auth.islogin()?void(t.isMiniApp?wx.miniProgram.navigateTo({url:"/pages/item/item?productId=".concat(this.productDetailInfo.id)}):t.navigateTo({url:"/pages/item/main?productId=".concat(this.productDetailInfo.id)})):void t.auth.tologin():void(13!=i.skuType?t.auth.islogin()?t.auth.authBindMobile().then((function(){var s={CatalogId:i.catalogId,Sale4Price:i.purchaseprice,purchasenum:i.purchasenum,deliveryType:i.deliveryType};t.ylog.send({action_type:"click",module_name:"specification",sub_module_name:"add_to_shoppingcart",sproductid:e.prodCurrent.id,catalog:s.CatalogId}),a.checkData()&&a.addCart(s)})):t.auth.tologin():t.isMiniApp?wx.miniProgram.navigateTo({url:"/subPackage2/pages/activityItem/activityItem?productId=".concat(this.productDetailInfo.id,"&activityId=").concat(this.productDetailInfo.activityInfo&&this.productDetailInfo.activityInfo.activityId)}):t.showToast({title:this.$t("components.selectsku.goto_programs_qualification")}));this.vipDisableConfirm()}else this.handleShowStoreDialog()},showSkuFunc:function(t){this.skuDefault.showSkuPop=!!t},loadSellerInfo:function(i){var e=this;if(i||i.price){var a={productId:i.id,currency:i.price.currency,symbol:i.price.symbol,effectActivityInfo:i.effectActivityInfo,activityInfo:i.activityInfo,brandId:i.brandId,categoryId:i.categoryId,masterCategoryId:i.masterCategoryId,thirdCategoryId:i.thirdCategoryId,domestic:i.domestic,nationType:i.nationType,tariffType:i.tariffType};t.request({url:"/api/prodpromo/getSellerInfo",data:a,method:"post"}).then((function(i){200!==i.code&&t.showToast({title:i.message||e.$t("makeup.failed_information")});var a=i.data,s=[];a.saleActivity&&a.saleActivity[0]&&a.saleActivity[0].title&&(s=a.saleActivity[0].title.split(",")),e.sellerInfo=a,e.saleActivityTitles=s})).catch((function(i){t.showToast({title:i.message||e.$t("makeup.failed_information")})}))}},addCart:function(i){var e=this,a={catalogid:i.CatalogId,purchasenum:i.purchasenum,deliverytype:i.deliveryType,checked:!0};t.request({method:"POST",url:"/api/trading/sqscartprod",data:a}).then((function(i){i.success?(t.showToast({title:e.$t("makeup.added_cart_successfully"),icon:"success",className:"longToast"}),e.getSearchResult({needClearOldData:!1,refreshProduct:!1})):t.showToast({title:i.msg||e.$t("makeup.added_cart_successfully")})})).catch((function(i){t.showToast({title:i.message||e.$t("makeup.failed_add_cart")})}))},goSwap:function(){if(t.ylog.send({action_type:"click",module_name:"ok_button"}),!this.btnDisabled)if("swap"===this.fromPage)t.navigateBack();else{var i=t.getQuery(),e=i.isMiniApp,a=void 0!==e&&e;a?wx.miniProgram.navigateTo({url:"/subPackage/pages/swap/swap?id=".concat(this.activityId)}):t.navigateTo({url:"/pages/swap/main?id=".concat(this.activityId)})}},handleShowStoreDialog:function(){this.showStoreDialog=!0},handleHidetoreDialog:function(){this.showStoreDialog=!1},checkData:function(){return 1==this.productDetailInfo.state&&this.productDetailInfo.activityInfo&&0==this.productDetailInfo.activityInfo.state?(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1):!this.productDetailInfo.activityInfo||4!=this.productDetailInfo.activityInfo.type&&6!=this.productDetailInfo.activityInfo.type&&21!=this.productDetailInfo.activityInfo.type&&24!=this.productDetailInfo.activityInfo.type&&22!=this.productDetailInfo.activityInfo.type||0!=this.productDetailInfo.activityInfo.state||(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1)},vipDisableConfirm:function(i){this.productDetailInfo&&(this.productDetailInfo.vipNotCanBuyGroup&&this.productDetailInfo.vipNotCanBuyGroup.inGroup&&this.productDetailInfo.vipNotCanBuyGroup.isVip?t.navigateTo({url:"/pages/membercenter/main"}):t.showToast({title:this.productDetailInfo.vipNotCanBuyGroup.nextCanBuyDesc,icon:"none"}))}}}}).call(this,e("7189")["default"])},ff24:function(t,i,e){}});