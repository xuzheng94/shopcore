(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop-coupon","space"],{1041:function(t,e,s){"use strict";var a=s("9225");e["a"]={methods:{isJPY:function(t){var e=""+t;return e.indexOf("日元")>-1},isMOP:function(t){var e=String(t);return e.length>3||!1},getTaxText:function(t,e){var s=parseInt(t,10),o="";switch(s){case 1:o=a["a"].t("platforms.exemption");break;case 2:o=a["a"].t("platforms.farming");break;case 3:o=a["a"].t("platforms.exemption_farming");break;default:o="";break}return 1===e&&o&&(o=1===s?"":a["a"].t("platforms.farming")),o},showTaxTag:function(t,e){var s=parseInt(t,10),a=1===e?[2,3]:[1,2,3];return a.indexOf(s)>-1},getPriceDesc:function(t,e,s){t=t||"¥";var a=this.isJPY(t)||"欧分"===t;return e||1===s?a?e+t:t+e:""},getMarketPrice:function(t){var e="";if(t){var s=0,a=t.foreign?t.symbol:"¥";t.marketAmount>0?s=t.marketAmount:t.originalPrice>0&&t.originalPrice!==t.price&&(s=t.originalPrice),s>0&&(e=this.isJPY(a)?s+a:a+s)}return e}}}},"120f":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-wrap"},[t.showSpaceTop?e("space",{attrs:{isDev:t.isDev,isActive:t.isActive,position:"top",spaceSize:t.partProps.spaceTop,pageStyleMode:t.pageStyleMode,spaceType:t.spaceType}}):t._e(),t._t("default"),e("space",{attrs:{isDev:t.isDev,isActive:t.isActive,position:"bottom",spaceSize:t.partProps.spaceBottom,pageStyleMode:t.pageStyleMode,spaceType:t.spaceType}})],2)},o=[],i=(s("a9e3"),s("eca1")),n={components:{space:i["default"]},props:{partProps:{type:Object},showSpaceTop:{type:Boolean,default:!0},spaceType:{type:String,default:"large"},isDev:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},pageStyleMode:{type:Number,default:1}}},r=n,c=(s("eeef"),s("2877")),p=Object(c["a"])(r,a,o,!1,null,"540e39ed",null);e["a"]=p.exports},2532:function(t,e,s){"use strict";var a=s("23e7"),o=s("e330"),i=s("5a34"),n=s("1d80"),r=s("577e"),c=s("ab13"),p=o("".indexOf);a({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~p(r(n(this)),r(i(t)),arguments.length>1?arguments[1]:void 0)}})},"2bde":function(t,e,s){"use strict";s("9528")},"399b":function(t,e,s){"use strict";s.r(e);s("a4d3"),s("e01a");var a=function(){var t=this,e=t._self._c;return t.showCoupon||t.isDev?e("inner-wrap",{attrs:{isDev:t.isDev,isActive:t.isActive,partProps:t.partProps,spaceType:"middle",pageStyleMode:t.pageStyleMode,hideSpace:2===t.partProps.styleType,showBg:!!t.styleModeClass}},[2!=t.partProps.styleType?e("div",{class:["coupons-main",t.styleModeClass,{"coupons-main-style4":4==t.style}],style:t.styleModeClass?t.cardBgStyle:""},[t._l(t.list,(function(s,a){return e("div",{key:a,class:["wrap-type","coupon-style".concat(t.style)],on:{click:function(e){return t.getCoupon(s,a)}}},[e("div",{staticClass:"coupon"},[10==s.couponType?e("div",{staticClass:"left-icon"},[t._v(t._s(t.$t("skins.voucher")))]):t._e(),1===s.state?e("img",{staticClass:"coupon-img",attrs:{src:t.$t("skins.img_coupon_done_icon")}}):t._e(),e("div",{class:["coupon-content",{"coupon-content_large":1==t.style}]},[e("div",{staticClass:"coupon-price"},[40==s.couponType?e("div",[e("span",{staticClass:"coupon-relprice"},[t._v(t._s(s.discountValue))]),e("span",{staticClass:"discount-text"},[t._v(t._s(t.$t("skins.fold")))])]):5==s.couponType?e("div",[e("span",{staticClass:"coupon-exchange"},[t._v(t._s(t.$t("skins.exchange_coupon")))])]):[t.isJPY(s.symbol)?t._e():e("span",{staticClass:"symbol"},[t._v(t._s(s.symbol||"¥"))]),e("span",{staticClass:"coupon-relprice"},[t._v(t._s(s.amount))]),t.isJPY(s.symbol)?e("span",{staticClass:"symbol"},[t._v(t._s(s.symbol))]):t._e()]],2),e("div",{staticClass:"coupon-desc-content"},[1==t.style?e("div",{staticClass:"coupon-desc-title"},[t._v(t._s(s.title))]):t._e(),e("div",{staticClass:"coupon-desc"},[t._v(t._s(s.description))])])]),e("div",{staticClass:"dashed"}),s.getOver?e("div",{staticClass:"coupon-get coupon-get-disable"},[t._v(t._s(t.$t("skins.grab")))]):1===s.state?e("div",{staticClass:"coupon-get"},[t._v(t._s(t.$t("skins.have_received")))]):[s.maxUseTimePerUser-s.unReceiveCount>0?e("div",{staticClass:"coupon-get"},[t._v(t._s(2==t.style?t.$t("skins.continue_lead"):t.$t("skins.continue_receive")))]):e("div",{staticClass:"coupon-get"},[t._v(t._s(2==t.style?t.$t("skins.receive"):t.$t("skins.get_right_now")))])],e("div",{staticClass:"coupon-circle coupon-circle1",style:t.borderColorText(t.style,1,t.bgC)}),e("div",{staticClass:"coupon-circle coupon-circle2",style:t.borderColorText(t.style,2,t.bgC)})],2)])})),4==t.style?e("div",{staticClass:"space"},[e("div",{staticClass:"space-content"})]):t._e()],2):t.isDev&&!t.part.partProps.couponUnreceivedPic?e("div",{staticClass:"coupon-wrap--dev",style:t.imgStyle},[e("div",{class:["image-demo",{"right-angle":"right"===t.partProps.innerAngle}]})]):e("div",{staticClass:"coupon-wrap",style:[{fontSize:0},t.imgStyle]},[1==t.received?e("specialImage",{class:["img",{"right-angle":"right"===t.partProps.innerAngle}],attrs:{url:t.part.partProps.couponUnreceivedPic},on:{tap:t.receiveCoupon}}):t._e(),e("specialImage",{class:["img",{"img-hidden":0!=t.received},{"right-angle":"right"===t.partProps.innerAngle}],attrs:{url:t.part.partProps.couponReceivedPic},on:{tap:t.handleClick}}),e("specialImage",{class:["img",{"img-hidden":2!=t.received},{"right-angle":"right"===t.partProps.innerAngle}],attrs:{url:t.part.partProps.couponSoldoutPic},on:{tap:t.receiveCoupon}})],1)]):t._e()},o=[],i=s("e547"),n=i["a"],r=(s("51b7"),s("2877")),c=Object(r["a"])(n,a,o,!1,null,"5224f557",null);e["default"]=c.exports},"3c9b":function(t,e,s){"use strict";(function(t){var a=s("5530"),o=(s("a9e3"),s("120f"));e["a"]={components:{baseWrap:o["a"]},props:{partProps:{type:Object},spaceType:{type:String,default:"large"},pageStyleMode:{type:Number,default:1},showSpaceTop:{type:Boolean,default:!0},showBg:{type:Boolean},isDev:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hideSpace:{type:Boolean}},data:function(){return{props:{},spaceStyle:{}}},computed:{innerStyle:function(){var t={};return this.spaceStyle&&(t=Object(a["a"])(Object(a["a"])({},t),this.spaceStyle)),this.showBg&&(t=Object(a["a"])(Object(a["a"])({},t),this.cardBgStyle(this.props))),t}},watch:{partProps:{immediate:!0,handler:function(e){if(e){var s=Object(a["a"])({},e),o={};if(this.hideSpace)s.spaceLeft=0,s.spaceRight=0;else{var i=t.skinManager.getHomeDefalutMargin()||24;"number"!==typeof s.spaceLeft&&(s.spaceLeft=i),"number"!==typeof s.spaceRight&&(s.spaceRight=i)}"number"===typeof s.spaceLeft&&(o={paddingLeft:"".concat(t.toRem(s.spaceLeft),"rem")}),"number"===typeof s.spaceRight&&(o=Object(a["a"])(Object(a["a"])({},o),{},{paddingRight:"".concat(t.toRem(s.spaceRight),"rem")})),this.props=s,this.spaceStyle=o}},deep:!0}},methods:{cardBgStyle:function(){var t={};return this.partProps&&!this.partProps.hideModuleColor&&(t.backgroundColor=this.partProps.moduleColor||"white"),t}}}}).call(this,s("7189")["default"])},"51b7":function(t,e,s){"use strict";s("8957")},"5c03":function(t,e,s){},"64d2":function(t,e,s){},8957:function(t,e,s){},9528:function(t,e,s){},9587:function(t,e,s){"use strict";s("5c03")},9853:function(t,e,s){},b023:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return t.ignoreLazy?e("div",{staticClass:"special-img"},[t.norImgUrl?e("img",{ref:"pic",staticClass:"img img--normal",attrs:{src:t.norImgUrl},on:{load:t.handleImgLoad,click:function(e){return e.stopPropagation(),t.handleTap.apply(null,arguments)}}}):t._e(),t.gifImgUrl?e("img",{staticClass:"img img--gif",attrs:{src:t.gifImgUrl},on:{click:function(e){return e.stopPropagation(),t.handleTap.apply(null,arguments)}}}):t._e()]):e("div",{staticClass:"special-img"},[t.norImgUrl?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.norImgUrl,expression:"norImgUrl"}],ref:"pic",staticClass:"img img--normal",on:{load:t.handleImgLoad,click:function(e){return e.stopPropagation(),t.handleTap.apply(null,arguments)}}}):t._e(),t.gifImgUrl?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.gifImgUrl,expression:"gifImgUrl"}],staticClass:"img img--gif",on:{click:function(e){return e.stopPropagation(),t.handleTap.apply(null,arguments)}}}):t._e()])},o=[],i=s("fae7"),n=i["a"],r=(s("b277"),s("2877")),c=Object(r["a"])(n,a,o,!1,null,"5ecb013a",null);e["a"]=c.exports},b277:function(t,e,s){"use strict";s("9853")},e49e:function(t,e,s){"use strict";(function(t){s("a9e3");var a=[{small:{top:0,bottom:24},middle:{top:0,bottom:0},large:{top:0,bottom:0}},{small:{top:0,bottom:32},middle:{top:0,bottom:32},large:{top:0,bottom:48}},{small:{top:0,bottom:24},middle:{top:0,bottom:24},large:{top:0,bottom:24}},{small:{top:0,bottom:32},middle:{top:0,bottom:32},large:{top:0,bottom:48}}];e["a"]={props:{pageStyleMode:{type:Number,value:1},position:{type:String,default:"top"},spaceType:{type:String,default:"large"},spaceSize:{type:[Number,String],default:""},offset:{type:Number,default:0},isDev:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1}},data:function(){return{}},computed:{heightCalc:function(){var e=0;if("number"===typeof this.spaceSize)e=this.spaceSize;else{var s=a[(this.pageStyleMode||1)-1];e=s[this.spaceType||"large"][this.position||"top"]||0}return this.aaa=e-this.offset,"".concat(t.toRem(e-this.offset),"rem")}}}}).call(this,s("7189")["default"])},e547:function(t,e,s){"use strict";(function(t){var a=s("5530"),o=(s("a9e3"),s("d3b7"),s("159b"),s("ef16")),i=s("1041"),n=s("b023"),r=s("a8f5"),c=s("f354");e["a"]={mixins:[c["a"],i["a"]],components:{innerWrap:o["a"],specialImage:n["a"]},props:{part:{type:Object},isDev:{type:Boolean,default:!1},pageStyleMode:{type:Number},isActive:{type:Boolean,default:!1}},watch:{part:"getCoupons"},mounted:function(){this.getCoupons()},beforeDestroy:function(){this.bs&&this.bs.destroy&&this.bs.destroy()},computed:{partProps:function(){var e=Object(a["a"])({},this.part&&this.part.partProps||{}),s=e.hideSpaceAround;if(2===e.styleType)if(s)e.innerAngle="right",e.spaceRight=0,e.spaceLeft=0;else{var o=t.skinManager.getHomeDefalutMargin()||24;"number"!==typeof e.spaceLeft&&(e.spaceLeft=o),"number"!==typeof e.spaceRight&&(e.spaceRight=o)}return e},hideSpaceAround:function(){return this.partProps.hideSpaceAround||!1},styleModeClass:function(){return 1===this.pageStyleMode||3===this.pageStyleMode?"coupons-main-normal":""},cardBgStyle:function(){var t={};return 1!==this.pageStyleMode&&3!==this.pageStyleMode||this.partProps&&!this.partProps.hideModuleColor&&(t.backgroundColor=this.partProps.moduleColor||"white"),t},bgC:function(){var t=this.partProps||{},e=t.hideModuleColor,s=void 0!==e&&e;return s?this.bgColor:"white"},rightAngle:function(){var t=this.partProps||{},e=t.innerAngle,s=void 0===e?"right":e;return"right"===s},hotAreasWidth:function(){return"number"===typeof this.partProps.spaceLeft&&"number"===typeof this.partProps.spaceRight?750-this.partProps.spaceLeft-this.partProps.spaceRight:750},imgStyle:function(){var e={paddingRight:"".concat(t.toRem(this.partProps.spaceRight||0),"rem"),paddingLeft:"".concat(t.toRem(this.partProps.spaceRight||0),"rem")};return e}},name:"shop-coupon",data:function(){return{couponList:[],list:[],showCoupon:!1,style:1,isXhr:!1,dataMock:{id:"",amount:1e3,state:0,description:this.$t("skins.full_available_nine"),symbol:"¥",title:this.$t("skins.coupon_name")},ids:[],dataLoaded:!1,click:!1,received:1}},methods:{getPartData:function(){var e=this;if(this.part&&this.part.partId){var s=this.part.partId;t.request({method:"get",url:"/api/prod/shophomepartdata?PartId=".concat(s)}).then((function(t){if(t.list&&t.list.length){var s=[],a=0,o=t.list;o.forEach((function(t){1!=t.canReceivedCoupon||a?1!=t.canReceivedCoupon&&2==t.status&&(a=1):a=1,s.push(t.batchCode)}));var i=o.every((function(t){return 2===t.couponStatus}));if(i){var n=o.some((function(t){return t.userReceivedCount>0}));n||(a=2)}e.received=a,e.couponList=t.list,e.ids=s,e.dataLoaded=!0,e.showCoupon=!0}else e.showCoupon=!1})).catch((function(t,s){e.showCoupon=!1}))}},getCoupons:function(){var e=this;return this.isDev?(this.showCoupon=!0,this.list=this.handleDevData(3),void(this.style=this.list.length>3?4:this.list.length)):this.part&&this.part.partProps&&2===this.part.partProps.styleType&&this.part.partProps.couponUnreceivedPic?(this.showCoupon=!0,void this.getPartData()):void t.request({method:"get",url:"/api/prod/shopcouponlist",data:{notUserCoupon:!0}}).then((function(t){t.coupons&&t.coupons.length?(e.list=t.coupons,e.showCoupon=!0,e.style=t.coupons.length>3?4:t.coupons.length):e.showCoupon=!1})).catch((function(t){console.log(t.message),e.showCoupon=!1}))},getCoupon:function(e,s){var o=this;e.id&&1!==e.state&&(e.getOver?t.showToast({title:this.$t("skins.sorry_coupon_grab"),icon:"none"}):(this.isXhr=!0,t.showLoading({title:this.$t("skins.received")}),t.ylog.send(Object(a["a"])({action_type:"click",sub_module_name:"recv",coupon_id:e.id},this.ylogParams)),t.request({method:"post",url:"/api/usercenter/sqreceivecoupon",data:{batchCode:e.id}}).then((function(e){o.isXhr=!1,e.result&&1===e.result?(t.hideLoading(),t.showToast({title:o.$t("skins.receive_success")}),o.getCoupons()):(t.hideLoading(),t.showToast({title:e.errorMessage||o.$t("skins.receive_again")}))})).catch((function(e){t.hideLoading(),o.isXhr=!1,t.showToast({title:e.message||o.$t("skins.receive_again")})}))))},borderColorText:function(t,e,s){var a=s||"#FFFFFF",o={};return 1===t||2===t?1===e?(o.borderTopColor=a,o.background=a):(o.borderBottomColor=a,o.background=a):1===e?(o.borderLeftColor=a,o.background=a):(o.borderRightColor=a,o.background=a),o},handleDevData:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=[],s=0;s<t;s+=1)e.push(Object(a["a"])(Object(a["a"])({},this.dataMock),{},{id:"FF".concat(s+1)}));return e},receiveCoupon:function(e){var s=this,o=t.auth.islogin();if(o)if(2!=this.received){if(this.couponList&&this.couponList[0].lastTimeDesc&&Math.floor(new Date/1e3)<this.couponList[0].lastTime)t.showToast({title:this.couponList[0].lastTimeDesc,icon:"none"});else if(!this.click){this.click=!0;var i={};i.batchCodes=this.ids,t.showLoading({title:this.$t("common.loading",["..."])}),t.ylog.send(Object(a["a"])({action_type:"click",sub_module_name:"recv",coupon_id:i.batchCodes},this.ylogParams)),t.request({method:"post",url:"/api/usercenter/sqreceivecoupon",data:i}).then((function(e){s.click=!1,t.hideLoading(),e.result&&(s.received=0,s.customCouponPic=s.partProps.couponReceivedPic),t.showToast({title:1===e.result?s.$t("skins.receive_success"):s.$t("skins.receive_failure"),icon:"none"})})).catch((function(e){s.click=!1,t.hideLoading(),s.getPartData(),t.showToast({title:e.message,icon:"none"})}))}}else t.showToast({title:this.$t("skins.sorry_coupon_grab"),icon:"none"});else t.auth.tologin()},handleClick:function(t){this.part&&this.part.partProps&&this.part.partProps.couponLinkData&&Object(r["b"])(this.part.partProps.couponLinkData,this)}}}}).call(this,s("7189")["default"])},eca1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{class:["container",{"container--dev":t.isDev&&t.isActive}],style:{height:t.heightCalc}})},o=[],i=s("e49e"),n=i["a"],r=(s("2bde"),s("2877")),c=Object(r["a"])(n,a,o,!1,null,"5235f330",null);e["default"]=c.exports},eeef:function(t,e,s){"use strict";s("64d2")},ef16:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("base-wrap",{attrs:{partProps:t.props,spaceType:t.spaceType,showSpaceTop:t.showSpaceTop,pageStyleMode:t.pageStyleMode,isDev:t.isDev,isActive:t.isActive}},[e("div",{staticClass:"wrap",style:t.innerStyle},[t._t("default")],2)])},o=[],i=s("3c9b"),n=i["a"],r=(s("9587"),s("2877")),c=Object(r["a"])(n,a,o,!1,null,"82a34ad8",null);e["a"]=c.exports},f354:function(t,e,s){"use strict";(function(t){var a=s("5530"),o=(s("caad"),s("2532"),s("d3b7"),s("b00c")),i=function(){},n={props:{isDev:{type:Boolean,default:!1},pageData:{type:Object,default:function(){return{}}},ylogParams:{type:Object,default:function(){return{}}}},methods:{getLinkData:function(t){var e=this.pageData&&this.pageData.tempCode||"";return[o["c"].BRAND_SUBJECT,o["c"].INBUY_SUBJECT].includes(e)&&(t.partId=this.part.partId||"",o["c"].BRAND_SUBJECT===e&&(t.brandId=this.pageData.brandId||""),o["c"].INBUY_SUBJECT===e&&(t.activityId=this.activityId||"",t.activityType=this.activityType||"")),t},fetchPartData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.part,o=s.partId,i=s.dataItems,n=s.partProps;return this.isDev?Promise.resolve({list:i||[],partProps:n}):o?t.request({url:"/api/prod/shophomepartdata",method:"get",params:Object(a["a"])(Object(a["a"])({},e),{},{PartId:o})}):Promise.reject({message:"partId 不存在"})},fetchPartCenterData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.part,o=s.dataItems,i=s.partProps;return this.isDev?Promise.resolve({list:o||[],partProps:i}):t.request({url:"/api/prod/shopcouponcentercouponlist",method:"get",params:Object(a["a"])({},e)})},getDatas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=this.part,o=a.partId,n=a.dataItems,r=a.partProps;this.isDev?e({list:n||[],partProps:r}):o?t.request({url:"/api/prod/shophomepartdata?PartId=".concat(o),method:"get"}).then((function(t){e(t||{})})).catch((function(t){s(t)})):s({message:"partId 不存在"})}}};e["a"]=n}).call(this,s("7189")["default"])},fae7:function(t,e,s){"use strict";(function(t){var a=s("a026"),o=s("caf9");a["default"].use(o["a"]),e["a"]={props:{dataset:{type:Object,default:function(){return{}}},ignoreLazy:{type:Boolean,default:!1},url:{type:String}},data:function(){return{norImgUrl:"",gifImgUrl:""}},watch:{url:{immediate:!0,handler:function(e){var s=t.parseImgUrl(e),a=s.imgUrl,o=s.maskUrl,i=void 0===o?"":o;this.norImgUrl=a,this.gifImgUrl=i}}},methods:{handleImgLoad:function(){this.$emit("load",this.$refs.pic.clientHeight),this.$emit("updateImageHeight",{height:this.$refs.pic.naturalHeight,width:this.$refs.pic.naturalWidth},this.dataset)},handleTap:function(t){this.$emit("tap",t)}}}}).call(this,s("7189")["default"])}}]);