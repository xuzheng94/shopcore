(function(t){function e(e){for(var a,o,n=e[0],c=e[1],d=e[2],u=0,h=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(h.length)h.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,n=1;n<i.length;n++){var c=i[n];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={"pages/search":0},r=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(){return Promise.resolve()},o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var l=c;r.push([112,"chunk-vendors","chunk-common"]),i()})({"0810":function(t,e,i){"use strict";i("a254")},"0a93":function(t,e,i){"use strict";i("f86b")},112:function(t,e,i){t.exports=i("dded")},"9f1b":function(t,e,i){},a254:function(t,e,i){},b521:function(t,e,i){"use strict";i("9f1b")},dded:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("56d7"),s=(i("b0c0"),function(){var t=this,e=t._self._c;return t.isLoad?e("div",{class:["search",{"search-product-all":"productall"==t.sourcePage}],style:t.pageThemeStyle},[t.showPage?e("div",[e("div",{staticClass:"wrap-top"},[e("filter-bar",{attrs:{selectedListSearch:t.selectedList,recWord:t.recWord,sourcePage:t.sourcePage,isShowProduct:t.isShowProduct,source:"search",filterList:t.filterList,isFilterFixed:!!t.prodSearchListConfig.isFilterFixed},on:{getSearchResult:t.getSearchResult,handleFocus:t.handleFocus,handleInput:t.handleInput,setStorageKeyword:t.setStorageKeyword,handleCancelBtn:t.handleCancelBtn,clickSearch:t.clickSearch}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.brandInfo&&t.brandInfo.brandId&&t.isShowProduct,expression:"brandInfo && brandInfo.brandId && isShowProduct"}],staticClass:"search-brand",attrs:{slot:"searchBrand"},slot:"searchBrand"},[e("div",{staticClass:"brand-bg-div"},[t.brandInfo.brandBannerUrl?e("div",{staticClass:"brand-bg-img"},[e("img",{attrs:{src:t.brandInfo.brandBannerUrl,alt:""}})]):t._e(),e("div",{class:["brand-info",{"brand-info-div":!!t.brandInfo.brandBannerUrl}]},[e("div",{staticClass:"brand-avatar"},[t.brandInfo.brandLogoUrl?e("img",{attrs:{src:t.brandInfo.brandLogoUrl,alt:""}}):e("img",{attrs:{src:i("7f53"),alt:""}})]),e("div",{staticClass:"brand-right-info"},[e("div",{staticClass:"brand-name van-ellipsis"},[t._v(t._s(t.brandInfo.brandName))]),e("div",{staticClass:"brand-country-info"},[e("div",{staticClass:"country-left"},[e("img",{staticClass:"country-flag",attrs:{src:t.brandInfo.countryFlag,alt:""}}),e("div",{staticClass:"country-name"},[t._v(t._s(t.brandInfo.countryName))]),e("div",{staticClass:"brand-line"})]),e("div",{staticClass:"country-right"},[e("i18n",{attrs:{path:"search.on_sale",tag:"div"}},[e("span",{attrs:{place:"productCount"}},[t._v(t._s(t.brandInfo.productCount))])])],1)])])])]),t.brandInfo.brandDescription?e("div",[e("brand-description",{attrs:{"brand-description":t.brandInfo.brandDescription}})],1):t._e(),e("div",{staticClass:"brand-bottom"})])])],1),t.isShowProduct?t._e():[e("div",{class:["container-search",{"container-product-all":"productall"==t.sourcePage}]},[t.latestList&&t.latestList.length>0?e("div",{staticClass:"content-container"},[e("div",{staticClass:"head"},[e("label",{staticClass:"title"},[t._v(t._s(t.$t("search.recent_search")))]),e("img",{staticClass:"delete",attrs:{src:i("a45e")},on:{click:t.onDelete}})]),e("div",{staticClass:"item-container"},t._l(t.latestList,(function(i,a){return e("div",{key:a,staticClass:"item"},[e("span",{on:{click:function(e){return t.onSearchClick(i)}}},[t._v(t._s(i))])])})),0)]):t._e(),t.hotList&&t.hotList.length>0?e("div",{staticClass:"content-container"},[e("div",{staticClass:"head"},[e("label",{staticClass:"title"},[t._v(t._s(t.$t("search.hot_search")))])]),e("div",{staticClass:"item-container"},t._l(t.hotList,(function(i,a){return e("div",{key:a},[1==i.type?e("div",{staticClass:"item"},[e("span",{on:{click:function(e){return t.onSearchClick(i.name)}}},[t._v(t._s(i.name))])]):t._e()])})),0)]):t._e()])],e("van-pull-refresh",{attrs:{"animation-duration":"1500","head-height":"60"},on:{refresh:t.pullRefresh},scopedSlots:t._u([{key:"pulling",fn:function(t){return[e("div")]}},{key:"loosing",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0},{key:"loading",fn:function(){return[e("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0}],null,!1,1883122893),model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.isShowProduct?[t.searchResult&&t.searchResult.type?e("div",{staticClass:"result_nor_container"},[1==t.searchResult.type||4==t.searchResult.type?e("div",{staticClass:"desc"},[t._v(t._s(t.searchResult.desc))]):t._e(),2==t.searchResult.type||3==t.searchResult.type?e("div",{staticClass:"keyword-container"},[2==t.searchResult.type?e("div",{staticClass:"tip-container"},[e("i18n",{attrs:{path:"search.the_following",tag:"span"}},[e("span",{staticClass:"keyword",attrs:{place:"keyword"}},[t._v(t._s(t.queryObj.keyword||""))])])],1):e("div",{staticStyle:{height:"8px"}}),t.searchResult.recWords&&t.searchResult.recWords.length>0?e("div",{staticClass:"recword-container"},[e("p",[t._v(t._s(t.$t("search.looking_for")))]),e("p",{staticClass:"recword",on:{click:function(e){return t.onSearchClick(t.searchResult.recWords[0])}}},[t._v(t._s(t.searchResult.recWords[0]))])]):t._e()]):t._e()]):t._e(),e("div",{staticClass:"search__result"},[1===t.prodSearchListConfig.productStyle?e("product-list-single",{attrs:{prodList:t.prodList,prodBtnType:t.prodSearchListConfig.showCart?"cart":"",prodSkinData:t.prodSkinData,isShowTaxTag:""},on:{handleRightBtn:t.handleAddBtn}}):e("product-list-card",{attrs:{prodList:t.prodList,prodType:2,hasShadow:"",isShowTaxTag:"",prodSkinData:t.prodSkinData,showAddBtn:!!t.prodSearchListConfig.showCart&&"cart"},on:{handleAddBtn:t.handleAddBtn}})],1),t.prodList.length>0?e("load-more",{attrs:{hasMore:t.loadMore,loading:t.isXhr&&t.pageIndex>0}}):t._e()]:t._e()],2),"productall"==t.sourcePage?e("tabnav",{ref:"tabnav"}):t._e(),t.skus&&t.skuDefault.showSkuPop?e("selectsku",{attrs:{skus:t.skus,skuDefault:t.skuDefault,isFromTuan:!1,saleActivityTitles:t.isBrandPriceType?t.saleActivityTitles:[],productDetailInfo:t.productDetailInfo},on:{skuConfirmCB:t.skuConfirmCB,showSkuFunc:t.showSkuFunc}}):t._e(),e("storeDialog",{attrs:{shopDetailDto:t.shopDetailDto},on:{hideDialog:t.handleHidetoreDialog},model:{value:t.showStoreDialog,callback:function(e){t.showStoreDialog=e},expression:"showStoreDialog"}})],2):t._e(),t.watermarkText?e("watermark",{attrs:{watermarkText:t.watermarkText}}):t._e()],1):t._e()}),r=[],o=i("eee3"),n=o["a"],c=(i("0810"),i("b521"),i("2877")),d=Object(c["a"])(n,s,r,!1,null,"1733affe",null),l=d.exports;i.p=publicPath,Object(a["a"])(l)},eee3:function(t,e,i){"use strict";(function(t){i("e17f");var a=i("2241"),s=i("5530"),r=(i("ab71"),i("58e6")),o=(i("ac1f"),i("841c"),i("a434"),i("99af"),i("c96a"),i("1276"),i("fb6a"),i("b68d")),n=i("603c"),c=i("191e"),d=i("cd92"),l=i("68a7"),u=i("fec4"),h=i("bcb3"),f=i("c08d"),p=i("bce3"),g=i("ed08"),y=i("13cb"),v=i("fa0c"),I=i("566a"),m=i("a8f5"),b=i("8efd");e["a"]={name:"Search",components:{productListCard:d["a"],productListSingle:l["a"],filterBar:y["a"],loadMore:p["a"],brandDescription:v["a"],tabnav:h["a"],selectsku:u["a"],storeDialog:I["a"],"van-pull-refresh":r["a"],pullRefreshLoading:f["a"],watermark:b["a"]},mixins:[n["a"],c["a"],o["a"]],data:function(){return{showPage:!0,prodList:[],isXhr:!1,maxPageIndex:1,pageIndex:1,loadMore:!0,fromCategory:!1,partId:"",category:{},selectedList:{},filterList:{},brandInfo:{},queryObj:{},searchResult:{},recWord:"",isShowProduct:!1,latestList:[],hotList:[],sourcePage:"default",skus:[],skuDefault:{showSkuPop:!1,skuType:1,pic:"",price:"",selectId:"",foreign:!1,symbol:""},saleActivityTitles:[],prodCurrent:{},pageTitle:"",showStoreDialog:!1,shopDetailDto:null,productDetailInfo:{},isLoading:!1,isLoad:!1,watermarkText:"",topicId:""}},computed:{isBrandPriceType:function(){return t.store.isBrandPriceType}},watch:{prodSearchListConfig:{deep:!0,handler:function(t){t&&this.setWxShare(t)},immediate:!0}},created:function(){this.initData(!0)},onReachBottom:function(){this.isShowProduct&&(this.isDev||this.isXhr||!this.loadMore||(this.pageIndex+=1,this.getSearchResult({needClearOldData:!1,refreshProduct:!0})))},methods:{initData:function(e){var i=this,a=this.handleQuery(),r=a.fromCategory,o=a.data,n=a.partId,c=a.topicId,d=a.showBaseBrand;this.partId=n,this.topicId=c;var l={},u=g["a"].parseLocator(window.location.search,"lower"),h="";this.sourcePage=u.sourcepage||"",r?(h=o.title||this.$t("search.classify"),t.setNavigationBarTitle({title:h}),this.category=Object(s["a"])({},o),"undefined"!==typeof o.brandId&&(l={brandList:[o.brandId]})):(this.category={},"productall"==this.sourcePage?(h=this.$t("search.all_goods"),t.setNavigationBarTitle({title:h})):(h=this.$t("search.search"),t.setNavigationBarTitle({title:h}))),this.pageTitle=h,g["a"].isBlank(l)||d?this.loadData(u,l):this.getbrandextendinfo(l.brandList).then((function(t){var e=t[0];1===e.subjectType?Object(m["b"])({linkType:53,linkVal:e.pageId,linkText:"search"}):2===e.subjectType?Object(m["b"])({linkType:4,linkVal:e.pageId,linkText:"search"}):i.loadData(u,l)})).catch((function(t){i.loadData(u,l)}))},pullRefresh:function(){this.initData()},setWxShare:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.shareContent){var i={title:e.shareContent};t.wxShare(i)}},keyWordSearch:function(){if(!g["a"].isBuyerApp&&this.sourcePage&&"default"==this.sourcePage){var t=g["a"].delParam(window.location.href,["sourcePage"]);history.replaceState(null,"",t)}},loadData:function(e,i){this.isLoad=!0,this.latestList=t.getStorageSync("latestList")||[],e.sourcepage&&"default"===e.sourcepage?this.isShowProduct=!1:(this.isShowProduct=!0,this.getSearchResult({needClearOldData:!0,refreshProduct:!0,selectedList:i})),this.getHotList()},getHotList:function(){var e=this;t.request({url:"/api/prod/hotwords"}).then((function(t){e.hotList=t.list||[]})).catch((function(e){t.hideLoading(),t.showToast({title:e.message||e.msg||""})}))},getbrandextendinfo:function(e){return t.request({method:"POST",url:"/api/prodextra/getbrandextendinfo",data:{brandIds:e}})},setStorageList:function(e,i){var a=t.getStorageSync(e)||[],s=a.indexOf(i);-1!=s&&a.splice(s,1),a&&a.length>=5&&a.pop(),a.unshift(i),t.setStorageSync(e,a)},setStorageKeyword:function(t){this.keyWordSearch(),console.log("value",t),this.setStorageList("latestList",t)},onDelete:function(){var e=this;a["a"].confirm({title:this.$t("search.sure_delete")}).then((function(){t.removeStorageSync("latestList"),e.latestList=t.getStorageSync("latestList")||[]})).catch((function(){}))},clickSearch:function(){"default"!==this.sourcePage&&(this.isShowProduct=!1)},onSearchClick:function(t){this.keyWordSearch(),this.setStorageList("latestList",t),this.recWord=t||"",this.getSearchResult({needClearOldData:!0,refreshProduct:!0,recWordKeyword:t})},handleFocus:function(){"default"===this.sourcePage?this.isShowProduct=!1:this.isShowProduct=!0,this.latestList=t.getStorageSync("latestList")||[],setTimeout((function(){document.documentElement.scrollTop=document.body.scrollTop=0}),200)},handleInput:function(t){this.recWord=t||""},handleCancelBtn:function(){var t=this;setTimeout((function(){t.recWord="",t.isShowProduct=!0}),100)},handleQuery:function(){var t=window.location.search,e=g["a"].qs.parse(t.substring(1)||""),i={},a={};if(e.item)try{a=JSON.parse(decodeURIComponent(e.item))}catch(s){a=e.item}return i.firstCategoryId=a.firstCategoryId||"",i.secondCategoryId=a.secondCategoryId||"",i.thirdCategoryId=a.thirdCategoryId||"",i.title=a.title||"","undefined"!==typeof a.brandId&&(delete i.secondCategoryId,i.brandId=a.brandId,i.firstCategoryId=a.firstCategoryId||e.firstCategoryId||0),{fromCategory:!!e.item,data:i,partId:e.partId||"",topicId:e.topicId||"",showBaseBrand:e.showBaseBrand||!1}},getSearchResult:function(e){var i=this,a=e.needClearOldData,r=e.queryObj,o=e.selectedList,n=e.refreshProduct,c=e.showloading,d=e.changeKeyword,l=e.recWordKeyword;this.pageIndex=a?1:this.pageIndex,this.isShowProduct=!0,r&&(this.queryObj=Object(s["a"])({},r)),t.isBlank(o)||(this.selectedList=o);var u=Object(s["a"])(Object(s["a"])({},this.queryObj),{},{pageIndex:this.pageIndex,refreshProduct:n});if(!this.isXhr){this.selectedList&&(t.isBlank(this.selectedList.brandList)||(u.brandList=this.selectedList.brandList),t.isBlank(this.selectedList.categoryList)||(u.thirdCategoryList=this.selectedList.categoryList,u.firstCategoryList=[],u.secondCategoryList=[]),u.minPrice=this.selectedList.minPrice,u.maxPrice=this.selectedList.maxPrice),l&&(u.keyword=encodeURIComponent(l)||""),u.keyword||delete u.keyword,this.partId?(this.category.firstCategoryId?u.customFirstCategoryId=this.category.firstCategoryId||"":delete u.customFirstCategoryId,this.category.secondCategoryId?u.customSecondCategoryId=this.category.secondCategoryId||"":delete u.customSecondCategoryId,this.category.thirdCategoryId?u.customThirdCategoryId=this.category.thirdCategoryId||"":delete u.customThirdCategoryId):this.category.thirdCategoryId?u.thirdCategoryList=[this.category.thirdCategoryId]:(this.category.firstCategoryId&&(u.firstCategoryList=[this.category.firstCategoryId]),this.category.secondCategoryId&&(u.secondCategoryList=[this.category.secondCategoryId])),c&&t.showLoading(),this.isXhr=!0;var h="/api/nodesearch/sqsearch";this.partId&&(u.partId=this.partId),this.topicId&&(u.partId=this.topicId),console.log("query",u),t.request({url:h,method:"post",data:u}).then((function(e){if(i.isLoading=!1,i.isXhr=!1,i.showPage=!0,c&&t.hideLoading(),n){if((e.filterList&&t.isBlank(i.filterList)||d)&&(i.filterList=Object(s["a"])({},e.filterList||{})),e.activityInfo&&e.activityInfo.imageWaterMark&&i.getUserInfo(),(!e.list||!e.list.length)&&(!i.prodList.length||a))return void(a&&(i.prodList=[]));1==u.pageIndex&&(e.brandInfoList&&e.brandInfoList.length?i.brandInfo=e.brandInfoList[0]||{}:i.brandInfo={});var r=e.list||[],l=i.prodList,h=a?r:l.concat(r),f=!e.list||0===e.list.length,p=e.count||0;i.prodList=h,i.searchResult=e.searchResult||{},i.maxPageIndex=p,i.prodListEmpty=f,i.selectedList=(!o&&e.selectedList?e.selectedList:i.selectedList)||{},i.loadMore=u.pageIndex<p&&!f}})).catch((function(e){i.isXhr=!1,i.isLoading=!1,i.showPage=!0,c&&t.hideLoading(),t.showToast({title:e.message||i.$t("search.search_failed")})}))}},handleAddBtn:function(e){var i=this;t.showLoading({title:this.$t("makeup.request_specification")}),this.prodCurrent=e,t.request({url:"/api/prod/sqdetail?productid=".concat(e.id),method:"get"}).then((function(e){if(t.hideLoading(),!t.isBlank(e)){var a="",s=!1,r=!1,o=e.activityInfo&&2===e.activityInfo.state;e.price.interval[0]!==e.price.interval[1]&&(a=i.$t("makeup.rise"));var n=e.activityInfo&&e.activityInfo.state<2;e.activityInfo&&5===e.activityInfo.type&&0===e.activityInfo.state&&(n=!1),n&&e.activityInfo&&(4===e.activityInfo.type||6===e.activityInfo.type?(0===e.activityInfo.state&&(r=!0),s=!0):1===e.activityInfo.state&&(s=!0)),3==e.nationType&&(e.price.foreign=!1),i.skus=e.skus,i.skuDefault.showSkuPop=!0,i.skuDefault.pic=e.picList[0].small,i.skuDefault.price=e.price.interval[0],i.skuDefault.interval=a,i.skuDefault.exchangePrice=e.price.exchange?e.price.exchange[0]:"",i.skuDefault.foreign=e.price.foreign,i.skuDefault.symbol=e.price.symbol,i.skuDefault.minNum=e.minOrderNum,i.skuDefault.type=s?3:0,i.skuDefault.skuShowOriginalPrice=r,i.skuDefault.activitySaleout=o,i.skuDefault.vipLogo=e.memberGrade&&e.memberGrade.logoUrl,i.skuDefault.subsidyInterval=e.price.subsidyPrice&&e.price.subsidyPrice[0]!=e.price.subsidyPrice[1]?i.$t("makeup.rise"):"",i.skuDefault.vipInterval=e.price.vipPrice&&e.price.vipPrice[0]!=e.price.vipPrice[1]?i.$t("makeup.rise"):"",i.skuDefault.subsidyExchangePrice=e.price.subsidyExchangePrice&&e.price.subsidyExchangePrice[0],i.skuDefault.vipExchangePrice=e.price.vipExchangePrice&&e.price.vipExchangePrice[0],i.skuDefault.vipPrice=e.price&&e.price.vipPrice&&e.price.vipPrice[0],i.skuDefault.subsidyPrice=e.price.subsidyPrice&&e.price.subsidyPrice[0],i.productDetailInfo=e,e.saleChannel?(i.skuDefault.skuType=10,i.skuDefault.confirmName=i.$t("item.store_buy"),i.shopDetailDto=e.shopDetailDto||null,i.skuDefault.inQualificationsGroup=!1,i.skuDefault.inDrawLots=!1):e.vipNotCanBuyGroup&&e.vipNotCanBuyGroup.inGroup&&2==e.vipNotCanBuyGroup.groupStatus?(i.skuDefault.skuType=11,i.skuDefault.confirmName=e.vipNotCanBuyGroup.nextCanBuyDesc,i.shopDetailDto=null,i.skuDefault.inQualificationsGroup=!1,i.skuDefault.inDrawLots=!1):0==e.state&&e.inQualificationsGroup?(i.skuDefault.inQualificationsGroup=!0,i.skuDefault.skuType=12,i.shopDetailDto=null):e.activityInfo&&25===e.activityInfo.type?(i.skuDefault.inDrawLots=!0,i.skuDefault.skuType=13,i.shopDetailDto=null):(i.skuDefault.skuType=2,i.skuDefault.confirmName="",i.shopDetailDto=null,i.skuDefault.inQualificationsGroup=!1,i.skuDefault.inDrawLots=!1),i.skuDefault.moneyoffQualificationsStatus=!0,i.loadSellerInfo(e)}})).catch((function(e){t.hideLoading(),t.showToast({title:e.message||e.msg||i.$t("makeup.failed_specifications")})}))},addCart:function(e){var i=this,a={catalogid:e.CatalogId,purchasenum:e.purchasenum,deliverytype:e.deliveryType,checked:!0};t.request({method:"POST",url:"/api/trading/sqscartprod",data:a}).then((function(e){e.success?(t.showToast({title:i.$t("makeup.added_cart_successfully"),icon:"success",className:"longToast"}),i.getSearchResult({needClearOldData:!1,refreshProduct:!1})):t.showToast({title:e.msg||i.$t("makeup.added_cart_successfully")})})).catch((function(e){t.showToast({title:e.message||i.$t("makeup.failed_add_cart")})}))},skuConfirmCB:function(e){var i=this,a=this;if(a.showSkuFunc(!1),10!=e.skuType){if(11!=e.skuType)return 12==e.skuType?t.auth.islogin()?void(t.isMiniApp?wx.miniProgram.navigateTo({url:"/pages/item/item?productId=".concat(this.productDetailInfo.id)}):t.navigateTo({url:"/pages/item/main?productId=".concat(this.productDetailInfo.id)})):void t.auth.tologin():void(13!=e.skuType?t.auth.islogin()?t.auth.authBindMobile().then((function(){var s={CatalogId:e.catalogId,Sale4Price:e.purchaseprice,purchasenum:e.purchasenum,deliveryType:e.deliveryType};t.ylog.send({action_type:"click",module_name:"specification",sub_module_name:"add_to_shoppingcart",sproductid:i.prodCurrent.id,catalog:s.CatalogId}),a.checkData()&&a.addCart(s)})):t.auth.tologin():t.isMiniApp?wx.miniProgram.navigateTo({url:"/subPackage2/pages/activityItem/activityItem?productId=".concat(this.productDetailInfo.id,"&activityId=").concat(this.productDetailInfo.activityInfo&&this.productDetailInfo.activityInfo.activityId)}):t.showToast({title:this.$t("components.selectsku.goto_programs_qualification")}));this.vipDisableConfirm()}else this.handleShowStoreDialog()},showSkuFunc:function(t){this.skuDefault.showSkuPop=!!t},loadSellerInfo:function(e){var i=this;if(e||e.price){var a={productId:e.id,currency:e.price.currency,symbol:e.price.symbol,effectActivityInfo:e.effectActivityInfo,activityInfo:e.activityInfo,brandId:e.brandId,categoryId:e.categoryId,masterCategoryId:e.masterCategoryId,thirdCategoryId:e.thirdCategoryId,domestic:e.domestic,nationType:e.nationType,tariffType:e.tariffType};t.request({url:"/api/prodpromo/getSellerInfo",data:a,method:"post"}).then((function(e){200!==e.code&&t.showToast({title:e.message||i.$t("makeup.failed_information")});var a=e.data,s=[];a.saleActivity&&a.saleActivity[0]&&a.saleActivity[0].title&&(s=a.saleActivity[0].title.split(",")),i.sellerInfo=a,i.saleActivityTitles=s})).catch((function(e){t.showToast({title:e.message||i.$t("makeup.failed_information")})}))}},handleShowStoreDialog:function(){this.showStoreDialog=!0},handleHidetoreDialog:function(){this.showStoreDialog=!1},checkData:function(){return 1==this.productDetailInfo.state&&this.productDetailInfo.activityInfo&&0==this.productDetailInfo.activityInfo.state?(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1):!this.productDetailInfo.activityInfo||4!=this.productDetailInfo.activityInfo.type&&6!=this.productDetailInfo.activityInfo.type&&21!=this.productDetailInfo.activityInfo.type&&24!=this.productDetailInfo.activityInfo.type&&22!=this.productDetailInfo.activityInfo.type||0!=this.productDetailInfo.activityInfo.state||(t.showToast({title:this.$t("item.sorry_started"),icon:"none"}),!1)},vipDisableConfirm:function(e){this.productDetailInfo&&(this.productDetailInfo.vipNotCanBuyGroup&&this.productDetailInfo.vipNotCanBuyGroup.inGroup&&this.productDetailInfo.vipNotCanBuyGroup.isVip?t.navigateTo({url:"/pages/membercenter/main"}):t.showToast({title:this.productDetailInfo.vipNotCanBuyGroup.nextCanBuyDesc,icon:"none"}))},getUserInfo:function(){var e=this;t.request("/api/usercenter/squserinfo").then((function(i){if(i){var a=i.nickname||"";a=a.slice(0,8),e.watermarkText="内购严禁转发 ID".concat(t.auth.getValue("userId")," ").concat(a)}})).catch((function(e){t.showToast({title:e.msg||e.message})}))}}}}).call(this,i("7189")["default"])},f86b:function(t,e,i){},fa0c:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return t.brandDescription?e("div",{staticClass:"brand-desc"},[e("div",{ref:"sub-title-wrapper",class:["brand-desc-info",{mesFolding:t.isMesFolding}]},[e("div",{ref:"sub-title-content",staticClass:"text"},[t._v(t._s(t.brandDescription))]),t.isShowArrowIcon?e("div",{on:{click:t.showAllComments}},[e("div",{class:["arrows-down",{"arrows-up":t.isMesFolding}]},[e("img",{attrs:{src:i("da99"),alt:""}})])]):t._e()])]):t._e()},s=[],r={name:"brand-description",props:{brandDescription:{type:String}},data:function(){return{isMesFolding:!1,isShowArrowIcon:!1}},mounted:function(){this.brandDescription&&(this.isShowArrowIcon=this.calcTitleHeight("sub-title-wrapper","sub-title-content"))},methods:{calcTitleHeight:function(t,e){return this.$refs[t].offsetHeight<this.$refs[e].offsetHeight},showAllComments:function(){this.isMesFolding=!this.isMesFolding}}},o=r,n=(i("0a93"),i("2877")),c=Object(n["a"])(o,a,s,!1,null,"de991eec",null);e["a"]=c.exports}});