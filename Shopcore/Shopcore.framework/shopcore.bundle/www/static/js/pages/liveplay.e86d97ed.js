(function(t){function e(e){for(var n,a,c=e[0],r=e[1],u=e[2],p=0,f=[];p<c.length;p++)a=c[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,c=1;c<i.length;c++){var r=i[c];0!==o[r]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={"pages/liveplay":0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(){return Promise.resolve()},a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;s.push([61,"chunk-vendors","chunk-common"]),i()})({"02d5":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return 2!==t.liveStatus?e("div",{staticClass:"status-wrap"},[t.showRetry?e("img",{attrs:{src:i("2007")}}):t._e(),e("div",{staticClass:"desc"},[t._v(t._s(t.liveStatusDesc))]),-1!==t.liveStatus?e("div",{staticClass:"opts"},[t.showRetry?e("div",{staticClass:"btn btn-retry",on:{click:function(e){return t.$emit("retry")}}},[t._v(t._s(t.$t("liveplay.tautology")))]):t._e(),e("div",{staticClass:"btn btn-back",on:{click:t.gotoHome}},[t._v(t._s(t.$t("liveplay.go_home")))])]):t._e()]):t._e()},o=[],s=i("5530"),a=(i("d3b7"),i("2f62")),c=i("a8f5"),r={computed:Object(s["a"])(Object(s["a"])({},Object(a["d"])({liveStatus:function(t){return t.app.liveStatus||0},liveStatusDesc:function(t){return t.app.liveStatusDesc}})),{},{showRetry:function(){var t=this;return[-2,-1,0,1,3].some((function(e){return e===t.liveStatus}))}}),methods:{gotoHome:function(){Object(c["b"])({linkType:999})}}},u=r,l=(i("db8c"),i("2877")),p=Object(l["a"])(u,n,o,!1,null,"d3dd0930",null);e["a"]=p.exports},"0a78":function(t,e,i){},"0c65":function(t,e,i){"use strict";var n=function(t,e){return e.num?t("div",{staticClass:"viewnum"},[e._v(e._s(e.$t("liveplay.crowd",[e.num])))]):e._e()},o=[],s=(i("a9e3"),{props:{num:{type:Number,default:0}}}),a=s,c=(i("d7a7"),i("2877")),r=Object(c["a"])(a,n,o,!0,null,"4fb5826e",null);e["a"]=r.exports},"0ca4":function(t,e,i){"use strict";i("99af"),i("b0c0");var n=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"tip",mode:"out-in"}},[t.tips&&t.tips.length?e("div",{key:"".concat(t.name).concat(t.text),staticClass:"tip"},[e("div",{staticClass:"name"},[t._v(t._s(t.name))]),e("div",{staticClass:"text"},[t._v(t._s(t.text))])]):t._e()])},o=[],s=i("5530"),a=i("2f62"),c=i("6761"),r=i.n(c),u=r.a.GroupActionCmd,l={watch:{tips:"check"},computed:Object(s["a"])(Object(s["a"])({},Object(a["d"])({tips:function(t){return t.msg.tips}})),{},{name:function(){return this.tips[0]&&this.tips[0].userName||""},text:function(){var t=this.tips[0]||{},e="";switch(t.action){case u.enter:e=this.$t("liveplay.into_studio");break;case u.focus:e=this.$t("liveplay.looked_buyer");break;case u.cart:e=this.$t("liveplay.shopping_cart");break;case u.buy:e=this.$t("liveplay.buy");break;case u.coupon:e=this.$t("liveplay.coupon",[t.text]);break;default:break}return e}}),methods:Object(s["a"])(Object(s["a"])({},Object(a["c"])(["shiftTips"])),{},{check:function(){var t=this;this.timer||(this.count=0,this.timer=setInterval((function(){t.tips.length>1||5===t.count?(t.shiftTips(),t.count=0,0===t.tips.length&&(clearInterval(t.timer),t.timer=null)):t.count+=1}),1e3))}})},p=l,f=(i("1c51"),i("2877")),d=Object(f["a"])(p,n,o,!1,null,"ed8fc5b6",null);e["a"]=d.exports},"1c51":function(t,e,i){"use strict";i("2f33")},2007:function(t,e,i){t.exports=i.p+"static/img/live_loading.06fa0c2c.gif"},"22d8":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{ref:"wrapper",staticClass:"msg-wrapper",class:{focus:t.focus}},[e("div",{ref:"content",staticClass:"msg-content"},t._l(t.msgs,(function(i,n){return e("div",{key:n,staticClass:"item"},[e("div",{staticClass:"msg"},[e("span",{staticClass:"name"},[t._v(t._s(i.userName)+"ï¼š")]),e("span",{staticClass:"text"},[t._v(t._s(i.text))])])])})),0)])},o=[],s=i("5530"),a=i("2f62"),c=i("229e"),r={watch:{msgs:function(){var t=this;this.$nextTick((function(){if(t.scroll&&(t.scroll.refresh(),t.autoScrollEnd)){var e=t.scroll.maxScrollY;t.scroll.scrollTo(0,e,500)}}))}},computed:Object(s["a"])({},Object(a["d"])({focus:function(t){return t.app.focus},msgs:function(t){return t.msg.msgs}})),mounted:function(){var t=this;this.$nextTick((function(){t.autoScrollEnd=!0,t.scroll=new c["a"](t.$refs.wrapper),t.scroll.on("scrollStart",(function(){t.autoScrollEnd=!1})),t.scroll.on("scrollEnd",(function(e){var i=e.y;i<=t.scroll.maxScrollY+30&&(t.autoScrollEnd=!0)}))}))}},u=r,l=(i("f8bb"),i("2877")),p=Object(l["a"])(u,n,o,!1,null,"4290a1c0",null);e["a"]=p.exports},"2ea4":function(t,e,i){},"2f33":function(t,e,i){},4848:function(t,e,i){"use strict";(function(t){var n=[i("c169"),i("8f26"),i("0df4"),i("f375"),i("5b36"),i("83fb"),i("da4a")];function o(t,e){return parseInt(Math.random()*(e-t+1)+t,10)}e["a"]={data:function(){return{imgList:n,num:t.isIos?7:4}},methods:{random:function(){return o(1,7)}}}}).call(this,i("7189")["default"])},"49a2":function(t,e,i){"use strict";i("2ea4")},5327:function(t,e,i){"use strict";(function(t){var n=i("5530"),o=(i("b0c0"),i("99af"),i("d3b7"),i("159b"),i("7db0"),i("e9c4"),i("2f62")),s=i("e23e"),a=i.n(s),c=i("191e"),r=i("6761"),u=i.n(r),l=i("0c65"),p=i("9786"),f=i("0ca4"),d=i("22d8"),h=i("6626"),v=i("5cc2"),m=i("92fd"),g=i("02d5"),y=i("b68d"),b=i("9225"),k={2032:b["a"].t("liveplay.network_poor"),2048:b["a"].t("liveplay.network_poor"),1001:b["a"].t("liveplay.no_network"),1002:b["a"].t("liveplay.network_poor"),1:b["a"].t("liveplay.network_poor"),2:b["a"].t("liveplay.network_poor"),3:b["a"].t("liveplay.network_poor"),4:b["a"].t("liveplay.network_poor"),5:b["a"].t("liveplay.network_poor")};e["a"]={mixins:[c["a"],y["a"]],components:{viewnum:l["a"],notice:p["a"],coupon:v["a"],tips:f["a"],messages:d["a"],bottombar:h["a"],products:m["a"],livestatus:g["a"]},data:function(){return{isIos:t.isIos,isPlaying:!1,isLoading:!1,errorText:"",wording:{2032:this.$t("liveplay.network_poor"),2048:this.$t("liveplay.network_poor"),1001:this.$t("liveplay.no_network"),1002:this.$t("liveplay.network_poor"),1:this.$t("liveplay.network_poor"),2:this.$t("liveplay.network_poor"),3:this.$t("liveplay.network_poor"),4:this.$t("liveplay.network_poor"),5:this.$t("liveplay.network_poor")}}},computed:Object(n["a"])({},Object(o["d"])({isSDKReady:function(t){return t.msg.isSDKReady},liveStatus:function(t){return t.app.liveStatus},focus:function(t){return t.app.focus},liveId:function(t){return t.app.liveId},liveInfo:function(t){return t.app.liveInfo},userInfo:function(t){return t.app.userInfo}})),mounted:function(){var t=this;console.log(this.liveStatus,"liveStatus"),this.init(),wx.ready((function(){wx.getNetworkType({success:function(t){this.networkTips(t.networkType)}})})),document.addEventListener("visibilitychange",(function(){document.hidden||t.$nextTick((function(){t.handlePlay()}))})),this.wxJsReady((function(){WeixinJSBridge.on("onPageStateChange",(function(e){e.active?t.handlePlay():t.handlePause()}))}))},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["updateLiveInfo","setIsLogin","showMsg","showTip","handleEnter","handleLeave","toggleIsSDKReady","toggleIsPlaying","showRedpacket","setLiveStatus"])),Object(o["b"])(["fetchLiveInfo","fetchUserInfo","fetchProductList"])),{},{init:function(){var e=this;this.setIsLogin(t.auth.islogin()),t.auth.islogin()&&this.fetchUserInfo(),this.fetchLiveInfo().then((function(i){var n=i.sellerInfo,o=void 0===n?{}:n,s=i.liveCover,a=e.$t("liveplay.waiting_studio");t.wxShare({title:e.$t("liveplay.live_broadcast",{0:o.name||""}),desc:a,imgUrl:s,mpTitle:a}),o.name&&(document.title=o.name),2===i.liveStatus&&e.$nextTick((function(){e.initTcPlayer(),e.initTim()}))})),this.fetchProductList()},play:function(){this.isPlaying||this.player.play()},networkTips:function(e){"none"===e||"unknown"===e?t.showToast({title:this.$t("liveplay.no_network")}):"wifi"!==e&&t.showToast({title:this.$t("liveplay.mobile_network")})},initTim:function(){var e=this.liveInfo.config.imSdkAppId,i={SDKAppID:e},n=a.a.create(i);this.tim=n,n.setLogLevel(1),n.on(a.a.EVENT.SDK_READY,this.onReadyStateUpdate,this),n.on(a.a.EVENT.SDK_NOT_READY,this.onReadyStateUpdate,this),n.on(a.a.EVENT.ERROR,this.onError),n.on(a.a.EVENT.MESSAGE_RECEIVED,this.onReceiveMessage,this),n.on(a.a.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED,this.onReceiveGroupSystemNotice,this),t.auth.islogin()?this.applyTimLogin():this.applyJoinGroup()},initTcPlayer:function(){var t=this,e=this.liveInfo.playUrl;return this.player=new TcPlayer("video",{m3u8:e,live:!0,autoplay:!0,controls:"none",h5_flv:!0,x5_player:!0,x5_type:"h5",listener:function(e){if(t.isPlaying||t.checkPlaying(),"error"===e.type){var i=e.detail.code;t.errorText="[".concat(i,"] ").concat(k[i]||t.$t("liveplay.network_poor")),t.isLoading=!1}"playing"===e.type&&t.toggleIsPlaying(!0),"pause"===e.type&&t.toggleIsPlaying(!1),"resize"===e.type&&(t.isPlaying||(t.resizeCount=t.resizeCount||0,t.resizeCount+=1,t.resizeCount>5&&(t.toggleIsPlaying(!0),t.resizeCount=0)))},wording:k}),this.handlePlay(),this.player},handlePause:function(){this.player&&this.player.pause()},handlePlay:function(){var e=this;this.isLoading=!0,this.checkPlaying(),this.player&&!this.isPlaying&&(t.isWechat?this.wxJsReady((function(){WeixinJSBridge.invoke("getNetworkType",{},(function(){e.player.play()}))})):this.player.play())},wxJsReady:function(e){t.isWechat&&"function"===typeof e&&("undefined"!==typeof WeixinJSBridge?e():document.addEventListener("WeixinJSBridgeReady",e,!1))},onReceiveGroupSystemNotice:function(t){var e=t.data;console.log("SystemNotice",e.message),this.handleSystemMsg(e.message)},onReceiveMessage:function(t){var e=this,i=t.data;console.log("ReceiveMessage",i),i&&i.length&&i.forEach((function(t){t.type===a.a.TYPES.MSG_CUSTOM&&e.handleGroupMsg(t)}))},onError:function(t){var e=t.data;e.message},onReadyStateUpdate:function(t){var e=t.name,i=e===a.a.EVENT.SDK_READY;this.toggleIsSDKReady(i),i&&this.applyJoinGroup()},handleGroupMsg:function(t){var e=this.getGroupMsgInfo(t),i=u.a.GroupActionCmd;if(e)switch(e.action){case i.text:this.showMsg(e);break;case i.enter:this.handleEnter(),this.showTip(e);break;case i.leave:this.handleLeave();break;case i.like:break;case i.danmu:break;case i.focus:case i.cart:case i.buy:case i.coupon:this.showTip(e);break;default:break}},getGroupMsgInfo:function(t){if(!t.payload.data)return null;var e=this.userInfo,i={action:0,userName:"",text:""},n=JSON.parse(t.payload.data);if(i.action=n.userAction,n.nickName?i.userName=n.nickName===e?this.$tc("liveplay.user",1):n.nickName:i.userName=this.$tc("liveplay.user",2),n.userAction===u.a.GroupActionCmd.text||n.userAction===u.a.GroupActionCmd.coupon){var o=t.getElements(),s=o.find((function(t){return t.type===a.a.TYPES.MSG_TEXT}));if(s&&s.content&&s.content.text){var c=JSON.parse(s.content.text);c.msg&&(i.text=u.a.escape2Html(c.msg))}}return i},handleSystemMsg:function(t){var e=this.getSystemMsgInfo(t),i=u.a.SystemActionCmd;if(e)switch(e.bizType){case i.top:this.fetchProductList();break;case i.updateProduct:this.fetchProductList();break;case i.seckillStore:break;case i.coupon:this.showRedpacket(e.couponNo);break;case i.seckillStart:break;case i.updateInfo:this.updateLiveInfo(e);break;case i.hostEnter:this.init();break;case i.hostLeave:this.setLiveStatus(e.status);break;default:break}},getSystemMsgInfo:function(t){if(!t.payload.userDefinedField)return null;var e=null,i=JSON.parse(t.payload.userDefinedField),n=i.BizData;return n&&(e={bizType:i.BizType,liveId:n.LiveId||"",prodId:n.ProductId,couponNo:n.CouponBatchNo,viewNum:n.ViewNum,likeNum:n.LikeNum,status:n.LiveStatus,store:n.Stock}),e},applyTimLogin:function(){var e=this.liveInfo.userSig,i=t.auth.getValue("userId");this.tim.login({userID:i,userSig:e})},applyJoinGroup:function(){var t=this,e=this.liveInfo.groupId;return this.tim.joinGroup({groupID:e,type:a.a.TYPES.GRP_AVCHATROOM}).then((function(e){e.data.status===a.a.TYPES.JOIN_STATUS_SUCCESS&&t.applySendMsg(u.a.GroupActionCmd.enter)})).catch((function(t){console.warn("joinGroup error:",t)}))},applySendMsg:function(e,i){var n=this;if(!t.auth.islogin())return Promise.reject(this.$t("liveplay.logout"));if(!this.isSDKReady)return t.showToast({title:"SDK not Ready"}),Promise.reject("sdk ".concat(this.$t("liveplay.logout")));console.log("applySendMsg");var o=this.liveInfo.groupId,s=this.userInfo.nickname,c=t.auth.getValue("userId"),r=this.tim.createCustomMessage({to:o,conversationType:a.a.TYPES.CONV_GROUP,payload:{data:JSON.stringify({userAction:e,nickName:s,userId:c})}});return r._elements.push({type:a.a.TYPES.MSG_TEXT,content:{text:JSON.stringify({msg:i||""})}}),this.tim.sendMessage(r).then((function(t){var e=t.data;n.onReceiveMessage({data:[e.message]})})).catch((function(e){t.showToast({title:e.message})}))},toggleIsPlaying:function(t){this.isPlaying="undefined"===typeof t?!this.isPlaying:t,this.isLoading=!1},checkPlaying:function(){var t=this;this.checkTimer&&clearTimeout(this.checkTimer),this.checkTimer=setTimeout((function(){t.isPlaying||(t.isLoading=!1)}),3e3)}})}}).call(this,i("7189")["default"])},"5cc2":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{class:[t.$i18n.locale]},[e("transition",{attrs:{name:"redpacket"}},[t.redpacketVisible||t.couponVisible?e("div",{staticClass:"redpacket-wrap"},[t.redpacketVisible?e("div",{staticClass:"redpacket-open"},[e("div",{staticClass:"btn",on:{click:t.openRedpacket}}),e("img",{staticClass:"load-img",attrs:{src:i("78d6")}})]):t._e(),t.couponVisible?e("div",{staticClass:"coupon-open"},[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"price",class:{"price-jpy":t.isJPY(t.coupon.symbol)}},[e("span",{staticClass:"symbol"},[t._v(t._s(t.coupon.symbol||"ï¿¥"))]),e("span",{staticClass:"amount"},[t._v(t._s(t.coupon.couponValue))])])]),e("div",{staticClass:"right"},[e("div",{staticClass:"title"},[t._v(t._s(t.coupon.limitDescription))]),e("div",{staticClass:"moneyoff"},[t._v(t._s(t.$t("liveplay.available",[t.coupon.minOrderValue])))])])])]):t._e()]):t._e()]),t.couponVisible?e("div",{staticClass:"coupon-overlayer",on:{click:t.closeRedpacket}}):t._e()],1)},o=[],s=i("5530"),a=i("1041"),c=i("2f62"),r={mixins:[a["a"]],watch:{redpacketVisible:"onRedpacketChange",couponVisible:"onCouponChange"},computed:Object(s["a"])({},Object(c["d"])({redpacketVisible:function(t){return t.app.redpacketVisible},couponVisible:function(t){return t.app.couponVisible},batchCode:function(t){return t.app.batchCode},coupon:function(t){return t.app.receivedCoupon}})),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(c["c"])(["toggleRedpacket","toggleCoupon"])),Object(c["b"])(["fetchCoupon"])),{},{openRedpacket:function(){this.fetchCoupon()},closeRedpacket:function(){this.toggleRedpacket(!1),this.toggleCoupon(!1)},timedClose:function(t,e){var i=this;clearTimeout(this.timer),t&&(this.timer=setTimeout((function(){i.closeRedpacket(),clearTimeout(i.timer)}),e))},onCouponChange:function(t){this.timedClose(t,5e3)},onRedpacketChange:function(t){this.timedClose(t,6e4)}})},u=r,l=(i("9f4c"),i("2877")),p=Object(l["a"])(u,n,o,!1,null,"003d19fc",null);e["a"]=p.exports},61:function(t,e,i){t.exports=i("c27c")},6626:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[t.focus?e("div",{staticClass:"focus-overlayer",on:{touchmove:function(t){t.preventDefault()},click:function(e){return t.$refs.input.blur()}}}):t._e(),e("div",{staticClass:"bottombar",class:{focus:t.focus||t.text}},[t.isLogin?e("form",{staticClass:"action-form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.onSend.apply(null,arguments)}}},[e("input",{ref:"input",staticClass:"action-msg",attrs:{type:"text",placeholder:t.$t("liveplay.talk_anchor")},domProps:{value:t.text},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}})]):e("div",{staticClass:"action-login"},[e("div",{staticClass:"action-msg small",on:{click:t.toLogin}},[t._v(t._s(t.$t("liveplay.login_tease")))])]),e("div",{staticClass:"action-send",class:{active:!!t.text},on:{click:t.onSend}},[t._v(t._s(t.$t("liveplay.send")))]),e("div",{staticClass:"action-product",on:{click:t.onProduct}},[e("div",{staticClass:"num"},[t._v(t._s(t.productTotal))])]),e("div",{ref:"like",staticClass:"action-like",on:{click:t.onLike}},[e("div",{staticClass:"count"},[t._v(t._s(t.likeNum))]),e("div",{staticClass:"icon",on:{animationend:t.onLikeAnimationEnd}}),e("animlike",{directives:[{name:"show",rawName:"v-show",value:2===t.liveStatus&&!t.focus&&!t.productVisible,expression:"liveStatus === 2 && !focus && !productVisible"}]})],1)])])},o=[],s=i("69fd"),a=s["a"],c=(i("8047"),i("2877")),r=Object(c["a"])(a,n,o,!1,null,"2f8d8bf4",null);e["a"]=r.exports},6761:function(t,e,i){i("ac1f"),i("5319");var n={none:0,text:1,enter:2,leave:3,like:4,danmu:5,focus:6,cart:7,buy:8,coupon:9},o={none:0,top:100,updateProduct:101,seckillStore:102,coupon:200,seckillStart:202,updateInfo:600,hostEnter:601,hostLeave:602},s={waitStart:0,waitHost:1,running:2,pause:3,closedBySystem:7,closedWithouHost:8,closedWithHost:9,closedForbidden:10},a=function(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(t,i){return e[i]}))};t.exports={GroupActionCmd:n,SystemActionCmd:o,escape2Html:a,LiveStatus:s}},"69fd":function(t,e,i){"use strict";(function(t){var n=i("5530"),o=(i("ac1f"),i("00b4"),i("2f62")),s=i("a8de"),a=i("6761"),c=i.n(a);e["a"]={components:{animlike:s["a"]},computed:Object(n["a"])({},Object(o["d"])({productTotal:function(t){return t.app.productInfo.total||0},likeNum:function(t){return t.app.liveInfo.likeNum},productVisible:function(t){return t.app.productVisible},liveStatus:function(t){return t.app.liveStatus},isLogin:function(t){return t.app.isLogin},focus:function(t){return t.app.focus},text:function(t){return t.app.text}})),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["b"])(["fetchLike","fetchCartNum"])),Object(o["c"])(["handleFocus","handleBlur","setLike","setText","toggleProduct"])),{},{toLogin:function(){t.auth.tologin()},reportLikeCount:function(){var t=this;this.likeCount=this.likeCount||0,this.likeCount+=1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.fetchLike({count:t.likeCount}),t.likeCount=0,t.timer=null}),2e3)},onLikeAnimationEnd:function(){this.$refs.like.className="action-like"},onLike:function(){this.$emit("sendMsg",c.a.GroupActionCmd.like),this.$refs.like.className="action-like likeScale",this.setLike(this.likeNum+1),this.reportLikeCount()},onProduct:function(){this.productTotal&&this.productTotal>0&&(t.auth.islogin()&&this.fetchCartNum(),this.$emit("sendMsg",c.a.GroupActionCmd.buy),this.toggleProduct())},onSend:function(){this.text&&(this.$refs.input.blur(),this.$emit("sendMsg",c.a.GroupActionCmd.text,this.text),this.setText(""))},onInput:function(t){this.setText(t.target.value)},onFocus:function(){var t=this;setTimeout((function(){t.handleFocus()}),250)},onBlur:function(){var t=this;/iphone|ipod|ipad/gi.test(navigator.appVersion)?document.body&&(this.blurTimer=setTimeout((function(){t.handleBlur(),document.body.scrollTop=document.body.scrollTop,"function"===typeof window.scrollTo&&window.scrollTo(0,0)}),1)):this.handleBlur()}})}}).call(this,i("7189")["default"])},"6b8c":function(t,e,i){},"6f4f":function(t,e,i){},7141:function(t,e,i){"use strict";i("c8f9")},"78d6":function(t,e,i){t.exports=i.p+"static/img/coupon-open.3bd51167.png"},8047:function(t,e,i){"use strict";i("6b8c")},"93da":function(t,e,i){"use strict";(function(t){i("ac1f"),i("841c"),i("d3b7");var n=i("9225"),o=t.parseUrl(window.location.search,"lower"),s={state:{isLogin:!1,liveStatus:-1,liveStatusDesc:"",userInfo:{},focus:!1,text:"",productVisible:!1,redpacketVisible:!1,couponVisible:!1,batchCode:"",receivedCoupon:{},showLikeNum:0,cartNum:0,liveId:o.id||o.liveid,liveInfo:{},productInfo:{}},mutations:{updateLiveInfo:function(t,e){["viewNum","likeNum"].forEach((function(i){e[i]&&(t.liveInfo[i]=e[i])}))},setShowLikeNum:function(t,e){t.showLikeNum=e},setLiveStatus:function(t,e){switch(e){case-1:t.liveStatusDesc="";break;case-2:t.liveStatusDesc=n["a"].t("liveplay.network_reload");break;case 0:case 1:case 3:t.liveStatusDesc=n["a"].t("liveplay.anchor_moment");break;default:t.liveStatusDesc=n["a"].t("liveplay.live_over");break}t.liveStatus=e},setIsLogin:function(t,e){t.isLogin=e},setCartNum:function(t,e){t.cartNum=e||0},setProductInfo:function(t,e){t.productInfo=e||{}},setLiveInfo:function(t,e){t.liveInfo=e||{}},setText:function(t,e){t.text=e||""},setLike:function(t,e){t.liveInfo.likeNum=e},handleFocus:function(t){t.focus=!0},handleBlur:function(t){t.focus=!1},handleEnter:function(t){t.liveInfo.viewNum+=1},handleLeave:function(t){t.liveInfo.viewNum-=1},toggleProduct:function(t){t.productVisible=!t.productVisible},showRedpacket:function(t,e){t.redpacketVisible=!0,t.batchCode=e},toggleRedpacket:function(t,e){t.redpacketVisible=e},toggleCoupon:function(t,e){t.couponVisible=e},setReceivedCoupon:function(t,e){t.receivedCoupon=e},setUserInfo:function(t,e){t.userInfo=e||{}}},actions:{fetchLiveInfo:function(e){var i=e.state,n=e.commit;return n("setLiveStatus",-1),t.request({url:"/api/live/video/liveinfo",params:{liveid:i.liveId,needsign:!0,visitorquitroom:0}}).then((function(t){return n("setLiveInfo",t),n("setLiveStatus",t.liveStatus),n("initMsg",t.chatMsg),t})).catch((function(e){return t.showToast({title:e.message}),n("setLiveStatus",-2),Promise.reject(null)}))},fetchUserInfo:function(e){var i=e.commit;t.request("/api/usercenter/squserinfo").then((function(t){i("setUserInfo",t)}))},fetchProductList:function(e){var i=e.state,n=e.commit;return t.request({url:"/api/live/video/productlist",params:{liveid:i.liveId}}).then((function(t){return n("setProductInfo",t),t})).catch((function(e){return t.showToast({title:e.message}),Promise.reject(null)}))},fetchCartNum:function(e){var i=e.commit;return t.request({url:"/api/trading/sqscartprodnum"}).then((function(t){return i("setCartNum",t.totalNum),t.totalNum})).catch((function(e){return t.showToast({title:e.message}),Promise.reject(null)}))},fetchCoupon:function(e){var i=e.state,n=e.commit;return t.showLoading(),t.request({method:"POST",url:"/api/live/video/coupon",data:{batchcode:i.batchCode},needHandleError:!0}).then((function(e){return e.status?(e.message=e.message||e.msg,Promise.reject(e)):(t.hideLoading(),t.showToast({title:e.msg}),e.success?(n("toggleRedpacket",!1),n("toggleCoupon",!0),n("setReceivedCoupon",e.couponInfo)):(n("toggleRedpacket",!1),n("toggleCoupon",!1)),e)})).catch((function(e){return t.hideLoading(),t.showToast({title:e.message}),Promise.reject(null)}))},fetchLike:function(e,i){var n=e.state,o=e.commit,s=i.count;return t.request({method:"POST",data:{count:s,liveid:n.liveId},url:"/api/live/video/like"}).then((function(t){return o("setLike",t.totalCount),t.totalCount}))}}};e["a"]=s}).call(this,i("7189")["default"])},9786:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return t.notice?e("div",{staticClass:"notice",class:{"notice-active":t.show,"notice-leaving":t.leaving}},[e("div",{staticClass:"title",on:{click:t.toggle}},[e("span",{staticClass:"text"},[t._v(t._s(t.$t("liveplay.notice")))]),e("span",{staticClass:"arrow"})]),e("transition",{on:{"before-enter":t.heightZero,enter:t.heightContent,"after-enter":t.heightAuto,"before-leave":t.beforeLeave,leave:t.leave,"after-leave":t.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"wrapper"},[e("div",{staticClass:"content"},[e("p",[t._v(t._s(t.notice))])])])])],1):t._e()},o=[],s={props:["notice"],data:function(){return{show:!0,leaving:!1}},methods:{toggle:function(){this.show=!this.show},heightAuto:function(t){t.style.height=""},heightZero:function(t){t.style.height="0"},heightContent:function(t){t.style.height=this.getContentHeihgt(t)},beforeLeave:function(t){this.leaving=!0,this.heightContent(t)},leave:function(t){var e=this;setTimeout((function(){e.heightZero(t)}),16)},afterLeave:function(){this.leaving=!1},getContentHeihgt:function(t){return t.scrollHeight?"".concat(t.scrollHeight,"px"):""}}},a=s,c=(i("7141"),i("2877")),r=Object(c["a"])(a,n,o,!1,null,"dffa17bc",null);e["a"]=r.exports},"9f4c":function(t,e,i){"use strict";i("0a78")},a8de:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"anim-group"},t._l(t.num,(function(i,n){return e("img",{key:n,staticClass:"anim-item",class:"anim".concat(i),attrs:{src:t.imgList[n]}})})),0)},o=[],s=i("4848"),a=s["a"],c=(i("49a2"),i("2877")),r=Object(c["a"])(a,n,o,!1,null,"6512205a",null);e["a"]=r.exports},b8a4:function(t,e,i){},c04f:function(t,e,i){"use strict";i("f6d9")},c27c:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("75fc");var n=i("56d7"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap",style:t.pageThemeStyle},[2===t.liveStatus?e("div",{staticClass:"videolayer"},[e("div",{attrs:{id:"video"}})]):t._e(),e("div",{staticClass:"overlayer",class:{iphonex:!t.focus}},[2!==t.liveStatus||t.isPlaying?t._e():[e("img",{staticClass:"video-poster",attrs:{src:t.liveInfo.liveCover}}),e("div",{staticClass:"video-mask"}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"video-loading"},[e("div",{staticClass:"loading__icon"}),e("div",{staticClass:"loading__text"},[t._v(t._s(t.$t("liveplay.buffer")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&t.errorText,expression:"!isLoading && errorText"}],staticClass:"video-paused"},[t._v(t._s(t.errorText))]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"video-play",on:{click:t.handlePlay}})],e("div",{staticClass:"overlayer-content"},[e("div",{staticClass:"overlayer-prevent",on:{touchmove:function(t){t.preventDefault()}}}),2===t.liveStatus?[e("viewnum",{attrs:{num:t.liveInfo.viewNum}}),e("notice",{attrs:{notice:t.liveInfo.liveNotice}}),e("tips"),e("messages"),e("bottombar",{on:{sendMsg:t.applySendMsg}}),e("coupon",{on:{sendMsg:t.applySendMsg}})]:t._e()],2),e("products"),e("livestatus",{on:{retry:t.init}})],2)])},s=[],a=i("5327"),c=a["a"],r=(i("c04f"),i("d314"),i("2877")),u=Object(r["a"])(c,o,s,!1,null,"4f29f75a",null),l=u.exports,p=i("a026"),f=i("2f62"),d=i("93da"),h=(i("d81d"),i("fb6a"),{state:{isSDKReady:!1,msgs:[],tips:[]},mutations:{toggleIsSDKReady:function(t,e){t.isSDKReady="undefined"===typeof e?!t.isSDKReady:e},initMsg:function(t,e){e&&e.length&&(t.msgs=e.map((function(t){return{userName:t.nick,text:t.msg}})))},showMsg:function(t,e){t.msgs.push(e),t.msgs.length>20&&(t.msgs=t.msgs.slice(-10))},showTip:function(t,e){t.tips.push(e),console.log(t.tips)},shiftTips:function(t){t.tips.shift()}},actions:{}}),v=h;p["default"].use(f["a"]);var m=!1,g=new f["a"].Store({modules:{app:d["a"],msg:v},strict:m});i.p=publicPath,Object(n["a"])(l,{store:g})},c8f9:function(t,e,i){},d314:function(t,e,i){"use strict";i("f5f7")},d7a7:function(t,e,i){"use strict";i("b8a4")},db8c:function(t,e,i){"use strict";i("f79b")},f5f7:function(t,e,i){},f6d9:function(t,e,i){},f79b:function(t,e,i){},f8bb:function(t,e,i){"use strict";i("6f4f")}});