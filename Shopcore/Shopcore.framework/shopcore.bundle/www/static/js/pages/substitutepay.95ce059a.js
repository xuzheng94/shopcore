(function(e){function t(t){for(var a,o,n=t[0],d=t[1],c=t[2],l=0,p=[];l<n.length;l++)o=n[l],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,n=1;n<r.length;n++){var d=r[n];0!==s[d]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={"pages/substitutepay":0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(){return Promise.resolve()},o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],d=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=d;i.push([122,"chunk-vendors","chunk-common"]),r()})({"02b6":function(e,t,r){"use strict";r("9570")},"0c49":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("56d7"),s=(r("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"substitute-pay-page",style:e.pageThemeStyle},[e.showPage?[t("van-pull-refresh",{attrs:{"head-height":"60"},on:{refresh:e.pullRefresh},scopedSlots:e._u([{key:"pulling",fn:function(e){return[t("div")]}},{key:"loosing",fn:function(){return[t("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0},{key:"loading",fn:function(){return[t("pullRefreshLoading",{attrs:{"bg-color":"#f8f8f8"}})]},proxy:!0}],null,!1,1883122893),model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[t("div",{staticClass:"substitute-pay-dev"},[t("div",{staticClass:"others-pay-status"},[t("div",{class:["price-info",{"price-info-bb":100==e.payStatus||1213==e.payStatus}]},[e.isJPY(e.orderInfo.symbol)?e._e():t("div",{staticClass:"symbol"},[e._v(e._s(e.orderInfo.symbol||"Â¥"))]),t("div",{staticClass:"price"},[e._v(e._s(e.orderInfo.totalFullPayPrice||0))]),e.isJPY(e.orderInfo.symbol)?t("div",{staticClass:"symbol"},[e._v(e._s(e.orderInfo.symbol))]):e._e()]),e.orderInfo.foreign&&(e.orderInfo.paymentRMBAmount||e.orderInfo.exchangeRate)?t("div",{class:["price-foreign",{"margin-b0":!(1==e.payStatus||100==e.payStatus||1213==e.payStatus)}]},[e.orderInfo.totalExchangePrice?t("div",{staticClass:"pay_rate"},[e._v(e._s(e.$t("substitutepay.about_rmb",[e.orderInfo.totalExchangePrice])))]):e._e(),e.orderInfo.exchangeRate?t("div",{staticClass:"pay_rate"},[e._v(e._s(e.$t("substitutepay.estimated_exchange_rate",[e.orderInfo.symbol,e.orderInfo.exchangeRate])))]):e._e()]):e._e(),t("div",{staticClass:"others-pay-prompt"},[1==e.payStatus?t("div",{staticClass:"prompt-time"},[t("div",{staticClass:"text"},[e._v(e._s(e.$t("substitutepay.remaining_time_payment"))+" ")]),t("div",{staticClass:"time"},[e._v(e._s(e.timeDesc))])]):e._e(),100==e.payStatus||1213==e.payStatus?t("div",{staticClass:"prompt-time"},[100==e.payStatus?t("div",{staticClass:"text"},[e._v(e._s(e.$t("substitutepay.order_time")))]):e._e(),1213==e.payStatus?t("div",{staticClass:"text"},[e._v(e._s(e.$t("substitutepay.order_cancelled")))]):e._e()]):e._e()])]),e.productName?t("div",{class:["product-info",{"margin-b0":!(1==e.payStatus&&1==e.orderInfo.shenqiIdcardRequirement)}]},[t("div",{staticClass:"info-title"},[e._v(e._s(e.$t("substitutepay.product_name")))]),t("div",{staticClass:"info-name"},[e._v(e._s(e.productName))])]):e._e(),1==e.payStatus&&1==e.orderInfo.shenqiIdcardRequirement?t("div",{staticClass:"substitute-pay-info"},[t("div",{staticClass:"pickup-title-div"},[t("div",{staticClass:"pickup-title"},[t("span",{staticClass:"title-line"}),t("span",{staticClass:"title-text"},[e._v(e._s(e.$t("substitutepay.payer_information")))])]),t("div",{staticClass:"need-id-card-tip-simple"},[e._v(e._s(e.$t("substitutepay.required_customs")))])]),t("div",{staticClass:"need-id-card-container-input"},[t("div",{staticClass:"idCard-item"},[t("van-field",{attrs:{label:e.$t("substitutepay.name_payer"),placeholder:e.$t("substitutepay.fill_pay_name")},model:{value:e.payer.name,callback:function(t){e.$set(e.payer,"name",t)},expression:"payer.name"}})],1),t("div",{staticClass:"idCard-item"},[t("van-field",{attrs:{label:e.$t("substitutepay.identification_number"),placeholder:e.$t("substitutepay.fill_id_number")},model:{value:e.payer.idCardNo,callback:function(t){e.$set(e.payer,"idCardNo",t)},expression:"payer.idCardNo"}})],1)])]):e._e(),1==e.payStatus?t("div",{staticClass:"substitute-pay-submit-application"},[t("div",{class:["submit-button",{"no-submit-button":!e.isSubmitButton}],on:{click:e.wechatpay}},[e._v(e._s(e.$t("substitutepay.payment")))])]):e._e()])])]:e.showPage?e._e():t("loading-line")],2)}),i=[],o=r("4eca"),n=o["a"],d=(r("02b6"),r("2877")),c=Object(d["a"])(n,s,i,!1,null,null,null),u=c.exports;r.p=publicPath,Object(a["a"])(u)},122:function(e,t,r){e.exports=r("0c49")},"4eca":function(e,t,r){"use strict";(function(e){r("be7f");var a=r("565f"),s=(r("ab71"),r("58e6")),i=(r("b0c0"),r("ac1f"),r("841c"),r("99af"),r("a9e3"),r("c740"),r("a434"),r("4d90"),r("d3b7"),r("25f0"),r("603c")),o=r("44e4"),n=r("ed08"),d=r("c08d"),c=r("b68d"),u=r("8652"),l=r("3bb4"),p=r.n(l),f=r("2f1f"),y=r("1041");t["a"]={name:"substitutepay",components:{loadingLine:o["a"],"van-pull-refresh":s["a"],"van-field":a["a"],pullRefreshLoading:d["a"],otherPay:f["a"]},mixins:[i["a"],c["a"],y["a"]],computed:{isSubmitButton:function(){return 1!==this.orderInfo.shenqiIdcardRequirement||!!this.payer.name&&!!this.payer.idCardNo},payStatus:function(){var e=0;return this.orderInfo.stateCode?(e=this.orderInfo.stateCode===p.a.OrderState.pendingPay?1:this.orderInfo.stateCode===p.a.OrderState.canceledByTimeOut?100:this.orderInfo.stateCode===p.a.OrderState.canceledByService||this.orderInfo.stateCode===p.a.OrderState.canceledBySystem||this.orderInfo.stateCode===p.a.OrderState.canceledByBuyer||this.orderInfo.stateCode===p.a.OrderState.canceledBySeller?1213:9999,e):e}},data:function(){return{showPage:!1,isLoading:!1,isXhr:!1,orderid:"",orderUserId:"",userInfo:{},helperInfo:{},orderInfo:{},payer:{name:"",idCardNo:""},serverTime:0,timeDesc:"",productName:"",payTypes:[]}},mounted:function(){var t=n["a"].parseLocator(window.location.search,"lower");t.orderid&&(this.orderid=t.orderid),t.orderuserid&&(this.orderUserId=t.orderuserid),e.auth.islogin()?this.getHelpPayInfo():(e.auth.tologin(),this.showPage=!0),e.setNavigationBarTitle({title:this.$t("substitutepay.online_payment")})},methods:{getHelpPayInfo:function(){var t,r=this;t=this.orderUserId?"/api/ordercenter/sqhelperorderinfo?orderid=".concat(this.orderid,"&orderUserId=").concat(this.orderUserId):"/api/ordercenter/sqhelperorderinfo?orderid=".concat(this.orderid),e.request({url:t,method:"get"}).then((function(e){r.orderInfo=e.order||{},r.serverTime=e.serverTime||Number(Date.now()),e.order&&e.order.payDeadlineTime&&r.setupLastPayTime(e.order.payDeadlineTime);var t=e.order&&e.order.sellerOrderList&&e.order.sellerOrderList.length?e.order.sellerOrderList[0]:{},a=t&&t.subOrderList?t.subOrderList:[],s=a.length&&a[0].prodList?a[0].prodList:[];if(r.productName=s.length&&s[0].desc?s[0].desc:"",r.showPage=!0,r.isLoading=!1,e&&e.order&&e.order.sqPayType&&e.order.sqPayType.length){r.payTypes=e.order.sqPayType||[];var i=r.payTypes.findIndex((function(e){return"forAnotherPay"===e}));i>=0&&r.payTypes.splice(i,1)}console.log("this.payTypes",r.payTypes)})).catch((function(t){r.showPage=!0,e.showToast({title:t.message||t.msg||""})}))},pullRefresh:function(){this.getHelpPayInfo()},toPay:function(e){var t={orderId:this.orderid,payTypes:this.payTypes,orderUserId:this.orderUserId,isGuide:1};e&&(t.helpPayIdCardId=e),console.log("payParam-----",t),Object(u["b"])(t)},wechatpay:function(){var t=this;if(!this.isXhr)if(this.isSubmitButton||1!=this.orderInfo.shenqiIdcardRequirement)if(1==this.orderInfo.shenqiIdcardRequirement){var r={name:this.payer.name,idCardNo:this.payer.idCardNo};this.isXhr=!0,e.request({method:"post",url:"/api/ordercenter/helperpayerinfo",data:r}).then((function(e){t.isXhr=!1,e&&e.idcardId&&t.toPay(e.idcardId)})).catch((function(r){t.isXhr=!1,e.showToast({title:r.msg||r.message||t.$t("substitutepay.payer_failure")})}))}else this.toPay();else e.showToast({title:this.$t("substitutepay.please_information")})},clearTimer:function(e){this.timer&&e&&(clearInterval(this.timer),this.timer=null)},setupLastPayTime:function(e){var t=this,r=parseInt((e-this.serverTime)/1e3,10);r>0&&(this.timeInterval=r,this.setupTimeDesc(this.timeInterval),this.clearTimer(!0),this.timer=setInterval((function(){var e=t.timeInterval-1;t.timeInterval=e,e<=0?t.clearTimer(!0):t.setupTimeDesc(t.timeInterval)}),1e3))},setupTimeDesc:function(e){e-=1;var t=parseInt(e/3600,10).toString().padStart(2,"0"),r=parseInt((e-3600*t)/60,10).toString().padStart(2,"0"),a=parseInt((e-3600*t)%60,10).toString().padStart(2,"0");this.timeDesc="00"===t?"00 : ".concat(r," : ").concat(a):"".concat(t," : ").concat(r," : ").concat(a),"00"==t&&"00"==r&&"00"==a&&setTimeout((function(){window.location.reload(!0)}),800)}}}}).call(this,r("7189")["default"])},9570:function(e,t,r){}});